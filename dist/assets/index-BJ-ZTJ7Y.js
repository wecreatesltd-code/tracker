(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lv={exports:{}},iu={},Vv={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),eT=Symbol.for("react.fragment"),tT=Symbol.for("react.strict_mode"),nT=Symbol.for("react.profiler"),rT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),iT=Symbol.for("react.forward_ref"),oT=Symbol.for("react.suspense"),aT=Symbol.for("react.memo"),lT=Symbol.for("react.lazy"),Cg=Symbol.iterator;function cT(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fv=Object.assign,Uv={};function Li(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Mv}Li.prototype.isReactComponent={};Li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zv(){}zv.prototype=Li.prototype;function Nf(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Mv}var Pf=Nf.prototype=new zv;Pf.constructor=Nf;Fv(Pf,Li.prototype);Pf.isPureReactComponent=!0;var Ng=Array.isArray,$v=Object.prototype.hasOwnProperty,jf={current:null},Bv={key:!0,ref:!0,__self:!0,__source:!0};function Hv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$v.call(e,r)&&!Bv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ba,type:t,key:i,ref:o,props:s,_owner:jf.current}}function uT(t,e){return{$$typeof:ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Df(t){return typeof t=="object"&&t!==null&&t.$$typeof===ba}function dT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pg=/\/+/g;function md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dT(""+t.key):e.toString(36)}function Ml(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ba:case Zk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+md(o,0):r,Ng(s)?(n="",t!=null&&(n=t.replace(Pg,"$&/")+"/"),Ml(s,e,n,"",function(u){return u})):s!=null&&(Df(s)&&(s=uT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ng(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+md(i,l);o+=Ml(i,e,n,c,s)}else if(c=cT(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+md(i,l++),o+=Ml(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,n){if(t==null)return t;var r=[],s=0;return Ml(t,r,"","",function(i){return e.call(n,i,s++)}),r}function hT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Fl={transition:null},fT={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Fl,ReactCurrentOwner:jf};function Wv(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!Df(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Li;ie.Fragment=eT;ie.Profiler=nT;ie.PureComponent=Nf;ie.StrictMode=tT;ie.Suspense=oT;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;ie.act=Wv;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$v.call(e,c)&&!Bv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ba,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:sT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rT,_context:t},t.Consumer=t};ie.createElement=Hv;ie.createFactory=function(t){var e=Hv.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:iT,render:t}};ie.isValidElement=Df;ie.lazy=function(t){return{$$typeof:lT,_payload:{_status:-1,_result:t},_init:hT}};ie.memo=function(t,e){return{$$typeof:aT,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Fl.transition;Fl.transition={};try{t()}finally{Fl.transition=e}};ie.unstable_act=Wv;ie.useCallback=function(t,e){return wt.current.useCallback(t,e)};ie.useContext=function(t){return wt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return wt.current.useEffect(t,e)};ie.useId=function(){return wt.current.useId()};ie.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return wt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};ie.useRef=function(t){return wt.current.useRef(t)};ie.useState=function(t){return wt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return wt.current.useTransition()};ie.version="18.3.1";Vv.exports=ie;var N=Vv.exports;const pT=Xk(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT=N,gT=Symbol.for("react.element"),yT=Symbol.for("react.fragment"),vT=Object.prototype.hasOwnProperty,_T=mT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function qv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vT.call(e,r)&&!wT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gT,type:t,key:i,ref:o,props:s,_owner:_T.current}}iu.Fragment=yT;iu.jsx=qv;iu.jsxs=qv;Lv.exports=iu;var d=Lv.exports,Gv={exports:{}},$t={},Kv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,Y){var te=V.length;V.push(Y);e:for(;0<te;){var fe=te-1>>>1,xe=V[fe];if(0<s(xe,Y))V[fe]=Y,V[te]=xe,te=fe;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var Y=V[0],te=V.pop();if(te!==Y){V[0]=te;e:for(var fe=0,xe=V.length,Se=xe>>>1;fe<Se;){var ge=2*(fe+1)-1,Wt=V[ge],Et=ge+1,pe=V[Et];if(0>s(Wt,te))Et<xe&&0>s(pe,Wt)?(V[fe]=pe,V[Et]=te,fe=Et):(V[fe]=Wt,V[ge]=te,fe=ge);else if(Et<xe&&0>s(pe,te))V[fe]=pe,V[Et]=te,fe=Et;else break e}}return Y}function s(V,Y){var te=V.sortIndex-Y.sortIndex;return te!==0?te:V.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,p=null,g=3,_=!1,k=!1,I=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=V)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function j(V){if(I=!1,E(V),!k)if(n(c)!==null)k=!0,pt(L);else{var Y=n(u);Y!==null&&Nt(j,Y.startTime-V)}}function L(V,Y){k=!1,I&&(I=!1,w(v),v=-1),_=!0;var te=g;try{for(E(Y),p=n(c);p!==null&&(!(p.expirationTime>Y)||V&&!R());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,g=p.priorityLevel;var xe=fe(p.expirationTime<=Y);Y=t.unstable_now(),typeof xe=="function"?p.callback=xe:p===n(c)&&r(c),E(Y)}else r(c);p=n(c)}if(p!==null)var Se=!0;else{var ge=n(u);ge!==null&&Nt(j,ge.startTime-Y),Se=!1}return Se}finally{p=null,g=te,_=!1}}var U=!1,T=null,v=-1,b=5,C=-1;function R(){return!(t.unstable_now()-C<b)}function P(){if(T!==null){var V=t.unstable_now();C=V;var Y=!0;try{Y=T(!0,V)}finally{Y?S():(U=!1,T=null)}}else U=!1}var S;if(typeof y=="function")S=function(){y(P)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,st=we.port2;we.port1.onmessage=P,S=function(){st.postMessage(null)}}else S=function(){A(P,0)};function pt(V){T=V,U||(U=!0,S())}function Nt(V,Y){v=A(function(){V(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){k||_||(k=!0,pt(L))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var te=g;g=Y;try{return V()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,Y){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=g;g=V;try{return Y()}finally{g=te}},t.unstable_scheduleCallback=function(V,Y,te){var fe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?fe+te:fe):te=fe,V){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=te+xe,V={id:f++,callback:Y,priorityLevel:V,startTime:te,expirationTime:xe,sortIndex:-1},te>fe?(V.sortIndex=te,e(u,V),n(c)===null&&V===n(u)&&(I?(w(v),v=-1):I=!0,Nt(j,te-fe))):(V.sortIndex=xe,e(c,V),k||_||(k=!0,pt(L))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var Y=g;return function(){var te=g;g=Y;try{return V.apply(this,arguments)}finally{g=te}}}})(Qv);Kv.exports=Qv;var xT=Kv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET=N,zt=xT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yv=new Set,Yo={};function Cs(t,e){wi(t,e),wi(t+"Capture",e)}function wi(t,e){for(Yo[t]=e,t=0;t<e.length;t++)Yv.add(e[t])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,kT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},Dg={};function TT(t){return oh.call(Dg,t)?!0:oh.call(jg,t)?!1:kT.test(t)?Dg[t]=!0:(jg[t]=!0,!1)}function bT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IT(t,e,n,r){if(e===null||typeof e>"u"||bT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Of=/[\-:]([a-z])/g;function Lf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Of,Lf);rt[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Of,Lf);rt[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Of,Lf);rt[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vf(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IT(e,n,s,r)&&(n=null),r||s===null?TT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nr=ET.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Mf=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Xv=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),Uf=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),Zv=Symbol.for("react.offscreen"),Og=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,gd;function To(t){if(gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gd=e&&e[1]||""}return`
`+gd+t}var yd=!1;function vd(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function ST(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=vd(t.type,!1),t;case 11:return t=vd(t.type.render,!1),t;case 1:return t=vd(t.type,!0),t;default:return""}}function uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case ah:return"Profiler";case Mf:return"StrictMode";case lh:return"Suspense";case ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xv:return(t.displayName||"Context")+".Consumer";case Jv:return(t._context.displayName||"Context")+".Provider";case Ff:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uf:return e=t.displayName||null,e!==null?e:uh(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return uh(t(e))}catch{}}return null}function AT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uh(e);case 8:return e===Mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function e_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RT(t){var e=e_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hl(t){t._valueTracker||(t._valueTracker=RT(t))}function t_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=e_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dh(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function n_(t,e){e=e.checked,e!=null&&Vf(t,"checked",e,!1)}function hh(t,e){n_(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fh(t,e.type,n):e.hasOwnProperty("defaultValue")&&fh(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fh(t,e,n){(e!=="number"||lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function ci(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(bo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function r_(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function s_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?s_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,i_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CT=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(t){CT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Do[e]=Do[t]})});function o_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Do.hasOwnProperty(t)&&Do[t]?(""+e).trim():e+"px"}function a_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=o_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NT=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gh(t,e){if(e){if(NT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=null;function zf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _h=null,ui=null,di=null;function Ug(t){if(t=Aa(t)){if(typeof _h!="function")throw Error(z(280));var e=t.stateNode;e&&(e=uu(e),_h(t.stateNode,t.type,e))}}function l_(t){ui?di?di.push(t):di=[t]:ui=t}function c_(){if(ui){var t=ui,e=di;if(di=ui=null,Ug(t),e)for(t=0;t<e.length;t++)Ug(e[t])}}function u_(t,e){return t(e)}function d_(){}var _d=!1;function h_(t,e,n){if(_d)return t(e,n);_d=!0;try{return u_(t,e,n)}finally{_d=!1,(ui!==null||di!==null)&&(d_(),c_())}}function Xo(t,e){var n=t.stateNode;if(n===null)return null;var r=uu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var wh=!1;if(Gn)try{var po={};Object.defineProperty(po,"passive",{get:function(){wh=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{wh=!1}function PT(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Oo=!1,cc=null,uc=!1,xh=null,jT={onError:function(t){Oo=!0,cc=t}};function DT(t,e,n,r,s,i,o,l,c){Oo=!1,cc=null,PT.apply(jT,arguments)}function OT(t,e,n,r,s,i,o,l,c){if(DT.apply(this,arguments),Oo){if(Oo){var u=cc;Oo=!1,cc=null}else throw Error(z(198));uc||(uc=!0,xh=u)}}function Ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function f_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zg(t){if(Ns(t)!==t)throw Error(z(188))}function LT(t){var e=t.alternate;if(!e){if(e=Ns(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zg(s),t;if(i===r)return zg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function p_(t){return t=LT(t),t!==null?m_(t):null}function m_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=m_(t);if(e!==null)return e;t=t.sibling}return null}var g_=zt.unstable_scheduleCallback,$g=zt.unstable_cancelCallback,VT=zt.unstable_shouldYield,MT=zt.unstable_requestPaint,Ve=zt.unstable_now,FT=zt.unstable_getCurrentPriorityLevel,$f=zt.unstable_ImmediatePriority,y_=zt.unstable_UserBlockingPriority,dc=zt.unstable_NormalPriority,UT=zt.unstable_LowPriority,v_=zt.unstable_IdlePriority,ou=null,En=null;function zT(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(ou,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:HT,$T=Math.log,BT=Math.LN2;function HT(t){return t>>>=0,t===0?32:31-($T(t)/BT|0)|0}var pl=64,ml=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Io(l):(i&=o,i!==0&&(r=Io(i)))}else o=n&~s,o!==0?r=Io(o):i!==0&&(r=Io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function WT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-an(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=WT(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function __(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function GT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function w_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x_,Hf,E_,k_,T_,kh=!1,gl=[],Tr=null,br=null,Ir=null,Zo=new Map,ea=new Map,mr=[],KT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bg(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(e.pointerId)}}function mo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Aa(e),e!==null&&Hf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QT(t,e,n,r,s){switch(e){case"focusin":return Tr=mo(Tr,t,e,n,r,s),!0;case"dragenter":return br=mo(br,t,e,n,r,s),!0;case"mouseover":return Ir=mo(Ir,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zo.set(i,mo(Zo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ea.set(i,mo(ea.get(i)||null,t,e,n,r,s)),!0}return!1}function b_(t){var e=fs(t.target);if(e!==null){var n=Ns(e);if(n!==null){if(e=n.tag,e===13){if(e=f_(n),e!==null){t.blockedOn=e,T_(t.priority,function(){E_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ul(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Th(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vh=r,n.target.dispatchEvent(r),vh=null}else return e=Aa(n),e!==null&&Hf(e),t.blockedOn=n,!1;e.shift()}return!0}function Hg(t,e,n){Ul(t)&&n.delete(e)}function YT(){kh=!1,Tr!==null&&Ul(Tr)&&(Tr=null),br!==null&&Ul(br)&&(br=null),Ir!==null&&Ul(Ir)&&(Ir=null),Zo.forEach(Hg),ea.forEach(Hg)}function go(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,YT)))}function ta(t){function e(s){return go(s,t)}if(0<gl.length){go(gl[0],t);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tr!==null&&go(Tr,t),br!==null&&go(br,t),Ir!==null&&go(Ir,t),Zo.forEach(e),ea.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)b_(n),n.blockedOn===null&&mr.shift()}var hi=nr.ReactCurrentBatchConfig,fc=!0;function JT(t,e,n,r){var s=he,i=hi.transition;hi.transition=null;try{he=1,Wf(t,e,n,r)}finally{he=s,hi.transition=i}}function XT(t,e,n,r){var s=he,i=hi.transition;hi.transition=null;try{he=4,Wf(t,e,n,r)}finally{he=s,hi.transition=i}}function Wf(t,e,n,r){if(fc){var s=Th(t,e,n,r);if(s===null)Cd(t,e,r,pc,n),Bg(t,r);else if(QT(s,t,e,n,r))r.stopPropagation();else if(Bg(t,r),e&4&&-1<KT.indexOf(t)){for(;s!==null;){var i=Aa(s);if(i!==null&&x_(i),i=Th(t,e,n,r),i===null&&Cd(t,e,r,pc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Cd(t,e,r,null,n)}}var pc=null;function Th(t,e,n,r){if(pc=null,t=zf(r),t=fs(t),t!==null)if(e=Ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=f_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pc=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FT()){case $f:return 1;case y_:return 4;case dc:case UT:return 16;case v_:return 536870912;default:return 16}default:return 16}}var xr=null,qf=null,zl=null;function S_(){if(zl)return zl;var t,e=qf,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zl=s.slice(t,1<r?1-r:void 0)}function $l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function Wg(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yl:Wg,this.isPropagationStopped=Wg,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=Bt(Vi),Sa=Ne({},Vi,{view:0,detail:0}),ZT=Bt(Sa),xd,Ed,yo,au=Ne({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yo&&(yo&&t.type==="mousemove"?(xd=t.screenX-yo.screenX,Ed=t.screenY-yo.screenY):Ed=xd=0,yo=t),xd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),qg=Bt(au),eb=Ne({},au,{dataTransfer:0}),tb=Bt(eb),nb=Ne({},Sa,{relatedTarget:0}),kd=Bt(nb),rb=Ne({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),sb=Bt(rb),ib=Ne({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ob=Bt(ib),ab=Ne({},Vi,{data:0}),Gg=Bt(ab),lb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ub={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function db(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ub[t])?!!e[t]:!1}function Kf(){return db}var hb=Ne({},Sa,{key:function(t){if(t.key){var e=lb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kf,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fb=Bt(hb),pb=Ne({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kg=Bt(pb),mb=Ne({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kf}),gb=Bt(mb),yb=Ne({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vb=Bt(yb),_b=Ne({},au,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wb=Bt(_b),xb=[9,13,27,32],Qf=Gn&&"CompositionEvent"in window,Lo=null;Gn&&"documentMode"in document&&(Lo=document.documentMode);var Eb=Gn&&"TextEvent"in window&&!Lo,A_=Gn&&(!Qf||Lo&&8<Lo&&11>=Lo),Qg=" ",Yg=!1;function R_(t,e){switch(t){case"keyup":return xb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function kb(t,e){switch(t){case"compositionend":return C_(e);case"keypress":return e.which!==32?null:(Yg=!0,Qg);case"textInput":return t=e.data,t===Qg&&Yg?null:t;default:return null}}function Tb(t,e){if(Js)return t==="compositionend"||!Qf&&R_(t,e)?(t=S_(),zl=qf=xr=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A_&&e.locale!=="ko"?null:e.data;default:return null}}var bb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bb[t.type]:e==="textarea"}function N_(t,e,n,r){l_(r),e=mc(e,"onChange"),0<e.length&&(n=new Gf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vo=null,na=null;function Ib(t){$_(t,0)}function lu(t){var e=ei(t);if(t_(e))return t}function Sb(t,e){if(t==="change")return e}var P_=!1;if(Gn){var Td;if(Gn){var bd="oninput"in document;if(!bd){var Xg=document.createElement("div");Xg.setAttribute("oninput","return;"),bd=typeof Xg.oninput=="function"}Td=bd}else Td=!1;P_=Td&&(!document.documentMode||9<document.documentMode)}function Zg(){Vo&&(Vo.detachEvent("onpropertychange",j_),na=Vo=null)}function j_(t){if(t.propertyName==="value"&&lu(na)){var e=[];N_(e,na,t,zf(t)),h_(Ib,e)}}function Ab(t,e,n){t==="focusin"?(Zg(),Vo=e,na=n,Vo.attachEvent("onpropertychange",j_)):t==="focusout"&&Zg()}function Rb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lu(na)}function Cb(t,e){if(t==="click")return lu(e)}function Nb(t,e){if(t==="input"||t==="change")return lu(e)}function Pb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:Pb;function ra(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oh.call(e,s)||!un(t[s],e[s]))return!1}return!0}function ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ty(t,e){var n=ey(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ey(n)}}function D_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O_(){for(var t=window,e=lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lc(t.document)}return e}function Yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jb(t){var e=O_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D_(n.ownerDocument.documentElement,n)){if(r!==null&&Yf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ty(n,i);var o=ty(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Db=Gn&&"documentMode"in document&&11>=document.documentMode,Xs=null,bh=null,Mo=null,Ih=!1;function ny(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ih||Xs==null||Xs!==lc(r)||(r=Xs,"selectionStart"in r&&Yf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&ra(Mo,r)||(Mo=r,r=mc(bh,"onSelect"),0<r.length&&(e=new Gf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xs)))}function vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},Id={},L_={};Gn&&(L_=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function cu(t){if(Id[t])return Id[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in L_)return Id[t]=e[n];return t}var V_=cu("animationend"),M_=cu("animationiteration"),F_=cu("animationstart"),U_=cu("transitionend"),z_=new Map,ry="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){z_.set(t,e),Cs(e,[t])}for(var Sd=0;Sd<ry.length;Sd++){var Ad=ry[Sd],Ob=Ad.toLowerCase(),Lb=Ad[0].toUpperCase()+Ad.slice(1);Gr(Ob,"on"+Lb)}Gr(V_,"onAnimationEnd");Gr(M_,"onAnimationIteration");Gr(F_,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(U_,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vb=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function sy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OT(r,e,void 0,t),t.currentTarget=null}function $_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;sy(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;sy(s,l,u),i=c}}}if(uc)throw t=xh,uc=!1,xh=null,t}function ke(t,e){var n=e[Nh];n===void 0&&(n=e[Nh]=new Set);var r=t+"__bubble";n.has(r)||(B_(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),B_(n,t,r,e)}var _l="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[_l]){t[_l]=!0,Yv.forEach(function(n){n!=="selectionchange"&&(Vb.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_l]||(e[_l]=!0,Rd("selectionchange",!1,e))}}function B_(t,e,n,r){switch(I_(e)){case 1:var s=JT;break;case 4:s=XT;break;default:s=Wf}n=s.bind(null,e,n,t),s=void 0,!wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Cd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=fs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}h_(function(){var u=i,f=zf(n),p=[];e:{var g=z_.get(t);if(g!==void 0){var _=Gf,k=t;switch(t){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":_=fb;break;case"focusin":k="focus",_=kd;break;case"focusout":k="blur",_=kd;break;case"beforeblur":case"afterblur":_=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=tb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=gb;break;case V_:case M_:case F_:_=sb;break;case U_:_=vb;break;case"scroll":_=ZT;break;case"wheel":_=wb;break;case"copy":case"cut":case"paste":_=ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Kg}var I=(e&4)!==0,A=!I&&t==="scroll",w=I?g!==null?g+"Capture":null:g;I=[];for(var y=u,E;y!==null;){E=y;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,w!==null&&(j=Xo(y,w),j!=null&&I.push(ia(y,j,E)))),A)break;y=y.return}0<I.length&&(g=new _(g,k,null,n,f),p.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==vh&&(k=n.relatedTarget||n.fromElement)&&(fs(k)||k[Kn]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(k=n.relatedTarget||n.toElement,_=u,k=k?fs(k):null,k!==null&&(A=Ns(k),k!==A||k.tag!==5&&k.tag!==6)&&(k=null)):(_=null,k=u),_!==k)){if(I=qg,j="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=Kg,j="onPointerLeave",w="onPointerEnter",y="pointer"),A=_==null?g:ei(_),E=k==null?g:ei(k),g=new I(j,y+"leave",_,n,f),g.target=A,g.relatedTarget=E,j=null,fs(f)===u&&(I=new I(w,y+"enter",k,n,f),I.target=E,I.relatedTarget=A,j=I),A=j,_&&k)t:{for(I=_,w=k,y=0,E=I;E;E=Bs(E))y++;for(E=0,j=w;j;j=Bs(j))E++;for(;0<y-E;)I=Bs(I),y--;for(;0<E-y;)w=Bs(w),E--;for(;y--;){if(I===w||w!==null&&I===w.alternate)break t;I=Bs(I),w=Bs(w)}I=null}else I=null;_!==null&&iy(p,g,_,I,!1),k!==null&&A!==null&&iy(p,A,k,I,!0)}}e:{if(g=u?ei(u):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var L=Sb;else if(Jg(g))if(P_)L=Nb;else{L=Rb;var U=Ab}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=Cb);if(L&&(L=L(t,u))){N_(p,L,n,f);break e}U&&U(t,g,u),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&fh(g,"number",g.value)}switch(U=u?ei(u):window,t){case"focusin":(Jg(U)||U.contentEditable==="true")&&(Xs=U,bh=u,Mo=null);break;case"focusout":Mo=bh=Xs=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,ny(p,n,f);break;case"selectionchange":if(Db)break;case"keydown":case"keyup":ny(p,n,f)}var T;if(Qf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Js?R_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(A_&&n.locale!=="ko"&&(Js||v!=="onCompositionStart"?v==="onCompositionEnd"&&Js&&(T=S_()):(xr=f,qf="value"in xr?xr.value:xr.textContent,Js=!0)),U=mc(u,v),0<U.length&&(v=new Gg(v,t,null,n,f),p.push({event:v,listeners:U}),T?v.data=T:(T=C_(n),T!==null&&(v.data=T)))),(T=Eb?kb(t,n):Tb(t,n))&&(u=mc(u,"onBeforeInput"),0<u.length&&(f=new Gg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=T))}$_(p,e)})}function ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xo(t,n),i!=null&&r.unshift(ia(t,i,s)),i=Xo(t,e),i!=null&&r.push(ia(t,i,s))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Xo(n,i),c!=null&&o.unshift(ia(n,c,l))):s||(c=Xo(n,i),c!=null&&o.push(ia(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Mb=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function oy(t){return(typeof t=="string"?t:""+t).replace(Mb,`
`).replace(Fb,"")}function wl(t,e,n){if(e=oy(e),oy(t)!==e&&n)throw Error(z(425))}function gc(){}var Sh=null,Ah=null;function Rh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,Ub=typeof clearTimeout=="function"?clearTimeout:void 0,ay=typeof Promise=="function"?Promise:void 0,zb=typeof queueMicrotask=="function"?queueMicrotask:typeof ay<"u"?function(t){return ay.resolve(null).then(t).catch($b)}:Ch;function $b(t){setTimeout(function(){throw t})}function Nd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ta(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ly(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),wn="__reactFiber$"+Mi,oa="__reactProps$"+Mi,Kn="__reactContainer$"+Mi,Nh="__reactEvents$"+Mi,Bb="__reactListeners$"+Mi,Hb="__reactHandles$"+Mi;function fs(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ly(t);t!==null;){if(n=t[wn])return n;t=ly(t)}return e}t=n,n=t.parentNode}return null}function Aa(t){return t=t[wn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function uu(t){return t[oa]||null}var Ph=[],ti=-1;function Kr(t){return{current:t}}function Te(t){0>ti||(t.current=Ph[ti],Ph[ti]=null,ti--)}function _e(t,e){ti++,Ph[ti]=t.current,t.current=e}var Mr={},ht=Kr(Mr),St=Kr(!1),_s=Mr;function xi(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function yc(){Te(St),Te(ht)}function cy(t,e,n){if(ht.current!==Mr)throw Error(z(168));_e(ht,e),_e(St,n)}function H_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,AT(t)||"Unknown",s));return Ne({},n,r)}function vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,_s=ht.current,_e(ht,t),_e(St,St.current),!0}function uy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=H_(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,Te(St),Te(ht),_e(ht,t)):Te(St),_e(St,n)}var Vn=null,du=!1,Pd=!1;function W_(t){Vn===null?Vn=[t]:Vn.push(t)}function Wb(t){du=!0,W_(t)}function Qr(){if(!Pd&&Vn!==null){Pd=!0;var t=0,e=he;try{var n=Vn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vn=null,du=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),g_($f,Qr),s}finally{he=e,Pd=!1}}return null}var ni=[],ri=0,_c=null,wc=0,qt=[],Gt=0,ws=null,Mn=1,Fn="";function us(t,e){ni[ri++]=wc,ni[ri++]=_c,_c=t,wc=e}function q_(t,e,n){qt[Gt++]=Mn,qt[Gt++]=Fn,qt[Gt++]=ws,ws=t;var r=Mn;t=Fn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-an(e)+s|n<<s|r,Fn=i+t}else Mn=1<<i|n<<s|r,Fn=t}function Jf(t){t.return!==null&&(us(t,1),q_(t,1,0))}function Xf(t){for(;t===_c;)_c=ni[--ri],ni[ri]=null,wc=ni[--ri],ni[ri]=null;for(;t===ws;)ws=qt[--Gt],qt[Gt]=null,Fn=qt[--Gt],qt[Gt]=null,Mn=qt[--Gt],qt[Gt]=null}var Ut=null,Mt=null,be=!1,rn=null;function G_(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Mt=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Mn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Mt=null,!0):!1;default:return!1}}function jh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dh(t){if(be){var e=Mt;if(e){var n=e;if(!dy(t,e)){if(jh(t))throw Error(z(418));e=Sr(n.nextSibling);var r=Ut;e&&dy(t,e)?G_(r,n):(t.flags=t.flags&-4097|2,be=!1,Ut=t)}}else{if(jh(t))throw Error(z(418));t.flags=t.flags&-4097|2,be=!1,Ut=t}}}function hy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function xl(t){if(t!==Ut)return!1;if(!be)return hy(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rh(t.type,t.memoizedProps)),e&&(e=Mt)){if(jh(t))throw K_(),Error(z(418));for(;e;)G_(t,e),e=Sr(e.nextSibling)}if(hy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ut?Sr(t.stateNode.nextSibling):null;return!0}function K_(){for(var t=Mt;t;)t=Sr(t.nextSibling)}function Ei(){Mt=Ut=null,be=!1}function Zf(t){rn===null?rn=[t]:rn.push(t)}var qb=nr.ReactCurrentBatchConfig;function vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function El(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fy(t){var e=t._init;return e(t._payload)}function Q_(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Nr(w,y),w.index=0,w.sibling=null,w}function i(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,y,E,j){return y===null||y.tag!==6?(y=Fd(E,w.mode,j),y.return=w,y):(y=s(y,E),y.return=w,y)}function c(w,y,E,j){var L=E.type;return L===Ys?f(w,y,E.props.children,j,E.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===fr&&fy(L)===y.type)?(j=s(y,E.props),j.ref=vo(w,y,E),j.return=w,j):(j=Ql(E.type,E.key,E.props,null,w.mode,j),j.ref=vo(w,y,E),j.return=w,j)}function u(w,y,E,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Ud(E,w.mode,j),y.return=w,y):(y=s(y,E.children||[]),y.return=w,y)}function f(w,y,E,j,L){return y===null||y.tag!==7?(y=vs(E,w.mode,j,L),y.return=w,y):(y=s(y,E),y.return=w,y)}function p(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fd(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case dl:return E=Ql(y.type,y.key,y.props,null,w.mode,E),E.ref=vo(w,null,y),E.return=w,E;case Qs:return y=Ud(y,w.mode,E),y.return=w,y;case fr:var j=y._init;return p(w,j(y._payload),E)}if(bo(y)||fo(y))return y=vs(y,w.mode,E,null),y.return=w,y;El(w,y)}return null}function g(w,y,E,j){var L=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:l(w,y,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:return E.key===L?c(w,y,E,j):null;case Qs:return E.key===L?u(w,y,E,j):null;case fr:return L=E._init,g(w,y,L(E._payload),j)}if(bo(E)||fo(E))return L!==null?null:f(w,y,E,j,null);El(w,E)}return null}function _(w,y,E,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(E)||null,l(y,w,""+j,L);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case dl:return w=w.get(j.key===null?E:j.key)||null,c(y,w,j,L);case Qs:return w=w.get(j.key===null?E:j.key)||null,u(y,w,j,L);case fr:var U=j._init;return _(w,y,E,U(j._payload),L)}if(bo(j)||fo(j))return w=w.get(E)||null,f(y,w,j,L,null);El(y,j)}return null}function k(w,y,E,j){for(var L=null,U=null,T=y,v=y=0,b=null;T!==null&&v<E.length;v++){T.index>v?(b=T,T=null):b=T.sibling;var C=g(w,T,E[v],j);if(C===null){T===null&&(T=b);break}t&&T&&C.alternate===null&&e(w,T),y=i(C,y,v),U===null?L=C:U.sibling=C,U=C,T=b}if(v===E.length)return n(w,T),be&&us(w,v),L;if(T===null){for(;v<E.length;v++)T=p(w,E[v],j),T!==null&&(y=i(T,y,v),U===null?L=T:U.sibling=T,U=T);return be&&us(w,v),L}for(T=r(w,T);v<E.length;v++)b=_(T,w,v,E[v],j),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?v:b.key),y=i(b,y,v),U===null?L=b:U.sibling=b,U=b);return t&&T.forEach(function(R){return e(w,R)}),be&&us(w,v),L}function I(w,y,E,j){var L=fo(E);if(typeof L!="function")throw Error(z(150));if(E=L.call(E),E==null)throw Error(z(151));for(var U=L=null,T=y,v=y=0,b=null,C=E.next();T!==null&&!C.done;v++,C=E.next()){T.index>v?(b=T,T=null):b=T.sibling;var R=g(w,T,C.value,j);if(R===null){T===null&&(T=b);break}t&&T&&R.alternate===null&&e(w,T),y=i(R,y,v),U===null?L=R:U.sibling=R,U=R,T=b}if(C.done)return n(w,T),be&&us(w,v),L;if(T===null){for(;!C.done;v++,C=E.next())C=p(w,C.value,j),C!==null&&(y=i(C,y,v),U===null?L=C:U.sibling=C,U=C);return be&&us(w,v),L}for(T=r(w,T);!C.done;v++,C=E.next())C=_(T,w,v,C.value,j),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?v:C.key),y=i(C,y,v),U===null?L=C:U.sibling=C,U=C);return t&&T.forEach(function(P){return e(w,P)}),be&&us(w,v),L}function A(w,y,E,j){if(typeof E=="object"&&E!==null&&E.type===Ys&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:e:{for(var L=E.key,U=y;U!==null;){if(U.key===L){if(L=E.type,L===Ys){if(U.tag===7){n(w,U.sibling),y=s(U,E.props.children),y.return=w,w=y;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===fr&&fy(L)===U.type){n(w,U.sibling),y=s(U,E.props),y.ref=vo(w,U,E),y.return=w,w=y;break e}n(w,U);break}else e(w,U);U=U.sibling}E.type===Ys?(y=vs(E.props.children,w.mode,j,E.key),y.return=w,w=y):(j=Ql(E.type,E.key,E.props,null,w.mode,j),j.ref=vo(w,y,E),j.return=w,w=j)}return o(w);case Qs:e:{for(U=E.key;y!==null;){if(y.key===U)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=s(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Ud(E,w.mode,j),y.return=w,w=y}return o(w);case fr:return U=E._init,A(w,y,U(E._payload),j)}if(bo(E))return k(w,y,E,j);if(fo(E))return I(w,y,E,j);El(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,E),y.return=w,w=y):(n(w,y),y=Fd(E,w.mode,j),y.return=w,w=y),o(w)):n(w,y)}return A}var ki=Q_(!0),Y_=Q_(!1),xc=Kr(null),Ec=null,si=null,ep=null;function tp(){ep=si=Ec=null}function np(t){var e=xc.current;Te(xc),t._currentValue=e}function Oh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){Ec=t,ep=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(ep!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(Ec===null)throw Error(z(308));si=t,Ec.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var ps=null;function rp(t){ps===null?ps=[t]:ps.push(t)}function J_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,rp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function Bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}function py(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kc(t,e,n,r){var s=t.updateQueue;pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,f=u=c=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,I=l;switch(g=e,_=n,I.tag){case 1:if(k=I.payload,typeof k=="function"){p=k.call(_,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=I.payload,g=typeof k=="function"?k.call(_,p,g):k,g==null)break e;p=Ne({},p,g);break e;case 2:pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=_,c=p):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Es|=o,t.lanes=o,t.memoizedState=p}}function my(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Ra={},kn=Kr(Ra),aa=Kr(Ra),la=Kr(Ra);function ms(t){if(t===Ra)throw Error(z(174));return t}function ip(t,e){switch(_e(la,e),_e(aa,t),_e(kn,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mh(e,t)}Te(kn),_e(kn,e)}function Ti(){Te(kn),Te(aa),Te(la)}function Z_(t){ms(la.current);var e=ms(kn.current),n=mh(e,t.type);e!==n&&(_e(aa,t),_e(kn,n))}function op(t){aa.current===t&&(Te(kn),Te(aa))}var Ae=Kr(0);function Tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function ap(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var Hl=nr.ReactCurrentDispatcher,Dd=nr.ReactCurrentBatchConfig,xs=0,Ce=null,We=null,Ye=null,bc=!1,Fo=!1,ca=0,Gb=0;function ot(){throw Error(z(321))}function lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function cp(t,e,n,r,s,i){if(xs=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hl.current=t===null||t.memoizedState===null?Jb:Xb,t=n(r,s),Fo){i=0;do{if(Fo=!1,ca=0,25<=i)throw Error(z(301));i+=1,Ye=We=null,e.updateQueue=null,Hl.current=Zb,t=n(r,s)}while(Fo)}if(Hl.current=Ic,e=We!==null&&We.next!==null,xs=0,Ye=We=Ce=null,bc=!1,e)throw Error(z(300));return t}function up(){var t=ca!==0;return ca=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ce.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Zt(){if(We===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ye===null?Ce.memoizedState:Ye.next;if(e!==null)Ye=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ye===null?Ce.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function ua(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=Zt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((xs&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Ce.lanes|=f,Es|=f}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,un(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,Es|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=Zt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);un(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ew(){}function tw(t,e){var n=Ce,r=Zt(),s=e(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,dp(sw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,da(9,rw.bind(null,n,r,s,e),void 0,null),Xe===null)throw Error(z(349));xs&30||nw(n,e,s)}return s}function nw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rw(t,e,n,r){e.value=n,e.getSnapshot=r,iw(e)&&ow(t)}function sw(t,e,n){return n(function(){iw(e)&&ow(t)})}function iw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function ow(t){var e=Qn(t,1);e!==null&&ln(e,t,1,-1)}function gy(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:t},e.queue=t,t=t.dispatch=Yb.bind(null,Ce,t),[e.memoizedState,t]}function da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aw(){return Zt().memoizedState}function Wl(t,e,n,r){var s=vn();Ce.flags|=t,s.memoizedState=da(1|e,n,void 0,r===void 0?null:r)}function hu(t,e,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&lp(r,o.deps)){s.memoizedState=da(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=da(1|e,n,i,r)}function yy(t,e){return Wl(8390656,8,t,e)}function dp(t,e){return hu(2048,8,t,e)}function lw(t,e){return hu(4,2,t,e)}function cw(t,e){return hu(4,4,t,e)}function uw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dw(t,e,n){return n=n!=null?n.concat([t]):null,hu(4,4,uw.bind(null,e,t),n)}function hp(){}function hw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fw(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pw(t,e,n){return xs&21?(un(n,e)||(n=__(),Ce.lanes|=n,Es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function Kb(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Dd.transition;Dd.transition={};try{t(!1),e()}finally{he=n,Dd.transition=r}}function mw(){return Zt().memoizedState}function Qb(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gw(t))yw(e,n);else if(n=J_(t,e,n,r),n!==null){var s=vt();ln(n,t,r,s),vw(n,e,r)}}function Yb(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gw(t))yw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,un(l,o)){var c=e.interleaved;c===null?(s.next=s,rp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=J_(t,e,s,r),n!==null&&(s=vt(),ln(n,t,r,s),vw(n,e,r))}}function gw(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function yw(t,e){Fo=bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bf(t,n)}}var Ic={readContext:Xt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Jb={readContext:Xt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:yy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wl(4194308,4,uw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qb.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:gy,useDebugValue:hp,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=gy(!1),e=t[0];return t=Kb.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=vn();if(be){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Xe===null)throw Error(z(349));xs&30||nw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yy(sw.bind(null,r,i,t),[t]),r.flags|=2048,da(9,rw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=Xe.identifierPrefix;if(be){var n=Fn,r=Mn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xb={readContext:Xt,useCallback:hw,useContext:Xt,useEffect:dp,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:fw,useReducer:Od,useRef:aw,useState:function(){return Od(ua)},useDebugValue:hp,useDeferredValue:function(t){var e=Zt();return pw(e,We.memoizedState,t)},useTransition:function(){var t=Od(ua)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:ew,useSyncExternalStore:tw,useId:mw,unstable_isNewReconciler:!1},Zb={readContext:Xt,useCallback:hw,useContext:Xt,useEffect:dp,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:fw,useReducer:Ld,useRef:aw,useState:function(){return Ld(ua)},useDebugValue:hp,useDeferredValue:function(t){var e=Zt();return We===null?e.memoizedState=t:pw(e,We.memoizedState,t)},useTransition:function(){var t=Ld(ua)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:ew,useSyncExternalStore:tw,useId:mw,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fu={isMounted:function(t){return(t=t._reactInternals)?Ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Cr(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(ln(e,t,s,r),Bl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Cr(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(ln(e,t,s,r),Bl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Cr(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,r),e!==null&&(ln(e,t,r,n),Bl(e,t,r))}};function vy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ra(n,r)||!ra(s,i):!0}function _w(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=At(e)?_s:ht.current,r=e.contextTypes,i=(r=r!=null)?xi(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _y(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fu.enqueueReplaceState(e,e.state,null)}function Vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=At(e)?_s:ht.current,s.context=xi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fu.enqueueReplaceState(s,s.state,null),kc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bi(t,e){try{var n="",r=e;do n+=ST(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eI=typeof WeakMap=="function"?WeakMap:Map;function ww(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ac||(Ac=!0,Kh=r),Mh(t,e)},n}function xw(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mh(t,e),typeof r!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pI.bind(null,t,e,n),e.then(t,t))}function xy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ey(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var tI=nr.ReactCurrentOwner,It=!1;function yt(t,e,n,r){e.child=t===null?Y_(e,null,n,r):ki(e,t.child,n,r)}function ky(t,e,n,r,s){n=n.render;var i=e.ref;return fi(e,s),r=cp(t,e,n,r,i,s),n=up(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(be&&n&&Jf(e),e.flags|=1,yt(t,e,r,s),e.child)}function Ty(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ew(t,e,i,r,s)):(t=Ql(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ra,n(o,r)&&t.ref===e.ref)return Yn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ew(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ra(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Yn(t,e,s)}return Fh(t,e,n,r,s)}function kw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(oi,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(oi,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(oi,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(oi,Dt),Dt|=r;return yt(t,e,s,n),e.child}function Tw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fh(t,e,n,r,s){var i=At(n)?_s:ht.current;return i=xi(e,i),fi(e,s),n=cp(t,e,n,r,i,s),r=up(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yn(t,e,s)):(be&&r&&Jf(e),e.flags|=1,yt(t,e,n,s),e.child)}function by(t,e,n,r,s){if(At(n)){var i=!0;vc(e)}else i=!1;if(fi(e,s),e.stateNode===null)ql(t,e),_w(e,n,r),Vh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xt(u):(u=At(n)?_s:ht.current,u=xi(e,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&_y(e,o,r,u),pr=!1;var g=e.memoizedState;o.state=g,kc(e,r,o,s),c=e.memoizedState,l!==r||g!==c||St.current||pr?(typeof f=="function"&&(Lh(e,n,f,r),c=e.memoizedState),(l=pr||vy(e,n,l,r,g,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,X_(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:tn(e.type,l),o.props=u,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=At(n)?_s:ht.current,c=xi(e,c));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&_y(e,o,r,c),pr=!1,g=e.memoizedState,o.state=g,kc(e,r,o,s);var k=e.memoizedState;l!==p||g!==k||St.current||pr?(typeof _=="function"&&(Lh(e,n,_,r),k=e.memoizedState),(u=pr||vy(e,n,u,r,g,k,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Uh(t,e,n,r,i,s)}function Uh(t,e,n,r,s,i){Tw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&uy(e,n,!1),Yn(t,e,i);r=e.stateNode,tI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ki(e,t.child,null,i),e.child=ki(e,null,l,i)):yt(t,e,l,i),e.memoizedState=r.state,s&&uy(e,n,!0),e.child}function bw(t){var e=t.stateNode;e.pendingContext?cy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cy(t,e.context,!1),ip(t,e.containerInfo)}function Iy(t,e,n,r,s){return Ei(),Zf(s),e.flags|=256,yt(t,e,n,r),e.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function $h(t){return{baseLanes:t,cachePool:null,transitions:null}}function Iw(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return Dh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gu(o,r,0,null),t=vs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$h(n),e.memoizedState=zh,t):fp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return nI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Nr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Nr(l,i):(i=vs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?$h(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fp(t,e){return e=gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kl(t,e,n,r){return r!==null&&Zf(r),ki(e,t.child,null,n),t=fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(z(422))),kl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gu({mode:"visible",children:r.children},s,0,null),i=vs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ki(e,t.child,null,o),e.child.memoizedState=$h(o),e.memoizedState=zh,i);if(!(e.mode&1))return kl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Vd(i,r,void 0),kl(t,e,o,r)}if(l=(o&t.childLanes)!==0,It||l){if(r=Xe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),ln(r,t,s,-1))}return _p(),r=Vd(Error(z(421))),kl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mt=Sr(s.nextSibling),Ut=e,be=!0,rn=null,t!==null&&(qt[Gt++]=Mn,qt[Gt++]=Fn,qt[Gt++]=ws,Mn=t.id,Fn=t.overflow,ws=e),e=fp(e,r.children),e.flags|=4096,e)}function Sy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oh(t.return,e,n)}function Md(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sy(t,n,e);else if(t.tag===19)Sy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Tc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Md(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Tc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Md(e,!0,n,null,i);break;case"together":Md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rI(t,e,n){switch(e.tag){case 3:bw(e),Ei();break;case 5:Z_(e);break;case 1:At(e.type)&&vc(e);break;case 4:ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(xc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?Iw(t,e,n):(_e(Ae,Ae.current&1),t=Yn(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,kw(t,e,n)}return Yn(t,e,n)}var Aw,Bh,Rw,Cw;Aw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bh=function(){};Rw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ms(kn.current);var i=null;switch(n){case"input":s=dh(t,s),r=dh(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=ph(t,s),r=ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gc)}gh(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ke("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Cw=function(t,e,n,r){n!==r&&(e.flags|=4)};function _o(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sI(t,e,n){var r=e.pendingProps;switch(Xf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return At(e.type)&&yc(),at(e),null;case 3:return r=e.stateNode,Ti(),Te(St),Te(ht),ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(Jh(rn),rn=null))),Bh(t,e),at(e),null;case 5:op(e);var s=ms(la.current);if(n=e.type,t!==null&&e.stateNode!=null)Rw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=ms(kn.current),xl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wn]=e,r[oa]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<So.length;s++)ke(So[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Lg(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Mg(r,i),ke("invalid",r)}gh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),s=["children",""+l]):Yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":hl(r),Vg(r,i,!0);break;case"textarea":hl(r),Fg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=s_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[oa]=r,Aw(t,e,!1,!1),e.stateNode=t;e:{switch(o=yh(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<So.length;s++)ke(So[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":Lg(t,r),s=dh(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Mg(t,r),s=ph(t,r),ke("invalid",t);break;default:s=r}gh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?a_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&i_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Jo(t,c):typeof c=="number"&&Jo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",t):c!=null&&Vf(t,i,c,o))}switch(n){case"input":hl(t),Vg(t,r,!1);break;case"textarea":hl(t),Fg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ci(t,!!r.multiple,i,!1):r.defaultValue!=null&&ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)Cw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ms(la.current),ms(kn.current),xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return at(e),null;case 13:if(Te(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Mt!==null&&e.mode&1&&!(e.flags&128))K_(),Ei(),e.flags|=98560,i=!1;else if(i=xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[wn]=e}else Ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else rn!==null&&(Jh(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?qe===0&&(qe=3):_p())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Ti(),Bh(t,e),t===null&&sa(e.stateNode.containerInfo),at(e),null;case 10:return np(e.type._context),at(e),null;case 17:return At(e.type)&&yc(),at(e),null;case 19:if(Te(Ae),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)_o(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tc(t),o!==null){for(e.flags|=128,_o(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Ii&&(e.flags|=128,r=!0,_o(i,!1),e.lanes=4194304)}else{if(!r)if(t=Tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return at(e),null}else 2*Ve()-i.renderingStartTime>Ii&&n!==1073741824&&(e.flags|=128,r=!0,_o(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return vp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function iI(t,e){switch(Xf(e),e.tag){case 1:return At(e.type)&&yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),Te(St),Te(ht),ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(Te(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ae),null;case 4:return Ti(),null;case 10:return np(e.type._context),null;case 22:case 23:return vp(),null;case 24:return null;default:return null}}var Tl=!1,ut=!1,oI=typeof WeakSet=="function"?WeakSet:Set,W=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Hh(t,e,n){try{n()}catch(r){De(t,e,r)}}var Ay=!1;function aI(t,e){if(Sh=fc,t=O_(),Yf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++u===s&&(l=o),g===i&&++f===r&&(c=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},fc=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,A=k.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:tn(e.type,I),A);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){De(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return k=Ay,Ay=!1,k}function Uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hh(e,n,i)}s=s.next}while(s!==r)}}function pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nw(t){var e=t.alternate;e!==null&&(t.alternate=null,Nw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[oa],delete e[Nh],delete e[Bb],delete e[Hb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pw(t){return t.tag===5||t.tag===3||t.tag===4}function Ry(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gc));else if(r!==4&&(t=t.child,t!==null))for(qh(t,e,n),t=t.sibling;t!==null;)qh(t,e,n),t=t.sibling}function Gh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gh(t,e,n),t=t.sibling;t!==null;)Gh(t,e,n),t=t.sibling}var et=null,nn=!1;function ur(t,e,n){for(n=n.child;n!==null;)jw(t,e,n),n=n.sibling}function jw(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(ou,n)}catch{}switch(n.tag){case 5:ut||ii(n,e);case 6:var r=et,s=nn;et=null,ur(t,e,n),et=r,nn=s,et!==null&&(nn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(nn?(t=et,n=n.stateNode,t.nodeType===8?Nd(t.parentNode,n):t.nodeType===1&&Nd(t,n),ta(t)):Nd(et,n.stateNode));break;case 4:r=et,s=nn,et=n.stateNode.containerInfo,nn=!0,ur(t,e,n),et=r,nn=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hh(n,e,o),s=s.next}while(s!==r)}ur(t,e,n);break;case 1:if(!ut&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,e,l)}ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,ur(t,e,n),ut=r):ur(t,e,n);break;default:ur(t,e,n)}}function Cy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oI),e.forEach(function(r){var s=gI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,nn=!1;break e;case 3:et=l.stateNode.containerInfo,nn=!0;break e;case 4:et=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(et===null)throw Error(z(160));jw(i,o,s),et=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dw(e,t),e=e.sibling}function Dw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),yn(t),r&4){try{Uo(3,t,t.return),pu(3,t)}catch(I){De(t,t.return,I)}try{Uo(5,t,t.return)}catch(I){De(t,t.return,I)}}break;case 1:en(e,t),yn(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(en(e,t),yn(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var s=t.stateNode;try{Jo(s,"")}catch(I){De(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&n_(s,i),yh(l,o);var u=yh(l,i);for(o=0;o<c.length;o+=2){var f=c[o],p=c[o+1];f==="style"?a_(s,p):f==="dangerouslySetInnerHTML"?i_(s,p):f==="children"?Jo(s,p):Vf(s,f,p,u)}switch(l){case"input":hh(s,i);break;case"textarea":r_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ci(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?ci(s,!!i.multiple,i.defaultValue,!0):ci(s,!!i.multiple,i.multiple?[]:"",!1))}s[oa]=i}catch(I){De(t,t.return,I)}}break;case 6:if(en(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){De(t,t.return,I)}}break;case 3:if(en(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(I){De(t,t.return,I)}break;case 4:en(e,t),yn(t);break;case 13:en(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gp=Ve())),r&4&&Cy(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(u=ut)||f,en(e,t),ut=u):en(e,t),yn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,_=g.child,g.tag){case 0:case 11:case 14:case 15:Uo(4,g,g.return);break;case 1:ii(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(I){De(r,n,I)}}break;case 5:ii(g,g.return);break;case 22:if(g.memoizedState!==null){Py(p);continue}}_!==null?(_.return=g,W=_):Py(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=o_("display",o))}catch(I){De(t,t.return,I)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(I){De(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:en(e,t),yn(t),r&4&&Cy(t);break;case 21:break;default:en(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Jo(s,""),r.flags&=-33);var i=Ry(t);Gh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ry(t);qh(t,l,o);break;default:throw Error(z(161))}}catch(c){De(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lI(t,e,n){W=t,Ow(t)}function Ow(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Tl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ut;l=Tl;var u=ut;if(Tl=o,(ut=c)&&!u)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?jy(s):c!==null?(c.return=o,W=c):jy(s);for(;i!==null;)W=i,Ow(i),i=i.sibling;W=s,Tl=l,ut=u}Ny(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Ny(t)}}function Ny(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&my(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}my(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ta(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&Wh(e)}catch(g){De(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Py(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function jy(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pu(4,e)}catch(c){De(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){De(e,s,c)}}var i=e.return;try{Wh(e)}catch(c){De(e,i,c)}break;case 5:var o=e.return;try{Wh(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var cI=Math.ceil,Sc=nr.ReactCurrentDispatcher,pp=nr.ReactCurrentOwner,Qt=nr.ReactCurrentBatchConfig,ue=0,Xe=null,Fe=null,nt=0,Dt=0,oi=Kr(0),qe=0,ha=null,Es=0,mu=0,mp=0,zo=null,Tt=null,gp=0,Ii=1/0,Ln=null,Ac=!1,Kh=null,Rr=null,bl=!1,Er=null,Rc=0,$o=0,Qh=null,Gl=-1,Kl=0;function vt(){return ue&6?Ve():Gl!==-1?Gl:Gl=Ve()}function Cr(t){return t.mode&1?ue&2&&nt!==0?nt&-nt:qb.transition!==null?(Kl===0&&(Kl=__()),Kl):(t=he,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function ln(t,e,n,r){if(50<$o)throw $o=0,Qh=null,Error(z(185));Ia(t,n,r),(!(ue&2)||t!==Xe)&&(t===Xe&&(!(ue&2)&&(mu|=n),qe===4&&gr(t,nt)),Rt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ii=Ve()+500,du&&Qr()))}function Rt(t,e){var n=t.callbackNode;qT(t,e);var r=hc(t,t===Xe?nt:0);if(r===0)n!==null&&$g(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$g(n),e===1)t.tag===0?Wb(Dy.bind(null,t)):W_(Dy.bind(null,t)),zb(function(){!(ue&6)&&Qr()}),n=null;else{switch(w_(r)){case 1:n=$f;break;case 4:n=y_;break;case 16:n=dc;break;case 536870912:n=v_;break;default:n=dc}n=Bw(n,Lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lw(t,e){if(Gl=-1,Kl=0,ue&6)throw Error(z(327));var n=t.callbackNode;if(pi()&&t.callbackNode!==n)return null;var r=hc(t,t===Xe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cc(t,r);else{e=r;var s=ue;ue|=2;var i=Mw();(Xe!==t||nt!==e)&&(Ln=null,Ii=Ve()+500,ys(t,e));do try{hI();break}catch(l){Vw(t,l)}while(!0);tp(),Sc.current=i,ue=s,Fe!==null?e=0:(Xe=null,nt=0,e=qe)}if(e!==0){if(e===2&&(s=Eh(t),s!==0&&(r=s,e=Yh(t,s))),e===1)throw n=ha,ys(t,0),gr(t,r),Rt(t,Ve()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!uI(s)&&(e=Cc(t,r),e===2&&(i=Eh(t),i!==0&&(r=i,e=Yh(t,i))),e===1))throw n=ha,ys(t,0),gr(t,r),Rt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ds(t,Tt,Ln);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=gp+500-Ve(),10<e)){if(hc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ch(ds.bind(null,t,Tt,Ln),e);break}ds(t,Tt,Ln);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-an(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cI(r/1960))-r,10<r){t.timeoutHandle=Ch(ds.bind(null,t,Tt,Ln),r);break}ds(t,Tt,Ln);break;case 5:ds(t,Tt,Ln);break;default:throw Error(z(329))}}}return Rt(t,Ve()),t.callbackNode===n?Lw.bind(null,t):null}function Yh(t,e){var n=zo;return t.current.memoizedState.isDehydrated&&(ys(t,e).flags|=256),t=Cc(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Jh(e)),t}function Jh(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function uI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~mp,e&=~mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function Dy(t){if(ue&6)throw Error(z(327));pi();var e=hc(t,0);if(!(e&1))return Rt(t,Ve()),null;var n=Cc(t,e);if(t.tag!==0&&n===2){var r=Eh(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=ha,ys(t,0),gr(t,e),Rt(t,Ve()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Tt,Ln),Rt(t,Ve()),null}function yp(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ii=Ve()+500,du&&Qr())}}function ks(t){Er!==null&&Er.tag===0&&!(ue&6)&&pi();var e=ue;ue|=1;var n=Qt.transition,r=he;try{if(Qt.transition=null,he=1,t)return t()}finally{he=r,Qt.transition=n,ue=e,!(ue&6)&&Qr()}}function vp(){Dt=oi.current,Te(oi)}function ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ub(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Xf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yc();break;case 3:Ti(),Te(St),Te(ht),ap();break;case 5:op(r);break;case 4:Ti();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:np(r.type._context);break;case 22:case 23:vp()}n=n.return}if(Xe=t,Fe=t=Nr(t.current,null),nt=Dt=e,qe=0,ha=null,mp=mu=Es=0,Tt=zo=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ps=null}return t}function Vw(t,e){do{var n=Fe;try{if(tp(),Hl.current=Ic,bc){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bc=!1}if(xs=0,Ye=We=Ce=null,Fo=!1,ca=0,pp.current=null,n===null||n.return===null){qe=1,ha=e,Fe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=xy(o);if(_!==null){_.flags&=-257,Ey(_,o,l,i,e),_.mode&1&&wy(i,u,e),e=_,c=u;var k=e.updateQueue;if(k===null){var I=new Set;I.add(c),e.updateQueue=I}else k.add(c);break e}else{if(!(e&1)){wy(i,u,e),_p();break e}c=Error(z(426))}}else if(be&&l.mode&1){var A=xy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ey(A,o,l,i,e),Zf(bi(c,l));break e}}i=c=bi(c,l),qe!==4&&(qe=2),zo===null?zo=[i]:zo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=ww(i,c,e);py(i,w);break e;case 1:l=c;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Rr===null||!Rr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=xw(i,l,e);py(i,j);break e}}i=i.return}while(i!==null)}Uw(n)}catch(L){e=L,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Mw(){var t=Sc.current;return Sc.current=Ic,t===null?Ic:t}function _p(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||!(Es&268435455)&&!(mu&268435455)||gr(Xe,nt)}function Cc(t,e){var n=ue;ue|=2;var r=Mw();(Xe!==t||nt!==e)&&(Ln=null,ys(t,e));do try{dI();break}catch(s){Vw(t,s)}while(!0);if(tp(),ue=n,Sc.current=r,Fe!==null)throw Error(z(261));return Xe=null,nt=0,qe}function dI(){for(;Fe!==null;)Fw(Fe)}function hI(){for(;Fe!==null&&!VT();)Fw(Fe)}function Fw(t){var e=$w(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Uw(t):Fe=e,pp.current=null}function Uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iI(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Fe=null;return}}else if(n=sI(n,e,Dt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);qe===0&&(qe=5)}function ds(t,e,n){var r=he,s=Qt.transition;try{Qt.transition=null,he=1,fI(t,e,n,r)}finally{Qt.transition=s,he=r}return null}function fI(t,e,n,r){do pi();while(Er!==null);if(ue&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GT(t,i),t===Xe&&(Fe=Xe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bl||(bl=!0,Bw(dc,function(){return pi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=he;he=1;var l=ue;ue|=4,pp.current=null,aI(t,n),Dw(n,t),jb(Ah),fc=!!Sh,Ah=Sh=null,t.current=n,lI(n),MT(),ue=l,he=o,Qt.transition=i}else t.current=n;if(bl&&(bl=!1,Er=t,Rc=s),i=t.pendingLanes,i===0&&(Rr=null),zT(n.stateNode),Rt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ac)throw Ac=!1,t=Kh,Kh=null,t;return Rc&1&&t.tag!==0&&pi(),i=t.pendingLanes,i&1?t===Qh?$o++:($o=0,Qh=t):$o=0,Qr(),null}function pi(){if(Er!==null){var t=w_(Rc),e=Qt.transition,n=he;try{if(Qt.transition=null,he=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Rc=0,ue&6)throw Error(z(331));var s=ue;for(ue|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(W=u;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Uo(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,_=f.return;if(Nw(f),f===u){W=null;break}if(g!==null){g.return=_,W=g;break}W=_}}}var k=i.alternate;if(k!==null){var I=k.child;if(I!==null){k.child=null;do{var A=I.sibling;I.sibling=null,I=A}while(I!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,W=w;break e}W=i.return}}var y=t.current;for(W=y;W!==null;){o=W;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,W=E;else e:for(o=y;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pu(9,l)}}catch(L){De(l,l.return,L)}if(l===o){W=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,W=j;break e}W=l.return}}if(ue=s,Qr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(ou,t)}catch{}r=!0}return r}finally{he=n,Qt.transition=e}}return!1}function Oy(t,e,n){e=bi(n,e),e=ww(t,e,1),t=Ar(t,e,1),e=vt(),t!==null&&(Ia(t,1,e),Rt(t,e))}function De(t,e,n){if(t.tag===3)Oy(t,t,n);else for(;e!==null;){if(e.tag===3){Oy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rr===null||!Rr.has(r))){t=bi(n,t),t=xw(e,t,1),e=Ar(e,t,1),t=vt(),e!==null&&(Ia(e,1,t),Rt(e,t));break}}e=e.return}}function pI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(nt&n)===n&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Ve()-gp?ys(t,0):mp|=n),Rt(t,e)}function zw(t,e){e===0&&(t.mode&1?(e=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):e=1);var n=vt();t=Qn(t,e),t!==null&&(Ia(t,e,n),Rt(t,n))}function mI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zw(t,n)}function gI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),zw(t,n)}var $w;$w=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,rI(t,e,n);It=!!(t.flags&131072)}else It=!1,be&&e.flags&1048576&&q_(e,wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var s=xi(e,ht.current);fi(e,n),s=cp(null,e,r,t,s,n);var i=up();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,vc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sp(e),s.updater=fu,e.stateNode=s,s._reactInternals=e,Vh(e,r,t,n),e=Uh(null,e,r,!0,i,n)):(e.tag=0,be&&i&&Jf(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vI(r),t=tn(r,t),s){case 0:e=Fh(null,e,r,t,n);break e;case 1:e=by(null,e,r,t,n);break e;case 11:e=ky(null,e,r,t,n);break e;case 14:e=Ty(null,e,r,tn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Fh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),by(t,e,r,s,n);case 3:e:{if(bw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,X_(t,e),kc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bi(Error(z(423)),e),e=Iy(t,e,r,n,s);break e}else if(r!==s){s=bi(Error(z(424)),e),e=Iy(t,e,r,n,s);break e}else for(Mt=Sr(e.stateNode.containerInfo.firstChild),Ut=e,be=!0,rn=null,n=Y_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ei(),r===s){e=Yn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return Z_(e),t===null&&Dh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Rh(r,s)?o=null:i!==null&&Rh(r,i)&&(e.flags|=32),Tw(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&Dh(e),null;case 13:return Iw(t,e,n);case 4:return ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ki(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),ky(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(xc,r._currentValue),r._currentValue=o,i!==null)if(un(i.value,o)){if(i.children===s.children&&!St.current){e=Yn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$n(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Oh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fi(e,n),s=Xt(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),Ty(t,e,r,s,n);case 15:return Ew(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),ql(t,e),e.tag=1,At(r)?(t=!0,vc(e)):t=!1,fi(e,n),_w(e,r,s),Vh(e,r,s,n),Uh(null,e,r,!0,t,n);case 19:return Sw(t,e,n);case 22:return kw(t,e,n)}throw Error(z(156,e.tag))};function Bw(t,e){return g_(t,e)}function yI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new yI(t,e,n,r)}function wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vI(t){if(typeof t=="function")return wp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ff)return 11;if(t===Uf)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ql(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return vs(n.children,s,i,e);case Mf:o=8,s|=8;break;case ah:return t=Kt(12,n,e,s|2),t.elementType=ah,t.lanes=i,t;case lh:return t=Kt(13,n,e,s),t.elementType=lh,t.lanes=i,t;case ch:return t=Kt(19,n,e,s),t.elementType=ch,t.lanes=i,t;case Zv:return gu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jv:o=10;break e;case Xv:o=9;break e;case Ff:o=11;break e;case Uf:o=14;break e;case fr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function vs(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function gu(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=Zv,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Ud(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _I(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xp(t,e,n,r,s,i,o,l,c){return t=new _I(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sp(i),t}function wI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ns(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(At(n))return H_(t,n,e)}return e}function Ww(t,e,n,r,s,i,o,l,c){return t=xp(n,r,!0,t,s,i,o,l,c),t.context=Hw(null),n=t.current,r=vt(),s=Cr(n),i=$n(r,s),i.callback=e??null,Ar(n,i,s),t.current.lanes=s,Ia(t,s,r),Rt(t,r),t}function yu(t,e,n,r){var s=e.current,i=vt(),o=Cr(s);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(s,e,o),t!==null&&(ln(t,s,o,i),Bl(t,s,o)),o}function Nc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ly(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ep(t,e){Ly(t,e),(t=t.alternate)&&Ly(t,e)}function xI(){return null}var qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function kp(t){this._internalRoot=t}vu.prototype.render=kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));yu(t,e,null,null)};vu.prototype.unmount=kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ks(function(){yu(null,t,null,null)}),e[Kn]=null}};function vu(t){this._internalRoot=t}vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=k_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&b_(t)}};function Tp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function EI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Nc(o);i.call(u)}}var o=Ww(e,r,t,0,null,!1,!1,"",Vy);return t._reactRootContainer=o,t[Kn]=o.current,sa(t.nodeType===8?t.parentNode:t),ks(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Nc(c);l.call(u)}}var c=xp(t,0,!1,null,null,!1,!1,"",Vy);return t._reactRootContainer=c,t[Kn]=c.current,sa(t.nodeType===8?t.parentNode:t),ks(function(){yu(e,c,n,r)}),c}function wu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Nc(o);l.call(c)}}yu(e,o,t,s)}else o=EI(n,e,t,s,r);return Nc(o)}x_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Io(e.pendingLanes);n!==0&&(Bf(e,n|1),Rt(e,Ve()),!(ue&6)&&(Ii=Ve()+500,Qr()))}break;case 13:ks(function(){var r=Qn(t,1);if(r!==null){var s=vt();ln(r,t,1,s)}}),Ep(t,1)}};Hf=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=vt();ln(e,t,134217728,n)}Ep(t,134217728)}};E_=function(t){if(t.tag===13){var e=Cr(t),n=Qn(t,e);if(n!==null){var r=vt();ln(n,t,e,r)}Ep(t,e)}};k_=function(){return he};T_=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};_h=function(t,e,n){switch(e){case"input":if(hh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uu(r);if(!s)throw Error(z(90));t_(r),hh(r,s)}}}break;case"textarea":r_(t,n);break;case"select":e=n.value,e!=null&&ci(t,!!n.multiple,e,!1)}};u_=yp;d_=ks;var kI={usingClientEntryPoint:!1,Events:[Aa,ei,uu,l_,c_,yp]},wo={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TI={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=p_(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{ou=Il.inject(TI),En=Il}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tp(e))throw Error(z(200));return wI(t,e,null,n)};$t.createRoot=function(t,e){if(!Tp(t))throw Error(z(299));var n=!1,r="",s=qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xp(t,1,!1,null,null,n,!1,r,s),t[Kn]=e.current,sa(t.nodeType===8?t.parentNode:t),new kp(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=p_(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return ks(t)};$t.hydrate=function(t,e,n){if(!_u(e))throw Error(z(200));return wu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Tp(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ww(e,null,t,1,n??null,s,!1,i,o),t[Kn]=e.current,sa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new vu(e)};$t.render=function(t,e,n){if(!_u(e))throw Error(z(200));return wu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!_u(t))throw Error(z(40));return t._reactRootContainer?(ks(function(){wu(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};$t.unstable_batchedUpdates=yp;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_u(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return wu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Gw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gw)}catch(t){console.error(t)}}Gw(),Gv.exports=$t;var bI=Gv.exports,Kw,My=bI;Kw=My.createRoot,My.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fy="popstate";function II(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Xh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fa(s)}return AI(e,n,null,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SI(){return Math.random().toString(36).substring(2,10)}function Uy(t,e){return{usr:t.state,key:t.key,idx:e}}function Xh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Fi(e):e,state:n,key:e&&e.key||r||SI()}}function fa({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function AI(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",c=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function p(){l="POP";let A=f(),w=A==null?null:A-u;u=A,c&&c({action:l,location:I.location,delta:w})}function g(A,w){l="PUSH";let y=Xh(I.location,A,w);u=f()+1;let E=Uy(y,u),j=I.createHref(y);try{o.pushState(E,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(j)}i&&c&&c({action:l,location:I.location,delta:1})}function _(A,w){l="REPLACE";let y=Xh(I.location,A,w);u=f();let E=Uy(y,u),j=I.createHref(y);o.replaceState(E,"",j),i&&c&&c({action:l,location:I.location,delta:0})}function k(A){return RI(A)}let I={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Fy,p),c=A,()=>{s.removeEventListener(Fy,p),c=null}},createHref(A){return e(s,A)},createURL:k,encodeLocation(A){let w=k(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:_,go(A){return o.go(A)}};return I}function RI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:fa(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Qw(t,e,n="/"){return CI(t,e,n,!1)}function CI(t,e,n,r){let s=typeof e=="string"?Fi(e):e,i=Jn(s.pathname||"/",n);if(i==null)return null;let o=Yw(t);NI(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=$I(i);l=UI(o[c],u,r)}return l}function Yw(t,e=[],n=[],r="",s=!1){let i=(o,l,c=s,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Ie(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Bn([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(Ie(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Yw(o.children,e,g,p,c)),!(o.path==null&&!o.index)&&e.push({path:p,score:MI(p,o.index),routesMeta:g})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of Jw(o.path))i(o,l,!0,u)}),e}function Jw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Jw(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function NI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PI=/^:[\w-]+$/,jI=3,DI=2,OI=1,LI=10,VI=-2,zy=t=>t==="*";function MI(t,e){let n=t.split("/"),r=n.length;return n.some(zy)&&(r+=VI),e&&(r+=DI),n.filter(s=>!zy(s)).reduce((s,i)=>s+(PI.test(i)?jI:i===""?OI:LI),r)}function FI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UI(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Pc({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=Pc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Bn([i,p.pathname]),pathnameBase:qI(Bn([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Bn([i,p.pathnameBase]))}return o}function Pc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:p},g)=>{if(f==="*"){let k=l[g]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const _=l[g];return p&&!_?u[f]=void 0:u[f]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function zI(t,e=!1,n=!0){dn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $I(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var BI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function HI(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fi(t):t,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=$y(n.substring(1),"/"):i=$y(n,e)):i=e,{pathname:i,search:GI(r),hash:KI(s)}}function $y(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bp(t){let e=WI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Ip(t,e,n,r=!1){let s;typeof t=="string"?s=Fi(t):(s={...t},Ie(!s.pathname||!s.pathname.includes("?"),zd("?","pathname","search",s)),Ie(!s.pathname||!s.pathname.includes("#"),zd("#","pathname","hash",s)),Ie(!s.search||!s.search.includes("#"),zd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let c=HI(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var Bn=t=>t.join("/").replace(/\/\/+/g,"/"),qI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,QI=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function YI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function JI(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zw(t,e){let n=t;if(typeof n!="string"||!BI.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(Xw)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=Jn(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:s=!0}catch{dn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ex=["POST","PUT","PATCH","DELETE"];new Set(ex);var XI=["GET",...ex];new Set(XI);var Ui=N.createContext(null);Ui.displayName="DataRouter";var xu=N.createContext(null);xu.displayName="DataRouterState";var ZI=N.createContext(!1),tx=N.createContext({isTransitioning:!1});tx.displayName="ViewTransition";var eS=N.createContext(new Map);eS.displayName="Fetchers";var tS=N.createContext(null);tS.displayName="Await";var Ht=N.createContext(null);Ht.displayName="Navigation";var Ca=N.createContext(null);Ca.displayName="Location";var pn=N.createContext({outlet:null,matches:[],isDataRoute:!1});pn.displayName="Route";var Sp=N.createContext(null);Sp.displayName="RouteError";var nx="REACT_ROUTER_ERROR",nS="REDIRECT",rS="ROUTE_ERROR_RESPONSE";function sS(t){if(t.startsWith(`${nx}:${nS}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function iS(t){if(t.startsWith(`${nx}:${rS}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new QI(e.status,e.statusText,e.data)}catch{}}function oS(t,{relative:e}={}){Ie(zi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(Ht),{hash:s,pathname:i,search:o}=Pa(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:Bn([n,i])),r.createHref({pathname:l,search:o,hash:s})}function zi(){return N.useContext(Ca)!=null}function Yr(){return Ie(zi(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ca).location}var rx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sx(t){N.useContext(Ht).static||N.useLayoutEffect(t)}function Na(){let{isDataRoute:t}=N.useContext(pn);return t?wS():aS()}function aS(){Ie(zi(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Ui),{basename:e,navigator:n}=N.useContext(Ht),{matches:r}=N.useContext(pn),{pathname:s}=Yr(),i=JSON.stringify(bp(r)),o=N.useRef(!1);return sx(()=>{o.current=!0}),N.useCallback((c,u={})=>{if(dn(o.current,rx),!o.current)return;if(typeof c=="number"){n.go(c);return}let f=Ip(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Bn([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,i,s,t])}N.createContext(null);function lS(){let{matches:t}=N.useContext(pn),e=t[t.length-1];return e?e.params:{}}function Pa(t,{relative:e}={}){let{matches:n}=N.useContext(pn),{pathname:r}=Yr(),s=JSON.stringify(bp(n));return N.useMemo(()=>Ip(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function cS(t,e){return ix(t,e)}function ix(t,e,n,r,s){var y;Ie(zi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=N.useContext(Ht),{matches:o}=N.useContext(pn),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",f=l?l.pathnameBase:"/",p=l&&l.route;{let E=p&&p.path||"";ax(u,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let g=Yr(),_;if(e){let E=typeof e=="string"?Fi(e):e;Ie(f==="/"||((y=E.pathname)==null?void 0:y.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),_=E}else _=g;let k=_.pathname||"/",I=k;if(f!=="/"){let E=f.replace(/^\//,"").split("/");I="/"+k.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=Qw(t,{pathname:I});dn(p||A!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),dn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=pS(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:Bn([f,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Bn([f,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,s);return e&&w?N.createElement(Ca.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},w):w}function uS(){let t=_S(),e=YI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,o)}var dS=N.createElement(uS,null),ox=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=iS(t.digest);n&&(t=n)}let e=t!==void 0?N.createElement(pn.Provider,{value:this.props.routeContext},N.createElement(Sp.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?N.createElement(hS,{error:t},e):e}};ox.contextType=ZI;var $d=new WeakMap;function hS({children:t,error:e}){let{basename:n}=N.useContext(Ht);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=sS(e.digest);if(r){let s=$d.get(e);if(s)throw s;let i=Zw(r.location,n);if(Xw&&!$d.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw $d.set(e,o),o}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function fS({routeContext:t,match:e,children:n}){let r=N.useContext(Ui);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(pn.Provider,{value:t},n)}function pS(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let f=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ie(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,c=-1;if(n)for(let f=0;f<i.length;f++){let p=i[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:_}=n,k=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||k){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&r?(f,p)=>{var g,_;r(f,{location:n.location,params:((_=(g=n.matches)==null?void 0:g[0])==null?void 0:_.params)??{},unstable_pattern:JI(n.matches),errorInfo:p})}:void 0;return i.reduceRight((f,p,g)=>{let _,k=!1,I=null,A=null;n&&(_=o&&p.route.id?o[p.route.id]:void 0,I=p.route.errorElement||dS,l&&(c<0&&g===0?(ax("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,A=null):c===g&&(k=!0,A=p.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,g+1)),y=()=>{let E;return _?E=I:k?E=A:p.route.Component?E=N.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,N.createElement(fS,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?N.createElement(ox,{location:n.location,revalidation:n.revalidation,component:I,error:_,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:u}):y()},null)}function Ap(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mS(t){let e=N.useContext(Ui);return Ie(e,Ap(t)),e}function gS(t){let e=N.useContext(xu);return Ie(e,Ap(t)),e}function yS(t){let e=N.useContext(pn);return Ie(e,Ap(t)),e}function Rp(t){let e=yS(t),n=e.matches[e.matches.length-1];return Ie(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function vS(){return Rp("useRouteId")}function _S(){var r;let t=N.useContext(Sp),e=gS("useRouteError"),n=Rp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function wS(){let{router:t}=mS("useNavigate"),e=Rp("useNavigate"),n=N.useRef(!1);return sx(()=>{n.current=!0}),N.useCallback(async(s,i={})=>{dn(n.current,rx),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var By={};function ax(t,e,n){!e&&!By[t]&&(By[t]=!0,dn(!1,n))}N.memo(xS);function xS({routes:t,future:e,state:n,onError:r}){return ix(t,void 0,n,r,e)}function lx({to:t,replace:e,state:n,relative:r}){Ie(zi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Ht);dn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=N.useContext(pn),{pathname:o}=Yr(),l=Na(),c=Ip(t,bp(i),o,r==="path"),u=JSON.stringify(c);return N.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function jt(t){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ES({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Ie(!zi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[l,s,i,o]);typeof n=="string"&&(n=Fi(n));let{pathname:u="/",search:f="",hash:p="",state:g=null,key:_="default"}=n,k=N.useMemo(()=>{let I=Jn(u,l);return I==null?null:{location:{pathname:I,search:f,hash:p,state:g,key:_},navigationType:r}},[l,u,f,p,g,_,r]);return dn(k!=null,`<Router basename="${l}"> is not able to match the URL "${u}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:N.createElement(Ht.Provider,{value:c},N.createElement(Ca.Provider,{children:e,value:k}))}function kS({children:t,location:e}){return cS(Zh(t),e)}function Zh(t,e=[]){let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,Zh(r.props.children,i));return}Ie(r.type===jt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zh(r.props.children,i)),n.push(o)}),n}var Yl="get",Jl="application/x-www-form-urlencoded";function Eu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function TS(t){return Eu(t)&&t.tagName.toLowerCase()==="button"}function bS(t){return Eu(t)&&t.tagName.toLowerCase()==="form"}function IS(t){return Eu(t)&&t.tagName.toLowerCase()==="input"}function SS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AS(t,e){return t.button===0&&(!e||e==="_self")&&!SS(t)}var Sl=null;function RS(){if(Sl===null)try{new FormData(document.createElement("form"),0),Sl=!1}catch{Sl=!0}return Sl}var CS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bd(t){return t!=null&&!CS.has(t)?(dn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jl}"`),null):t}function NS(t,e){let n,r,s,i,o;if(bS(t)){let l=t.getAttribute("action");r=l?Jn(l,e):null,n=t.getAttribute("method")||Yl,s=Bd(t.getAttribute("enctype"))||Jl,i=new FormData(t)}else if(TS(t)||IS(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Jn(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yl,s=Bd(t.getAttribute("formenctype"))||Bd(l.getAttribute("enctype"))||Jl,i=new FormData(l,t),!RS()){let{name:u,type:f,value:p}=t;if(f==="image"){let g=u?`${u}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else u&&i.append(u,p)}}else{if(Eu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yl,r=null,s=Jl,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PS(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Jn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function jS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function OS(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await jS(i,n);return o.links?o.links():[]}return[]}));return FS(r.flat(1).filter(DS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Hy(t,e,n,r,s,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var f;return n[u].pathname!==c.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{var p;let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function LS(t,e,{includeHydrateFallback:n}={}){return VS(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function VS(t){return[...new Set(t)]}function MS(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function FS(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(MS(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function cx(){let t=N.useContext(Ui);return Cp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function US(){let t=N.useContext(xu);return Cp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Np=N.createContext(void 0);Np.displayName="FrameworkContext";function ux(){let t=N.useContext(Np);return Cp(t,"You must render this element inside a <HydratedRouter> element"),t}function zS(t,e){let n=N.useContext(Np),[r,s]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:p}=e,g=N.useRef(null);N.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let I=w=>{w.forEach(y=>{o(y.isIntersecting)})},A=new IntersectionObserver(I,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),N.useEffect(()=>{if(r){let I=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(I)}}},[r]);let _=()=>{s(!0)},k=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:xo(l,_),onBlur:xo(c,k),onMouseEnter:xo(u,_),onMouseLeave:xo(f,k),onTouchStart:xo(p,_)}]:[!1,g,{}]}function xo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $S({page:t,...e}){let{router:n}=cx(),r=N.useMemo(()=>Qw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(HS,{page:t,matches:r,...e}):null}function BS(t){let{manifest:e,routeModules:n}=ux(),[r,s]=N.useState([]);return N.useEffect(()=>{let i=!1;return OS(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function HS({page:t,matches:e,...n}){let r=Yr(),{future:s,manifest:i,routeModules:o}=ux(),{basename:l}=cx(),{loaderData:c,matches:u}=US(),f=N.useMemo(()=>Hy(t,e,u,i,r,"data"),[t,e,u,i,r]),p=N.useMemo(()=>Hy(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,A=!1;if(e.forEach(y=>{var j;let E=i.routes[y.route.id];!E||!E.hasLoader||(!f.some(L=>L.route.id===y.route.id)&&y.route.id in c&&((j=o[y.route.id])!=null&&j.shouldRevalidate)||E.hasClientLoader?A=!0:I.add(y.route.id))}),I.size===0)return[];let w=PS(t,l,s.unstable_trailingSlashAwareDataRequests,"data");return A&&I.size>0&&w.searchParams.set("_routes",e.filter(y=>I.has(y.route.id)).map(y=>y.route.id).join(",")),[w.pathname+w.search]},[l,s.unstable_trailingSlashAwareDataRequests,c,r,i,f,e,t,o]),_=N.useMemo(()=>LS(p,i),[p,i]),k=BS(p);return N.createElement(N.Fragment,null,g.map(I=>N.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),_.map(I=>N.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),k.map(({key:I,link:A})=>N.createElement("link",{key:I,nonce:n.nonce,...A,crossOrigin:A.crossOrigin??n.crossOrigin})))}function WS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qS&&(window.__reactRouterVersion="7.13.0")}catch{}function GS({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=N.useRef();s.current==null&&(s.current=II({window:r,v5Compat:!0}));let i=s.current,[o,l]=N.useState({action:i.action,location:i.location}),c=N.useCallback(u=>{n===!1?l(u):N.startTransition(()=>l(u))},[n]);return N.useLayoutEffect(()=>i.listen(c),[i,c]),N.createElement(ES,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var dx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ku=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:g,..._},k){let{basename:I,unstable_useTransitions:A}=N.useContext(Ht),w=typeof u=="string"&&dx.test(u),y=Zw(u,I);u=y.to;let E=oS(u,{relative:s}),[j,L,U]=zS(r,_),T=YS(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:A});function v(C){e&&e(C),C.defaultPrevented||T(C)}let b=N.createElement("a",{..._,...U,href:y.absoluteURL||E,onClick:y.isExternal||i?e:v,ref:WS(k,L),target:c,"data-discover":!w&&n==="render"?"true":void 0});return j&&!w?N.createElement(N.Fragment,null,b,N.createElement($S,{page:E})):b});ku.displayName="Link";var hx=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},f){let p=Pa(o,{relative:u.relative}),g=Yr(),_=N.useContext(xu),{navigator:k,basename:I}=N.useContext(Ht),A=_!=null&&t2(p)&&l===!0,w=k.encodeLocation?k.encodeLocation(p).pathname:p.pathname,y=g.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(y=y.toLowerCase(),E=E?E.toLowerCase():null,w=w.toLowerCase()),E&&I&&(E=Jn(E,I)||E);const j=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let L=y===w||!s&&y.startsWith(w)&&y.charAt(j)==="/",U=E!=null&&(E===w||!s&&E.startsWith(w)&&E.charAt(w.length)==="/"),T={isActive:L,isPending:U,isTransitioning:A},v=L?e:void 0,b;typeof r=="function"?b=r(T):b=[r,L?"active":null,U?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(T):i;return N.createElement(ku,{...u,"aria-current":v,className:b,ref:f,style:C,to:o,viewTransition:l},typeof c=="function"?c(T):c)});hx.displayName="NavLink";var KS=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Yl,action:l,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:g,..._},k)=>{let{unstable_useTransitions:I}=N.useContext(Ht),A=ZS(),w=e2(l,{relative:u}),y=o.toLowerCase()==="get"?"get":"post",E=typeof l=="string"&&dx.test(l),j=L=>{if(c&&c(L),L.defaultPrevented)return;L.preventDefault();let U=L.nativeEvent.submitter,T=(U==null?void 0:U.getAttribute("formmethod"))||o,v=()=>A(U||L.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:s,state:i,relative:u,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:g});I&&n!==!1?N.startTransition(()=>v()):v()};return N.createElement("form",{ref:k,method:y,action:w,onSubmit:r?c:j,..._,"data-discover":!E&&t==="render"?"true":void 0})});KS.displayName="Form";function QS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fx(t){let e=N.useContext(Ui);return Ie(e,QS(t)),e}function YS(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=Na(),f=Yr(),p=Pa(t,{relative:i});return N.useCallback(g=>{if(AS(g,e)){g.preventDefault();let _=n!==void 0?n:fa(f)===fa(p),k=()=>u(t,{replace:_,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?N.startTransition(()=>k()):k()}},[f,u,p,n,r,e,t,s,i,o,l,c])}var JS=0,XS=()=>`__${String(++JS)}__`;function ZS(){let{router:t}=fx("useSubmit"),{basename:e}=N.useContext(Ht),n=vS(),r=t.fetch,s=t.navigate;return N.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:f,body:p}=NS(i,e);if(o.navigate===!1){let g=o.fetcherKey||XS();await r(g,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await s(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function e2(t,{relative:e}={}){let{basename:n}=N.useContext(Ht),r=N.useContext(pn);Ie(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Pa(t||".",{relative:e})},o=Yr();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(f=>f==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let f=l.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Bn([n,i.pathname])),fa(i)}function t2(t,{relative:e}={}){let n=N.useContext(tx);Ie(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fx("useViewTransitionState"),s=Pa(t,{relative:e});if(!n.isTransitioning)return!1;let i=Jn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Jn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Pc(s.pathname,o)!=null||Pc(s.pathname,i)!=null}const n2="modulepreload",r2=function(t){return"/"+t},Wy={},s2=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=r2(c),c in Wy)return;Wy[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":n2,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},i2=()=>{};var qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},o2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,_=u&63;c||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(px(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||p==null)throw new a2;const g=i<<2|l>>4;if(r.push(g),u!==64){const _=l<<4&240|u>>2;if(r.push(_),p!==64){const k=u<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l2=function(t){const e=px(t);return mx.encodeByteArray(e,!0)},jc=function(t){return l2(t).replace(/\./g,"")},gx=function(t){try{return mx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=()=>c2().__FIREBASE_DEFAULTS__,d2=()=>{if(typeof process>"u"||typeof qy>"u")return;const t=qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gx(t[1]);return e&&JSON.parse(e)},Tu=()=>{try{return i2()||u2()||d2()||h2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yx=t=>{var e,n;return(n=(e=Tu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vx=t=>{const e=yx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_x=()=>{var t;return(t=Tu())==null?void 0:t.config},wx=t=>{var e;return(e=Tu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jc(JSON.stringify(n)),jc(JSON.stringify(o)),""].join(".")}const Bo={};function p2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bo))Bo[e]?t.emulator.push(e):t.prod.push(e);return t}function m2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gy=!1;function jp(t,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||Bo[t]===e||Bo[t]||Gy)return;Bo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=p2().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Gy=!0,o()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=m2(r),_=n("text"),k=document.getElementById(_)||document.createElement("span"),I=n("learnmore"),A=document.getElementById(I)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;l(E),f(A,I);const j=u();c(y,w),E.append(y,k,A,j),document.body.appendChild(E)}i?(k.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function y2(){var e;const t=(e=Tu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x2(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E2(){return!y2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k2(){try{return typeof indexedDB=="object"}catch{return!1}}function T2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=b2,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ja.prototype.create)}}class ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Pn(s,l,r)}}function I2(t,e){return t.replace(S2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const S2=/\{\$([^}]+)}/g;function A2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ts(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ky(i)&&Ky(o)){if(!Ts(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ky(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ao(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function R2(t,e){const n=new C2(t,e);return n.subscribe.bind(n)}class C2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hd),s.error===void 0&&(s.error=Hd),s.complete===void 0&&(s.complete=Hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new f2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D2(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j2(t){return t===hs?void 0:t}function D2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new P2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const L2={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},V2=oe.INFO,M2={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},F2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=M2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dp{constructor(e){this.name=e,this._logLevel=V2,this._logHandler=F2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const U2=(t,e)=>e.some(n=>t instanceof n);let Qy,Yy;function z2(){return Qy||(Qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $2(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ex=new WeakMap,ef=new WeakMap,kx=new WeakMap,Wd=new WeakMap,Op=new WeakMap;function B2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ex.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function H2(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W2(t){tf=t(tf)}function q2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qd(this),e,...n);return kx.set(r,e.sort?e.sort():[e]),Pr(r)}:$2().includes(t)?function(...e){return t.apply(qd(this),e),Pr(Ex.get(this))}:function(...e){return Pr(t.apply(qd(this),e))}}function G2(t){return typeof t=="function"?q2(t):(t instanceof IDBTransaction&&H2(t),U2(t,z2())?new Proxy(t,tf):t)}function Pr(t){if(t instanceof IDBRequest)return B2(t);if(Wd.has(t))return Wd.get(t);const e=G2(t);return e!==t&&(Wd.set(t,e),Op.set(e,t)),e}const qd=t=>Op.get(t);function K2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Pr(o.result),c.oldVersion,c.newVersion,Pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Q2=["get","getKey","getAll","getAllKeys","count"],Y2=["put","add","delete","clear"],Gd=new Map;function Jy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Q2.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Gd.set(e,i),i}W2(t=>({...t,get:(e,n,r)=>Jy(e,n)||t.get(e,n,r),has:(e,n)=>!!Jy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function X2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Xy="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Dp("@firebase/app"),Z2="@firebase/app-compat",eA="@firebase/analytics-compat",tA="@firebase/analytics",nA="@firebase/app-check-compat",rA="@firebase/app-check",sA="@firebase/auth",iA="@firebase/auth-compat",oA="@firebase/database",aA="@firebase/data-connect",lA="@firebase/database-compat",cA="@firebase/functions",uA="@firebase/functions-compat",dA="@firebase/installations",hA="@firebase/installations-compat",fA="@firebase/messaging",pA="@firebase/messaging-compat",mA="@firebase/performance",gA="@firebase/performance-compat",yA="@firebase/remote-config",vA="@firebase/remote-config-compat",_A="@firebase/storage",wA="@firebase/storage-compat",xA="@firebase/firestore",EA="@firebase/ai",kA="@firebase/firestore-compat",TA="firebase",bA="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",IA={[nf]:"fire-core",[Z2]:"fire-core-compat",[tA]:"fire-analytics",[eA]:"fire-analytics-compat",[rA]:"fire-app-check",[nA]:"fire-app-check-compat",[sA]:"fire-auth",[iA]:"fire-auth-compat",[oA]:"fire-rtdb",[aA]:"fire-data-connect",[lA]:"fire-rtdb-compat",[cA]:"fire-fn",[uA]:"fire-fn-compat",[dA]:"fire-iid",[hA]:"fire-iid-compat",[fA]:"fire-fcm",[pA]:"fire-fcm-compat",[mA]:"fire-perf",[gA]:"fire-perf-compat",[yA]:"fire-rc",[vA]:"fire-rc-compat",[_A]:"fire-gcs",[wA]:"fire-gcs-compat",[xA]:"fire-fst",[kA]:"fire-fst-compat",[EA]:"fire-vertex","fire-js":"fire-js",[TA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,SA=new Map,sf=new Map;function Zy(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bs(t){const e=t.name;if(sf.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;sf.set(e,t);for(const n of Dc.values())Zy(n,t);for(const n of SA.values())Zy(n,t);return!0}function bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new ja("app","Firebase",AA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=bA;function Tx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:rf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jr.create("bad-app-name",{appName:String(s)});if(n||(n=_x()),!n)throw jr.create("no-options");const i=Dc.get(s);if(i){if(Ts(n,i.options)&&Ts(r,i.config))return i;throw jr.create("duplicate-app",{appName:s})}const o=new O2(s);for(const c of sf.values())o.addComponent(c);const l=new RA(n,r,o);return Dc.set(s,l),l}function Lp(t=rf){const e=Dc.get(t);if(!e&&t===rf&&_x())return Tx();if(!e)throw jr.create("no-app",{appName:t});return e}function Tn(t,e,n){let r=IA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(o.join(" "));return}bs(new Fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="firebase-heartbeat-database",NA=1,pa="firebase-heartbeat-store";let Kd=null;function bx(){return Kd||(Kd=K2(CA,NA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Kd}async function PA(t){try{const n=(await bx()).transaction(pa),r=await n.objectStore(pa).get(Ix(t));return await n.done,r}catch(e){if(e instanceof Pn)Xn.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function e0(t,e){try{const r=(await bx()).transaction(pa,"readwrite");await r.objectStore(pa).put(e,Ix(t)),await r.done}catch(n){if(n instanceof Pn)Xn.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function Ix(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1024,DA=30;class OA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=t0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>DA){const o=MA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t0(),{heartbeatsToSend:r,unsentEntries:s}=LA(this._heartbeatsCache.heartbeats),i=jc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function t0(){return new Date().toISOString().substring(0,10)}function LA(t,e=jA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),n0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),n0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return k2()?T2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function n0(t){return jc(JSON.stringify({version:2,heartbeats:t})).length}function MA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){bs(new Fr("platform-logger",e=>new J2(e),"PRIVATE")),bs(new Fr("heartbeat",e=>new OA(e),"PRIVATE")),Tn(nf,Xy,t),Tn(nf,Xy,"esm2020"),Tn("fire-js","")}FA("");function Sx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UA=Sx,Ax=new ja("auth","Firebase",Sx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Dp("@firebase/auth");function zA(t,...e){Oc.logLevel<=oe.WARN&&Oc.warn(`Auth (${js}): ${t}`,...e)}function Xl(t,...e){Oc.logLevel<=oe.ERROR&&Oc.error(`Auth (${js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw Vp(t,...e)}function bn(t,...e){return Vp(t,...e)}function Rx(t,e,n){const r={...UA(),[e]:n};return new ja("auth","Firebase",r).create(e,{appName:t.name})}function Hn(t){return Rx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ax.create(t,...e)}function J(t,e,...n){if(!t)throw Vp(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xl(e),new Error(e)}function Zn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $A(){return r0()==="http:"||r0()==="https:"}function r0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($A()||_2()||"connection"in navigator)?navigator.onLine:!0}function HA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=g2()||w2()}get(){return BA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GA=new Oa(3e4,6e4);function Jr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xr(t,e,n,r,s={}){return Nx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Da({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return v2()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(u.credentials="include"),Cx.fetch()(await Px(t,t.config.apiHost,n,l),u)})}async function Nx(t,e,n){t._canInitEmulator=!1;const r={...WA,...e};try{const s=new QA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Al(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Al(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Al(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Al(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rx(t,f,u);hn(t,f)}}catch(s){if(s instanceof Pn)throw s;hn(t,"network-request-failed",{message:String(s)})}}async function La(t,e,n,r,s={}){const i=await Xr(t,e,n,r,s);return"mfaPendingCredential"in i&&hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Px(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Mp(t.config,s):`${t.config.apiScheme}://${s}`;return qA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function KA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),GA.get())})}}function Al(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bn(t,e,r);return s.customData._tokenResponse=n,s}function s0(t){return t!==void 0&&t.enterprise!==void 0}class YA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JA(t,e){return Xr(t,"GET","/v2/recaptchaConfig",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(t,e){return Xr(t,"POST","/v1/accounts:delete",e)}async function Lc(t,e){return Xr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZA(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=Fp(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ho(Qd(s.auth_time)),issuedAtTime:Ho(Qd(s.iat)),expirationTime:Ho(Qd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qd(t){return Number(t)*1e3}function Fp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xl("JWT malformed, contained fewer than 3 sections"),null;try{const s=gx(n);return s?JSON.parse(s):(Xl("Failed to decode base64 JWT payload"),null)}catch(s){return Xl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function i0(t){const e=Fp(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&eR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await ma(t,Lc(e,{idToken:n}));J(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?jx(s.providerUserInfo):[],o=rR(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function nR(t){const e=$e(t);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function jx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e){const n=await Nx(t,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Px(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(c.credentials="include"),Cx.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iR(t,e){return Xr(t,"POST","/v2/accounts:revokeToken",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=i0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await sR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new mi;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new tR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new af(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ma(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZA(this,e)}reload(){return nR(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await ma(this,XA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:_,providerData:k,stsTokenManager:I}=n;J(p&&I,e,"internal-error");const A=mi.fromJSON(this.name,I);J(typeof p=="string",e,"internal-error"),dr(r,e.name),dr(s,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof _=="boolean",e,"internal-error"),dr(i,e.name),dr(o,e.name),dr(l,e.name),dr(c,e.name),dr(u,e.name),dr(f,e.name);const w=new sn({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:A,createdAt:u,lastLoginAt:f});return k&&Array.isArray(k)&&(w.providerData=k.map(y=>({...y}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new mi;s.updateFromServerResponse(n);const i=new sn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?jx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new mi;l.updateFromIdToken(r);const c=new sn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function zn(t){Zn(t instanceof Function,"Expected a class definition");let e=o0.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,o0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dx.type="NONE";const a0=Dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){return`firebase:${t}:${e}:${n}`}class gi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lc(this.auth,{idToken:e}).catch(()=>{});return n?sn._fromGetAccountInfoResponse(this.auth,n,e):null}return sn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gi(zn(a0),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zn(a0);const o=Zl(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const g=await Lc(e,{idToken:f}).catch(()=>{});if(!g)break;p=await sn._fromGetAccountInfoResponse(e,g,f)}else p=sn._fromJSON(e,f);u!==i&&(l=p),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new gi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new gi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ux(e))return"Blackberry";if(zx(e))return"Webos";if(Lx(e))return"Safari";if((e.includes("chrome/")||Vx(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ox(t=ft()){return/firefox\//i.test(t)}function Lx(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vx(t=ft()){return/crios\//i.test(t)}function Mx(t=ft()){return/iemobile/i.test(t)}function Fx(t=ft()){return/android/i.test(t)}function Ux(t=ft()){return/blackberry/i.test(t)}function zx(t=ft()){return/webos/i.test(t)}function Up(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oR(t=ft()){var e;return Up(t)&&!!((e=window.navigator)!=null&&e.standalone)}function aR(){return x2()&&document.documentMode===10}function $x(t=ft()){return Up(t)||Fx(t)||zx(t)||Ux(t)||/windows phone/i.test(t)||Mx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e=[]){let n;switch(t){case"Browser":n=l0(ft());break;case"Worker":n=`${l0(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e={}){return Xr(t,"GET","/v2/passwordPolicy",Jr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=6;class dR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??uR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c0(this),this.idTokenSubscription=new c0(this),this.beforeStateQueue=new lR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await gi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lc(this,{idToken:e}),r=await sn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Lt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(Hn(this));const n=e?$e(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cR(this),n=new dR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await gi.create(this,[zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ds(t){return $e(t)}class c0{constructor(e){this.auth=e,this.observer=null,this.addObserver=R2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fR(t){Iu=t}function Hx(t){return Iu.loadJS(t)}function pR(){return Iu.recaptchaEnterpriseScript}function mR(){return Iu.gapiScript}function gR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yR{constructor(){this.enterprise=new vR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _R="recaptcha-enterprise",Wx="NO_RECAPTCHA";class wR{constructor(e){this.type=_R,this.auth=Ds(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{JA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new YA(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;s0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Wx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yR().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&s0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=pR();c.length!==0&&(c+=l),Hx(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function u0(t,e,n,r=!1,s=!1){const i=new wR(t);let o;if(s)o=Wx;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await u0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await u0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){const n=bu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ts(i,e??{}))return s;hn(s,"already-initialized")}return n.initialize({options:e})}function ER(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kR(t,e,n){const r=Ds(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=qx(e),{host:o,port:l}=TR(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Ts(u,r.config.emulator)&&Ts(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ps(o)?(Pp(`${i}//${o}${c}`),jp("Auth",!0)):bR()}function qx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TR(t){const e=qx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:d0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:d0(o)}}}function d0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function IR(t,e){return Xr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e){return La(t,"POST","/v1/accounts:signInWithPassword",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return La(t,"POST","/v1/accounts:signInWithEmailLink",Jr(t,e))}async function RR(t,e){return La(t,"POST","/v1/accounts:signInWithEmailLink",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends zp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ga(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ga(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,n,"signInWithPassword",SR);case"emailLink":return AR(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,r,"signUpPassword",IR);case"emailLink":return RR(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(t,e){return La(t,"POST","/v1/accounts:signInWithIdp",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="http://localhost";class Is extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yi(e,n)}buildRequest(){const e={requestUri:CR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PR(t){const e=Ao(Ro(t)).link,n=e?Ao(Ro(e)).deep_link_id:null,r=Ao(Ro(t)).deep_link_id;return(r?Ao(Ro(r)).link:null)||r||n||e||t}class $p{constructor(e){const n=Ao(Ro(e)),r=n.apiKey??null,s=n.oobCode??null,i=NR(n.mode??null);J(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PR(e);try{return new $p(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,n){return ga._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$p.parseLink(n);return J(r,"argument-error"),ga._fromEmailAndCode(e,r.code,r.tenantId)}}$i.PROVIDER_ID="password";$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Va{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Va{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Va{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.TWITTER_SIGN_IN_METHOD="twitter.com";wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return La(t,"POST","/v1/accounts:signUp",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sn._fromIdTokenResponse(e,r,s),o=h0(r);return new Ss({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=h0(r);return new Ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function h0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Pn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Mc(e,n,r,s)}}function Kx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mc._fromErrorAndOperation(t,i,e,r):i})}async function DR(t,e,n=!1){const r=await ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,e,n=!1){const{auth:r}=t;if(Lt(r.app))return Promise.reject(Hn(r));const s="reauthenticate";try{const i=await ma(t,Kx(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Fp(i.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),Ss._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t,e,n=!1){if(Lt(t.app))return Promise.reject(Hn(t));const r="signIn",s=await Kx(t,r,e),i=await Ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function LR(t,e){return Qx(Ds(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(t){const e=Ds(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VR(t,e,n){if(Lt(t.app))return Promise.reject(Hn(t));const r=Ds(t),o=await lf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jR).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Yx(t),c}),l=await Ss._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function MR(t,e,n){return Lt(t.app)?Promise.reject(Hn(t)):LR($e(t),$i.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yx(t),r})}function FR(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function UR(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function zR(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function $R(t){return $e(t).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1e3,HR=10;class Xx extends Jx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);aR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xx.type="LOCAL";const WR=Xx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends Jx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zx.type="SESSION";const eE=Zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Su(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await qR(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Su.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Bp("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function KR(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function QR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function JR(){return tE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="firebaseLocalStorageDb",XR=1,Uc="firebaseLocalStorage",rE="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Au(t,e){return t.transaction([Uc],e?"readwrite":"readonly").objectStore(Uc)}function ZR(){const t=indexedDB.deleteDatabase(nE);return new Ma(t).toPromise()}function cf(){const t=indexedDB.open(nE,XR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Uc,{keyPath:rE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Uc)?e(r):(r.close(),await ZR(),e(await cf()))})})}async function f0(t,e,n){const r=Au(t,!0).put({[rE]:e,value:n});return new Ma(r).toPromise()}async function eC(t,e){const n=Au(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function p0(t,e){const n=Au(t,!0).delete(e);return new Ma(n).toPromise()}const tC=800,nC=3;class sE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Su._getInstance(JR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QR(),!this.activeServiceWorker)return;this.sender=new GR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cf();return await f0(e,Fc,"1"),await p0(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Au(s,!1).getAll();return new Ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sE.type="LOCAL";const rC=sE;new Oa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e){return e?zn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iC(t){return Qx(t.auth,new Hp(t),t.bypassAuthState)}function oC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),OR(n,new Hp(t),t.bypassAuthState)}async function aC(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),DR(n,new Hp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iC;case"linkViaPopup":case"linkViaRedirect":return aC;case"reauthViaPopup":case"reauthViaRedirect":return oC;default:hn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Oa(2e3,1e4);class ai extends iE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ai.currentPopupAction&&ai.currentPopupAction.cancel(),ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lC.get())};e()}}ai.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="pendingRedirect",ec=new Map;class uC extends iE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const r=await dC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dC(t,e){const n=pC(e),r=fC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function hC(t,e){ec.set(t._key(),e)}function fC(t){return zn(t._redirectPersistence)}function pC(t){return Zl(cC,t.config.apiKey,t.name)}async function mC(t,e,n=!1){if(Lt(t.app))return Promise.reject(Hn(t));const r=Ds(t),s=sC(r,e),o=await new uC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=10*60*1e3;class yC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gC&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t,e={}){return Xr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xC=/^https?/;async function EC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _C(t);for(const n of e)try{if(kC(n))return}catch{}hn(t,"unauthorized-domain")}function kC(t){const e=of(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xC.test(n))return!1;if(wC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Oa(3e4,6e4);function g0(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bC(t){return new Promise((e,n)=>{var s,i,o;function r(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(bn(t,"network-request-failed"))},timeout:TC.get()})}if((i=(s=In().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=In().gapi)!=null&&o.load)r();else{const l=gR("iframefcb");return In()[l]=()=>{gapi.load?r():n(bn(t,"network-request-failed"))},Hx(`${mR()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw tc=null,e})}let tc=null;function IC(t){return tc=tc||bC(t),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Oa(5e3,15e3),AC="__/auth/iframe",RC="emulator/auth/iframe",CC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mp(e,RC):`https://${t.config.authDomain}/${AC}`,r={apiKey:e.apiKey,appName:t.name,v:js},s=NC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Da(r).slice(1)}`}async function jC(t){const e=await IC(t),n=In().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:PC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),l=In().setTimeout(()=>{i(o)},SC.get());function c(){In().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OC=500,LC=600,VC="_blank",MC="http://localhost";class y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FC(t,e,n,r=OC,s=LC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...DC,width:r.toString(),height:s.toString(),top:i,left:o},u=ft().toLowerCase();n&&(l=Vx(u)?VC:n),Ox(u)&&(e=e||MC,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[_,k])=>`${g}${_}=${k},`,"");if(oR(u)&&l!=="_self")return UC(e||"",l),new y0(null);const p=window.open(e||"",l,f);J(p,t,"popup-blocked");try{p.focus()}catch{}return new y0(p)}function UC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__/auth/handler",$C="emulator/auth/handler",BC=encodeURIComponent("fac");async function v0(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:s};if(e instanceof Gx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",A2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Va){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),u=c?`#${BC}=${encodeURIComponent(c)}`:"";return`${HC(t)}?${Da(l).slice(1)}${u}`}function HC({config:t}){return t.emulator?Mp(t,$C):`https://${t.authDomain}/${zC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="webStorageSupport";class WC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eE,this._completeRedirectFn=mC,this._overrideRedirectResult=hC}async _openPopup(e,n,r,s){var o;Zn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await v0(e,n,r,of(),s);return FC(e,i,Bp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await v0(e,n,r,of(),s);return KR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jC(e),r=new yC(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yd,{type:Yd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Yd];i!==void 0&&n(!!i),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $x()||Lx()||Up()}}const qC=WC;var _0="@firebase/auth",w0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QC(t){bs(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(t)},u=new hR(r,s,i,c);return ER(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bs(new Fr("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(r=>new GC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(_0,w0,KC(t)),Tn(_0,w0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=5*60,JC=wx("authIdTokenMaxAge")||YC;let x0=null;const XC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JC)return;const s=n==null?void 0:n.token;x0!==s&&(x0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZC(t=Lp()){const e=bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xR(t,{popupRedirectResolver:qC,persistence:[rC,WR,eE]}),r=wx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=XC(i.toString());UR(n,o,()=>o(n.currentUser)),FR(n,l=>o(l))}}const s=yx("auth");return s&&kR(n,`http://${s}`),n}function eN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}fR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",eN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QC("Browser");var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,aE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function b(){}b.prototype=v.prototype,T.F=v.prototype,T.prototype=new b,T.prototype.constructor=T,T.D=function(C,R,P){for(var S=Array(arguments.length-2),we=2;we<arguments.length;we++)S[we-2]=arguments[we];return v.prototype[R].apply(C,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,b){b||(b=0);const C=Array(16);if(typeof v=="string")for(var R=0;R<16;++R)C[R]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(R=0;R<16;++R)C[R]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=T.g[0],b=T.g[1],R=T.g[2];let P=T.g[3],S;S=v+(P^b&(R^P))+C[0]+3614090360&4294967295,v=b+(S<<7&4294967295|S>>>25),S=P+(R^v&(b^R))+C[1]+3905402710&4294967295,P=v+(S<<12&4294967295|S>>>20),S=R+(b^P&(v^b))+C[2]+606105819&4294967295,R=P+(S<<17&4294967295|S>>>15),S=b+(v^R&(P^v))+C[3]+3250441966&4294967295,b=R+(S<<22&4294967295|S>>>10),S=v+(P^b&(R^P))+C[4]+4118548399&4294967295,v=b+(S<<7&4294967295|S>>>25),S=P+(R^v&(b^R))+C[5]+1200080426&4294967295,P=v+(S<<12&4294967295|S>>>20),S=R+(b^P&(v^b))+C[6]+2821735955&4294967295,R=P+(S<<17&4294967295|S>>>15),S=b+(v^R&(P^v))+C[7]+4249261313&4294967295,b=R+(S<<22&4294967295|S>>>10),S=v+(P^b&(R^P))+C[8]+1770035416&4294967295,v=b+(S<<7&4294967295|S>>>25),S=P+(R^v&(b^R))+C[9]+2336552879&4294967295,P=v+(S<<12&4294967295|S>>>20),S=R+(b^P&(v^b))+C[10]+4294925233&4294967295,R=P+(S<<17&4294967295|S>>>15),S=b+(v^R&(P^v))+C[11]+2304563134&4294967295,b=R+(S<<22&4294967295|S>>>10),S=v+(P^b&(R^P))+C[12]+1804603682&4294967295,v=b+(S<<7&4294967295|S>>>25),S=P+(R^v&(b^R))+C[13]+4254626195&4294967295,P=v+(S<<12&4294967295|S>>>20),S=R+(b^P&(v^b))+C[14]+2792965006&4294967295,R=P+(S<<17&4294967295|S>>>15),S=b+(v^R&(P^v))+C[15]+1236535329&4294967295,b=R+(S<<22&4294967295|S>>>10),S=v+(R^P&(b^R))+C[1]+4129170786&4294967295,v=b+(S<<5&4294967295|S>>>27),S=P+(b^R&(v^b))+C[6]+3225465664&4294967295,P=v+(S<<9&4294967295|S>>>23),S=R+(v^b&(P^v))+C[11]+643717713&4294967295,R=P+(S<<14&4294967295|S>>>18),S=b+(P^v&(R^P))+C[0]+3921069994&4294967295,b=R+(S<<20&4294967295|S>>>12),S=v+(R^P&(b^R))+C[5]+3593408605&4294967295,v=b+(S<<5&4294967295|S>>>27),S=P+(b^R&(v^b))+C[10]+38016083&4294967295,P=v+(S<<9&4294967295|S>>>23),S=R+(v^b&(P^v))+C[15]+3634488961&4294967295,R=P+(S<<14&4294967295|S>>>18),S=b+(P^v&(R^P))+C[4]+3889429448&4294967295,b=R+(S<<20&4294967295|S>>>12),S=v+(R^P&(b^R))+C[9]+568446438&4294967295,v=b+(S<<5&4294967295|S>>>27),S=P+(b^R&(v^b))+C[14]+3275163606&4294967295,P=v+(S<<9&4294967295|S>>>23),S=R+(v^b&(P^v))+C[3]+4107603335&4294967295,R=P+(S<<14&4294967295|S>>>18),S=b+(P^v&(R^P))+C[8]+1163531501&4294967295,b=R+(S<<20&4294967295|S>>>12),S=v+(R^P&(b^R))+C[13]+2850285829&4294967295,v=b+(S<<5&4294967295|S>>>27),S=P+(b^R&(v^b))+C[2]+4243563512&4294967295,P=v+(S<<9&4294967295|S>>>23),S=R+(v^b&(P^v))+C[7]+1735328473&4294967295,R=P+(S<<14&4294967295|S>>>18),S=b+(P^v&(R^P))+C[12]+2368359562&4294967295,b=R+(S<<20&4294967295|S>>>12),S=v+(b^R^P)+C[5]+4294588738&4294967295,v=b+(S<<4&4294967295|S>>>28),S=P+(v^b^R)+C[8]+2272392833&4294967295,P=v+(S<<11&4294967295|S>>>21),S=R+(P^v^b)+C[11]+1839030562&4294967295,R=P+(S<<16&4294967295|S>>>16),S=b+(R^P^v)+C[14]+4259657740&4294967295,b=R+(S<<23&4294967295|S>>>9),S=v+(b^R^P)+C[1]+2763975236&4294967295,v=b+(S<<4&4294967295|S>>>28),S=P+(v^b^R)+C[4]+1272893353&4294967295,P=v+(S<<11&4294967295|S>>>21),S=R+(P^v^b)+C[7]+4139469664&4294967295,R=P+(S<<16&4294967295|S>>>16),S=b+(R^P^v)+C[10]+3200236656&4294967295,b=R+(S<<23&4294967295|S>>>9),S=v+(b^R^P)+C[13]+681279174&4294967295,v=b+(S<<4&4294967295|S>>>28),S=P+(v^b^R)+C[0]+3936430074&4294967295,P=v+(S<<11&4294967295|S>>>21),S=R+(P^v^b)+C[3]+3572445317&4294967295,R=P+(S<<16&4294967295|S>>>16),S=b+(R^P^v)+C[6]+76029189&4294967295,b=R+(S<<23&4294967295|S>>>9),S=v+(b^R^P)+C[9]+3654602809&4294967295,v=b+(S<<4&4294967295|S>>>28),S=P+(v^b^R)+C[12]+3873151461&4294967295,P=v+(S<<11&4294967295|S>>>21),S=R+(P^v^b)+C[15]+530742520&4294967295,R=P+(S<<16&4294967295|S>>>16),S=b+(R^P^v)+C[2]+3299628645&4294967295,b=R+(S<<23&4294967295|S>>>9),S=v+(R^(b|~P))+C[0]+4096336452&4294967295,v=b+(S<<6&4294967295|S>>>26),S=P+(b^(v|~R))+C[7]+1126891415&4294967295,P=v+(S<<10&4294967295|S>>>22),S=R+(v^(P|~b))+C[14]+2878612391&4294967295,R=P+(S<<15&4294967295|S>>>17),S=b+(P^(R|~v))+C[5]+4237533241&4294967295,b=R+(S<<21&4294967295|S>>>11),S=v+(R^(b|~P))+C[12]+1700485571&4294967295,v=b+(S<<6&4294967295|S>>>26),S=P+(b^(v|~R))+C[3]+2399980690&4294967295,P=v+(S<<10&4294967295|S>>>22),S=R+(v^(P|~b))+C[10]+4293915773&4294967295,R=P+(S<<15&4294967295|S>>>17),S=b+(P^(R|~v))+C[1]+2240044497&4294967295,b=R+(S<<21&4294967295|S>>>11),S=v+(R^(b|~P))+C[8]+1873313359&4294967295,v=b+(S<<6&4294967295|S>>>26),S=P+(b^(v|~R))+C[15]+4264355552&4294967295,P=v+(S<<10&4294967295|S>>>22),S=R+(v^(P|~b))+C[6]+2734768916&4294967295,R=P+(S<<15&4294967295|S>>>17),S=b+(P^(R|~v))+C[13]+1309151649&4294967295,b=R+(S<<21&4294967295|S>>>11),S=v+(R^(b|~P))+C[4]+4149444226&4294967295,v=b+(S<<6&4294967295|S>>>26),S=P+(b^(v|~R))+C[11]+3174756917&4294967295,P=v+(S<<10&4294967295|S>>>22),S=R+(v^(P|~b))+C[2]+718787259&4294967295,R=P+(S<<15&4294967295|S>>>17),S=b+(P^(R|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const b=v-this.blockSize,C=this.C;let R=this.h,P=0;for(;P<v;){if(R==0)for(;P<=b;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<v;)if(C[R++]=T.charCodeAt(P++),R==this.blockSize){s(this,C),R=0;break}}else for(;P<v;)if(C[R++]=T[P++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var b=T.length-8;b<T.length;++b)T[b]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,b=0;b<4;++b)for(let C=0;C<32;C+=8)T[v++]=this.g[b]>>>C&255;return T};function i(T,v){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=v(T)}function o(T,v){this.h=v;const b=[];let C=!0;for(let R=T.length-1;R>=0;R--){const P=T[R]|0;C&&P==v||(b[R]=P,C=!1)}this.g=b}var l={};function c(T){return-128<=T&&T<128?i(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return A(u(-T));const v=[];let b=1;for(let C=0;T>=b;C++)v[C]=T/b|0,b*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return A(f(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(v,8));let C=p;for(let P=0;P<T.length;P+=8){var R=Math.min(8,T.length-P);const S=parseInt(T.substring(P,P+R),v);R<8?(R=u(Math.pow(v,R)),C=C.j(R).add(u(S))):(C=C.j(b),C=C.add(u(S)))}return C}var p=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(I(this))return-A(this).m();let T=0,v=1;for(let b=0;b<this.g.length;b++){const C=this.i(b);T+=(C>=0?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(k(this))return"0";if(I(this))return"-"+A(this).toString(T);const v=u(Math.pow(T,6));var b=this;let C="";for(;;){const R=j(b,v).g;b=w(b,R.j(v));let P=((b.g.length>0?b.g[0]:b.h)>>>0).toString(T);if(b=R,k(b))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function k(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=w(this,T),I(T)?-1:k(T)?0:1};function A(T){const v=T.g.length,b=[];for(let C=0;C<v;C++)b[C]=~T.g[C];return new o(b,~T.h).add(g)}t.abs=function(){return I(this)?A(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),b=[];let C=0;for(let R=0;R<=v;R++){let P=C+(this.i(R)&65535)+(T.i(R)&65535),S=(P>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);C=S>>>16,P&=65535,S&=65535,b[R]=S<<16|P}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(T,v){return T.add(A(v))}t.j=function(T){if(k(this)||k(T))return p;if(I(this))return I(T)?A(this).j(A(T)):A(A(this).j(T));if(I(T))return A(this.j(A(T)));if(this.l(_)<0&&T.l(_)<0)return u(this.m()*T.m());const v=this.g.length+T.g.length,b=[];for(var C=0;C<2*v;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(let R=0;R<T.g.length;R++){const P=this.i(C)>>>16,S=this.i(C)&65535,we=T.i(R)>>>16,st=T.i(R)&65535;b[2*C+2*R]+=S*st,y(b,2*C+2*R),b[2*C+2*R+1]+=P*st,y(b,2*C+2*R+1),b[2*C+2*R+1]+=S*we,y(b,2*C+2*R+1),b[2*C+2*R+2]+=P*we,y(b,2*C+2*R+2)}for(T=0;T<v;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=v;T<2*v;T++)b[T]=0;return new o(b,0)};function y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function E(T,v){this.g=T,this.h=v}function j(T,v){if(k(v))throw Error("division by zero");if(k(T))return new E(p,p);if(I(T))return v=j(A(T),v),new E(A(v.g),A(v.h));if(I(v))return v=j(T,A(v)),new E(A(v.g),v.h);if(T.g.length>30){if(I(T)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var b=g,C=v;C.l(T)<=0;)b=L(b),C=L(C);var R=U(b,1),P=U(C,1);for(C=U(C,2),b=U(b,2);!k(C);){var S=P.add(C);S.l(T)<=0&&(R=R.add(b),P=S),C=U(C,1),b=U(b,1)}return v=w(T,R.j(v)),new E(R,v)}for(R=p;T.l(v)>=0;){for(b=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=u(b),S=P.j(v);I(S)||S.l(T)>0;)b-=C,P=u(b),S=P.j(v);k(P)&&(P=g),R=R.add(P),T=w(T,S)}return new E(R,T)}t.B=function(T){return j(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)&T.i(C);return new o(b,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)|T.i(C);return new o(b,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)^T.i(C);return new o(b,this.h^T.h)};function L(T){const v=T.g.length+1,b=[];for(let C=0;C<v;C++)b[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(b,T.h)}function U(T,v){const b=v>>5;v%=32;const C=T.g.length-b,R=[];for(let P=0;P<C;P++)R[P]=v>0?T.i(P+b)>>>v|T.i(P+b+1)<<32-v:T.i(P+b);return new o(R,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Dr=o}).apply(typeof E0<"u"?E0:typeof self<"u"?self:typeof window<"u"?window:{});var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lE,Co,cE,nc,uf,uE,dE,hE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rl=="object"&&Rl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var x=0;x<a.length-1;x++){var D=a[x];if(!(D in m))break e;m=m[D]}a=a[a.length-1],x=m[a],h=h(x),h!=x&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var m=[],x;for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&m.push([x,h[x]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,m){return a.call.apply(a.bind,arguments)}function u(a,h,m){return u=c,u.apply(null,arguments)}function f(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),a.apply(this,x)}}function p(a,h){function m(){}m.prototype=h.prototype,a.Z=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(x,D,O){for(var $=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)$[ne-2]=arguments[ne];return h.prototype[D].apply(x,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const m=Array(h);for(let x=0;x<h;x++)m[x]=a[x];return m}return[]}function k(a,h){for(let x=1;x<arguments.length;x++){const D=arguments[x];var m=typeof D;if(m=m!="object"?m:D?Array.isArray(D)?"array":m:"null",m=="array"||m=="object"&&typeof D.length=="number"){m=a.length||0;const O=D.length||0;a.length=m+O;for(let $=0;$<O;$++)a[m+$]=D[$]}else a.push(D)}}class I{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(a){o.setTimeout(()=>{throw a},0)}function w(){var a=T;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,m){const x=E.get();x.set(h,m),this.h?this.h.next=x:this.g=x,this.h=x}}var E=new I(()=>new j,a=>a.reset());class j{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,T=new y,v=()=>{const a=Promise.resolve(void 0);L=()=>{a.then(b)}};function b(){for(var a;a=w();){try{a.h.call(a.g)}catch(m){A(m)}var h=E;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}U=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function we(a,h){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(we,R),we.prototype.init=function(a,h){const m=this.type=a.type,x=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),pt=0;function Nt(a,h,m,x,D){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!x,this.ha=D,this.key=++pt,this.da=this.fa=!1}function V(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Y(a,h,m){for(const x in a)h.call(m,a[x],x,a)}function te(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function fe(a){const h={};for(const m in a)h[m]=a[m];return h}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(a,h){let m,x;for(let D=1;D<arguments.length;D++){x=arguments[D];for(m in x)a[m]=x[m];for(let O=0;O<xe.length;O++)m=xe[O],Object.prototype.hasOwnProperty.call(x,m)&&(a[m]=x[m])}}function ge(a){this.src=a,this.g={},this.h=0}ge.prototype.add=function(a,h,m,x,D){const O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);const $=Et(a,h,x,D);return $>-1?(h=a[$],m||(h.fa=!1)):(h=new Nt(h,this.src,O,!!x,D),h.fa=m,a.push(h)),h};function Wt(a,h){const m=h.type;if(m in a.g){var x=a.g[m],D=Array.prototype.indexOf.call(x,h,void 0),O;(O=D>=0)&&Array.prototype.splice.call(x,D,1),O&&(V(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Et(a,h,m,x){for(let D=0;D<a.length;++D){const O=a[D];if(!O.da&&O.listener==h&&O.capture==!!m&&O.ha==x)return D}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),Ms={};function ns(a,h,m,x,D){if(Array.isArray(h)){for(let O=0;O<h.length;O++)ns(a,h[O],m,x,D);return null}return m=Om(m),a&&a[st]?a.J(h,m,l(x)?!!x.capture:!1,D):Fs(a,h,m,!1,x,D)}function Fs(a,h,m,x,D,O){if(!h)throw Error("Invalid event type");const $=l(D)?!!D.capture:!!D;let ne=Yu(a);if(ne||(a[pe]=ne=new ge(a)),m=ne.add(h,m,x,$,O),m.proxy)return m;if(x=Qi(),m.proxy=x,x.src=a,x.listener=m,a.addEventListener)P||(D=$),D===void 0&&(D=!1),a.addEventListener(h.toString(),x,D);else if(a.attachEvent)a.attachEvent(Dm(h.toString()),x);else if(a.addListener&&a.removeListener)a.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Qi(){function a(m){return h.call(a.src,a.listener,m)}const h=bk;return a}function rs(a,h,m,x,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)rs(a,h[O],m,x,D);else x=l(x)?!!x.capture:!!x,m=Om(m),a&&a[st]?(a=a.i,O=String(h).toString(),O in a.g&&(h=a.g[O],m=Et(h,m,x,D),m>-1&&(V(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete a.g[O],a.h--)))):a&&(a=Yu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Et(h,m,x,D)),(m=a>-1?h[a]:null)&&Qu(m))}function Qu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[st])Wt(h.i,a);else{var m=a.type,x=a.proxy;h.removeEventListener?h.removeEventListener(m,x,a.capture):h.detachEvent?h.detachEvent(Dm(m),x):h.addListener&&h.removeListener&&h.removeListener(x),(m=Yu(h))?(Wt(m,a),m.h==0&&(m.src=null,h[pe]=null)):V(a)}}}function Dm(a){return a in Ms?Ms[a]:Ms[a]="on"+a}function bk(a,h){if(a.da)a=!0;else{h=new we(h,this);const m=a.listener,x=a.ha||a.src;a.fa&&Qu(a),a=m.call(x,h)}return a}function Yu(a){return a=a[pe],a instanceof ge?a:null}var Ju="__closure_events_fn_"+(Math.random()*1e9>>>0);function Om(a){return typeof a=="function"?a:(a[Ju]||(a[Ju]=function(h){return a.handleEvent(h)}),a[Ju])}function it(){C.call(this),this.i=new ge(this),this.M=this,this.G=null}p(it,C),it.prototype[st]=!0,it.prototype.removeEventListener=function(a,h,m,x){rs(this,a,h,m,x)};function mt(a,h){var m,x=a.G;if(x)for(m=[];x;x=x.G)m.push(x);if(a=a.M,x=h.type||h,typeof h=="string")h=new R(h,a);else if(h instanceof R)h.target=h.target||a;else{var D=h;h=new R(x,a),Se(h,D)}D=!0;let O,$;if(m)for($=m.length-1;$>=0;$--)O=h.g=m[$],D=Xa(O,x,!0,h)&&D;if(O=h.g=a,D=Xa(O,x,!0,h)&&D,D=Xa(O,x,!1,h)&&D,m)for($=0;$<m.length;$++)O=h.g=m[$],D=Xa(O,x,!1,h)&&D}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const m=a.g[h];for(let x=0;x<m.length;x++)V(m[x]);delete a.g[h],a.h--}}this.G=null},it.prototype.J=function(a,h,m,x){return this.i.add(String(a),h,!1,m,x)},it.prototype.K=function(a,h,m,x){return this.i.add(String(a),h,!0,m,x)};function Xa(a,h,m,x){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let O=0;O<h.length;++O){const $=h[O];if($&&!$.da&&$.capture==m){const ne=$.listener,Be=$.ha||$.src;$.fa&&Wt(a.i,$),D=ne.call(Be,x)!==!1&&D}}return D&&!x.defaultPrevented}function Ik(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Lm(a){a.g=Ik(()=>{a.g=null,a.i&&(a.i=!1,Lm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Sk extends C{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Lm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(a){C.call(this),this.h=a,this.g={}}p(Yi,C);var Vm=[];function Mm(a){Y(a.g,function(h,m){this.g.hasOwnProperty(m)&&Qu(h)},a),a.g={}}Yi.prototype.N=function(){Yi.Z.N.call(this),Mm(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xu=o.JSON.stringify,Ak=o.JSON.parse,Rk=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Fm(){}function Um(){}var Ji={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zu(){R.call(this,"d")}p(Zu,R);function ed(){R.call(this,"c")}p(ed,R);var ss={},zm=null;function Za(){return zm=zm||new it}ss.Ia="serverreachability";function $m(a){R.call(this,ss.Ia,a)}p($m,R);function Xi(a){const h=Za();mt(h,new $m(h))}ss.STAT_EVENT="statevent";function Bm(a,h){R.call(this,ss.STAT_EVENT,a),this.stat=h}p(Bm,R);function gt(a){const h=Za();mt(h,new Bm(h,a))}ss.Ja="timingevent";function Hm(a,h){R.call(this,ss.Ja,a),this.size=h}p(Hm,R);function Zi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function eo(){this.g=!0}eo.prototype.ua=function(){this.g=!1};function Ck(a,h,m,x,D,O){a.info(function(){if(a.g)if(O){var $="",ne=O.split("&");for(let me=0;me<ne.length;me++){var Be=ne[me].split("=");if(Be.length>1){const Ke=Be[0];Be=Be[1];const gn=Ke.split("_");$=gn.length>=2&&gn[1]=="type"?$+(Ke+"="+Be+"&"):$+(Ke+"=redacted&")}}}else $=null;else $=O;return"XMLHTTP REQ ("+x+") [attempt "+D+"]: "+h+`
`+m+`
`+$})}function Nk(a,h,m,x,D,O,$){a.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+D+"]: "+h+`
`+m+`
`+O+" "+$})}function Us(a,h,m,x){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+jk(a,m)+(x?" "+x:"")})}function Pk(a,h){a.info(function(){return"TIMEOUT: "+h})}eo.prototype.info=function(){};function jk(a,h){if(!a.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(a=0;a<O.length;a++)if(Array.isArray(O[a])){var m=O[a];if(!(m.length<2)){var x=m[1];if(Array.isArray(x)&&!(x.length<1)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(let $=1;$<x.length;$++)x[$]=""}}}}return Xu(O)}catch{return h}}var el={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qm;function td(){}p(td,Fm),td.prototype.g=function(){return new XMLHttpRequest},qm=new td;function to(a){return encodeURIComponent(String(a))}function Dk(a){var h=1;a=a.split(":");const m=[];for(;h>0&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function sr(a,h,m,x){this.j=a,this.i=h,this.l=m,this.S=x||1,this.V=new Yi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gm}function Gm(){this.i=null,this.g="",this.h=!1}var Km={},nd={};function rd(a,h,m){a.M=1,a.A=nl(mn(h)),a.u=m,a.R=!0,Qm(a,null)}function Qm(a,h){a.F=Date.now(),tl(a),a.B=mn(a.A);var m=a.B,x=a.S;Array.isArray(x)||(x=[String(x)]),lg(m.i,"t",x),a.C=0,m=a.j.L,a.h=new Gm,a.g=Ig(a.j,m?h:null,!a.u),a.P>0&&(a.O=new Sk(u(a.Y,a,a.g),a.P)),h=a.V,m=a.g,x=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(Vm[0]=D.toString()),D=Vm);for(let O=0;O<D.length;O++){const $=ns(m,D[O],x||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.J?fe(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Xi(),Ck(a.i,a.v,a.B,a.l,a.S,a.u)}sr.prototype.ba=function(a){a=a.target;const h=this.O;h&&ar(a)==3?h.j():this.Y(a)},sr.prototype.Y=function(a){try{if(a==this.g)e:{const ne=ar(this.g),Be=this.g.ya(),me=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||mg(this.g)))){this.K||ne!=4||Be==7||(Be==8||me<=0?Xi(3):Xi(2)),sd(this);var h=this.g.ca();this.X=h;var m=Ok(this);if(this.o=h==200,Nk(this.i,this.v,this.B,this.l,this.S,ne,h),this.o){if(this.U&&!this.L){t:{if(this.g){var x,D=this.g;if((x=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(x)){var O=x;break t}}O=null}if(a=O)Us(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,id(this,a);else{this.o=!1,this.m=3,gt(12),is(this),no(this);break e}}if(this.R){a=!0;let Ke;for(;!this.K&&this.C<m.length;)if(Ke=Lk(this,m),Ke==nd){ne==4&&(this.m=4,gt(14),a=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Km){this.m=4,gt(15),Us(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else Us(this.i,this.l,Ke,null),id(this,Ke);if(Ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||m.length!=0||this.h.h||(this.m=1,gt(16),a=!1),this.o=this.o&&a,!a)Us(this.i,this.l,m,"[Invalid Chunked Response]"),is(this),no(this);else if(m.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),fd($),$.P=!0,gt(11))}}else Us(this.i,this.l,m,null),id(this,m);ne==4&&is(this),this.o&&!this.K&&(ne==4?Eg(this.j,this):(this.o=!1,tl(this)))}else Yk(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),is(this),no(this)}}}catch{}finally{}};function Ok(a){if(!Ym(a))return a.g.la();const h=mg(a.g);if(h==="")return"";let m="";const x=h.length,D=ar(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return is(a),no(a),"";a.h.i=new o.TextDecoder}for(let O=0;O<x;O++)a.h.h=!0,m+=a.h.i.decode(h[O],{stream:!(D&&O==x-1)});return h.length=0,a.h.g+=m,a.C=0,a.h.g}function Ym(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Lk(a,h){var m=a.C,x=h.indexOf(`
`,m);return x==-1?nd:(m=Number(h.substring(m,x)),isNaN(m)?Km:(x+=1,x+m>h.length?nd:(h=h.slice(x,x+m),a.C=x+m,h)))}sr.prototype.cancel=function(){this.K=!0,is(this)};function tl(a){a.T=Date.now()+a.H,Jm(a,a.H)}function Jm(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Zi(u(a.aa,a),h)}function sd(a){a.D&&(o.clearTimeout(a.D),a.D=null)}sr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Pk(this.i,this.B),this.M!=2&&(Xi(),gt(17)),is(this),this.m=2,no(this)):Jm(this,this.T-a)};function no(a){a.j.I==0||a.K||Eg(a.j,a)}function is(a){sd(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Mm(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function id(a,h){try{var m=a.j;if(m.I!=0&&(m.g==a||od(m.h,a))){if(!a.L&&od(m.h,a)&&m.I==3){try{var x=m.Ba.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var D=x;if(D[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)al(m),il(m);else break e;hd(m),gt(18)}}else m.xa=D[1],0<m.xa-m.K&&D[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Zi(u(m.Va,m),6e3));eg(m.h)<=1&&m.ta&&(m.ta=void 0)}else as(m,11)}else if((a.L||m.g==a)&&al(m),!S(h))for(D=m.Ba.g.parse(h),h=0;h<D.length;h++){let me=D[h];const Ke=me[0];if(!(Ke<=m.K))if(m.K=Ke,me=me[1],m.I==2)if(me[0]=="c"){m.M=me[1],m.ba=me[2];const gn=me[3];gn!=null&&(m.ka=gn,m.j.info("VER="+m.ka));const ls=me[4];ls!=null&&(m.za=ls,m.j.info("SVER="+m.za));const lr=me[5];lr!=null&&typeof lr=="number"&&lr>0&&(x=1.5*lr,m.O=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const cr=a.g;if(cr){const cl=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var O=x.h;O.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ad(O,O.h),O.h=null))}if(x.G){const pd=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(x.wa=pd,Ee(x.J,x.G,pd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),x=m;var $=a;if(x.na=bg(x,x.L?x.ba:null,x.W),$.L){tg(x.h,$);var ne=$,Be=x.O;Be&&(ne.H=Be),ne.D&&(sd(ne),tl(ne)),x.g=$}else wg(x);m.i.length>0&&ol(m)}else me[0]!="stop"&&me[0]!="close"||as(m,7);else m.I==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?as(m,7):dd(m):me[0]!="noop"&&m.l&&m.l.qa(me),m.A=0)}}Xi(4)}catch{}}var Vk=class{constructor(a,h){this.g=a,this.map=h}};function Xm(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function eg(a){return a.h?1:a.g?a.g.size:0}function od(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ad(a,h){a.g?a.g.add(h):a.h=h}function tg(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Xm.prototype.cancel=function(){if(this.i=ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ng(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.G);return h}return _(a.i)}var rg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mk(a,h){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const x=a[m].indexOf("=");let D,O=null;x>=0?(D=a[m].substring(0,x),O=a[m].substring(x+1)):D=a[m],h(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ir(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof ir?(this.l=a.l,ro(this,a.j),this.o=a.o,this.g=a.g,so(this,a.u),this.h=a.h,ld(this,cg(a.i)),this.m=a.m):a&&(h=String(a).match(rg))?(this.l=!1,ro(this,h[1]||"",!0),this.o=io(h[2]||""),this.g=io(h[3]||"",!0),so(this,h[4]),this.h=io(h[5]||"",!0),ld(this,h[6]||"",!0),this.m=io(h[7]||"")):(this.l=!1,this.i=new ao(null,this.l))}ir.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(oo(h,sg,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(oo(h,sg,!0),"@"),a.push(to(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(oo(m,m.charAt(0)=="/"?zk:Uk,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",oo(m,Bk)),a.join("")},ir.prototype.resolve=function(a){const h=mn(this);let m=!!a.j;m?ro(h,a.j):m=!!a.o,m?h.o=a.o:m=!!a.g,m?h.g=a.g:m=a.u!=null;var x=a.h;if(m)so(h,a.u);else if(m=!!a.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var D=h.h.lastIndexOf("/");D!=-1&&(x=h.h.slice(0,D+1)+x)}if(D=x,D==".."||D==".")x="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){x=D.lastIndexOf("/",0)==0,D=D.split("/");const O=[];for(let $=0;$<D.length;){const ne=D[$++];ne=="."?x&&$==D.length&&O.push(""):ne==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),x&&$==D.length&&O.push("")):(O.push(ne),x=!0)}x=O.join("/")}else x=D}return m?h.h=x:m=a.i.toString()!=="",m?ld(h,cg(a.i)):m=!!a.m,m&&(h.m=a.m),h};function mn(a){return new ir(a)}function ro(a,h,m){a.j=m?io(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function so(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function ld(a,h,m){h instanceof ao?(a.i=h,Hk(a.i,a.l)):(m||(h=oo(h,$k)),a.i=new ao(h,a.l))}function Ee(a,h,m){a.i.set(h,m)}function nl(a){return Ee(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function io(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oo(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,Fk),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Fk(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var sg=/[#\/\?@]/g,Uk=/[#\?:]/g,zk=/[#\?]/g,$k=/[#\?@]/g,Bk=/#/g;function ao(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function os(a){a.g||(a.g=new Map,a.h=0,a.i&&Mk(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=ao.prototype,t.add=function(a,h){os(this),this.i=null,a=zs(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function ig(a,h){os(a),h=zs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function og(a,h){return os(a),h=zs(a,h),a.g.has(h)}t.forEach=function(a,h){os(this),this.g.forEach(function(m,x){m.forEach(function(D){a.call(h,D,x,this)},this)},this)};function ag(a,h){os(a);let m=[];if(typeof h=="string")og(a,h)&&(m=m.concat(a.g.get(zs(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)m=m.concat(a[h]);return m}t.set=function(a,h){return os(this),this.i=null,a=zs(this,a),og(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=ag(this,a),a.length>0?String(a[0]):h):h};function lg(a,h,m){ig(a,h),m.length>0&&(a.i=null,a.g.set(zs(a,h),_(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let x=0;x<h.length;x++){var m=h[x];const D=to(m);m=ag(this,m);for(let O=0;O<m.length;O++){let $=D;m[O]!==""&&($+="="+to(m[O])),a.push($)}}return this.i=a.join("&")};function cg(a){const h=new ao;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function zs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Hk(a,h){h&&!a.j&&(os(a),a.i=null,a.g.forEach(function(m,x){const D=x.toLowerCase();x!=D&&(ig(this,x),lg(this,D,m))},a)),a.j=h}function Wk(a,h){const m=new eo;if(o.Image){const x=new Image;x.onload=f(or,m,"TestLoadImage: loaded",!0,h,x),x.onerror=f(or,m,"TestLoadImage: error",!1,h,x),x.onabort=f(or,m,"TestLoadImage: abort",!1,h,x),x.ontimeout=f(or,m,"TestLoadImage: timeout",!1,h,x),o.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=a}else h(!1)}function qk(a,h){const m=new eo,x=new AbortController,D=setTimeout(()=>{x.abort(),or(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:x.signal}).then(O=>{clearTimeout(D),O.ok?or(m,"TestPingServer: ok",!0,h):or(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),or(m,"TestPingServer: error",!1,h)})}function or(a,h,m,x,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),x(m)}catch{}}function Gk(){this.g=new Rk}function cd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(cd,Fm),cd.prototype.g=function(){return new rl(this.i,this.h)};function rl(a,h){it.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(rl,it),t=rl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,co(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ug(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function ug(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?lo(this):co(this),this.readyState==3&&ug(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,lo(this))},t.Na=function(a){this.g&&(this.response=a,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(a){a.readyState=4,a.l=null,a.j=null,a.B=null,co(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function co(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function dg(a){let h="";return Y(a,function(m,x){h+=x,h+=":",h+=m,h+=`\r
`}),h}function ud(a,h,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=dg(m),typeof a=="string"?m!=null&&to(m):Ee(a,h,m))}function je(a){it.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(je,it);var Kk=/^https?$/i,Qk=["POST","PUT"];t=je.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qm.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){hg(this,O);return}if(a=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var D in x)m.set(D,x[D]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())m.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),D=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Qk,h,void 0)>=0)||x||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of m)this.g.setRequestHeader(O,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(O){hg(this,O)}};function hg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,fg(a),sl(a)}function fg(a){a.A||(a.A=!0,mt(a,"complete"),mt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,mt(this,"complete"),mt(this,"abort"),sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pg(this):this.Xa())},t.Xa=function(){pg(this)};function pg(a){if(a.h&&typeof i<"u"){if(a.v&&ar(a)==4)setTimeout(a.Ca.bind(a),0);else if(mt(a,"readystatechange"),ar(a)==4){a.h=!1;try{const O=a.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var x;if(x=O===0){let $=String(a.D).match(rg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),x=!Kk.test($?$.toLowerCase():"")}m=x}if(m)mt(a,"complete"),mt(a,"success");else{a.o=6;try{var D=ar(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",fg(a)}}finally{sl(a)}}}}function sl(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,h||mt(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ar(a){return a.g?a.g.readyState:0}t.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Ak(h)}};function mg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Yk(a){const h={};a=(a.g&&ar(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<a.length;x++){if(S(a[x]))continue;var m=Dk(a[x]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=h[D]||[];h[D]=O,O.push(m)}te(h,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function gg(a){this.za=0,this.i=[],this.j=new eo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,a),this.Za=uo("retryDelaySeedMs",1e4,a),this.Ta=uo("forwardChannelMaxRetries",2,a),this.va=uo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Xm(a&&a.concurrentRequestLimit),this.Ba=new Gk,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=gg.prototype,t.ka=8,t.I=1,t.connect=function(a,h,m,x){gt(0),this.W=a,this.H=h||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.J=bg(this,null,this.W),ol(this)};function dd(a){if(yg(a),a.I==3){var h=a.V++,m=mn(a.J);if(Ee(m,"SID",a.M),Ee(m,"RID",h),Ee(m,"TYPE","terminate"),ho(a,m),h=new sr(a,a.j,h),h.M=2,h.A=nl(mn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=Ig(h.j,null),h.g.ea(h.A)),h.F=Date.now(),tl(h)}Tg(a)}function il(a){a.g&&(fd(a),a.g.cancel(),a.g=null)}function yg(a){il(a),a.v&&(o.clearTimeout(a.v),a.v=null),al(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ol(a){if(!Zm(a.h)&&!a.m){a.m=!0;var h=a.Ea;L||v(),U||(L(),U=!0),T.add(h,a),a.D=0}}function Jk(a,h){return eg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Zi(u(a.Ea,a,h),kg(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const D=new sr(this,this.j,a);let O=this.o;if(this.U&&(O?(O=fe(O),Se(O,this.U)):O=this.U),this.u!==null||this.R||(D.J=O,O=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=_g(this,D,h),m=mn(this.J),Ee(m,"RID",a),Ee(m,"CVER",22),this.G&&Ee(m,"X-HTTP-Session-Id",this.G),ho(this,m),O&&(this.R?h="headers="+to(dg(O))+"&"+h:this.u&&ud(m,this.u,O)),ad(this.h,D),this.Ra&&Ee(m,"TYPE","init"),this.S?(Ee(m,"$req",h),Ee(m,"SID","null"),D.U=!0,rd(D,m,null)):rd(D,m,h),this.I=2}}else this.I==3&&(a?vg(this,a):this.i.length==0||Zm(this.h)||vg(this))};function vg(a,h){var m;h?m=h.l:m=a.V++;const x=mn(a.J);Ee(x,"SID",a.M),Ee(x,"RID",m),Ee(x,"AID",a.K),ho(a,x),a.u&&a.o&&ud(x,a.u,a.o),m=new sr(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),h&&(a.i=h.G.concat(a.i)),h=_g(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ad(a.h,m),rd(m,x,h)}function ho(a,h){a.H&&Y(a.H,function(m,x){Ee(h,x,m)}),a.l&&Y({},function(m,x){Ee(h,x,m)})}function _g(a,h,m){m=Math.min(a.i.length,m);const x=a.l?u(a.l.Ka,a.l,a):null;e:{var D=a.i;let ne=-1;for(;;){const Be=["count="+m];ne==-1?m>0?(ne=D[0].g,Be.push("ofs="+ne)):ne=0:Be.push("ofs="+ne);let me=!0;for(let Ke=0;Ke<m;Ke++){var O=D[Ke].g;const gn=D[Ke].map;if(O-=ne,O<0)ne=Math.max(0,D[Ke].g-100),me=!1;else try{O="req"+O+"_"||"";try{var $=gn instanceof Map?gn:Object.entries(gn);for(const[ls,lr]of $){let cr=lr;l(lr)&&(cr=Xu(lr)),Be.push(O+ls+"="+encodeURIComponent(cr))}}catch(ls){throw Be.push(O+"type="+encodeURIComponent("_badmap")),ls}}catch{x&&x(gn)}}if(me){$=Be.join("&");break e}}$=void 0}return a=a.i.splice(0,m),h.G=a,$}function wg(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;L||v(),U||(L(),U=!0),T.add(h,a),a.A=0}}function hd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Zi(u(a.Da,a),kg(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,xg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Zi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),il(this),xg(this))};function fd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function xg(a){a.g=new sr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=mn(a.na);Ee(h,"RID","rpc"),Ee(h,"SID",a.M),Ee(h,"AID",a.K),Ee(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ee(h,"TO",a.ia),Ee(h,"TYPE","xmlhttp"),ho(a,h),a.u&&a.o&&ud(h,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=nl(mn(h)),m.u=null,m.R=!0,Qm(m,a)}t.Va=function(){this.C!=null&&(this.C=null,il(this),hd(this),gt(19))};function al(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Eg(a,h){var m=null;if(a.g==h){al(a),fd(a),a.g=null;var x=2}else if(od(a.h,h))m=h.G,tg(a.h,h),x=1;else return;if(a.I!=0){if(h.o)if(x==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var D=a.D;x=Za(),mt(x,new Hm(x,m)),ol(a)}else wg(a);else if(D=h.m,D==3||D==0&&h.X>0||!(x==1&&Jk(a,h)||x==2&&hd(a)))switch(m&&m.length>0&&(h=a.h,h.i=h.i.concat(m)),D){case 1:as(a,5);break;case 4:as(a,10);break;case 3:as(a,6);break;default:as(a,2)}}}function kg(a,h){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*h}function as(a,h){if(a.j.info("Error code "+h),h==2){var m=u(a.bb,a),x=a.Ua;const D=!x;x=new ir(x||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ro(x,"https"),nl(x),D?Wk(x.toString(),m):qk(x.toString(),m)}else gt(2);a.I=0,a.l&&a.l.pa(h),Tg(a),yg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Tg(a){if(a.I=0,a.ja=[],a.l){const h=ng(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ja,h),k(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function bg(a,h,m){var x=m instanceof ir?mn(m):new ir(m);if(x.g!="")h&&(x.g=h+"."+x.g),so(x,x.u);else{var D=o.location;x=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const O=new ir(null);x&&ro(O,x),h&&(O.g=h),D&&so(O,D),m&&(O.h=m),x=O}return m=a.G,h=a.wa,m&&h&&Ee(x,m,h),Ee(x,"VER",a.ka),ho(a,x),x}function Ig(a,h,m){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new je(new cd({ab:m})):new je(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sg(){}t=Sg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ll(){}ll.prototype.g=function(a,h){return new Pt(a,h)};function Pt(a,h){it.call(this),this.g=new gg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!S(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!S(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new $s(this)}p(Pt,it),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){dd(this.g)},Pt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=Xu(a),a=m);h.i.push(new Vk(h.Ya++,a)),h.I==3&&ol(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,dd(this.g),delete this.g,Pt.Z.N.call(this)};function Ag(a){Zu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Ag,Zu);function Rg(){ed.call(this),this.status=1}p(Rg,ed);function $s(a){this.g=a}p($s,Sg),$s.prototype.ra=function(){mt(this.g,"a")},$s.prototype.qa=function(a){mt(this.g,new Ag(a))},$s.prototype.pa=function(a){mt(this.g,new Rg)},$s.prototype.oa=function(){mt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,hE=function(){return new ll},dE=function(){return Za()},uE=ss,uf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,nc=el,Wm.COMPLETE="complete",cE=Wm,Um.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",it.prototype.listen=it.prototype.J,Co=Um,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,lE=je}).apply(typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi="12.9.0";function tN(t){Bi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Dp("@firebase/firestore");function Ws(){return As.logLevel}function H(t,...e){if(As.logLevel<=oe.DEBUG){const n=e.map(Wp);As.debug(`Firestore (${Bi}): ${t}`,...n)}}function er(t,...e){if(As.logLevel<=oe.ERROR){const n=e.map(Wp);As.error(`Firestore (${Bi}): ${t}`,...n)}}function Ur(t,...e){if(As.logLevel<=oe.WARN){const n=e.map(Wp);As.warn(`Firestore (${Bi}): ${t}`,...n)}}function Wp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fE(t,r,n)}function fE(t,e,n){let r=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw er(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||fE(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class nN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rN{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new pE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new ct(e)}}class sN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class iN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new k0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new k0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function df(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Jd(s)===Jd(i)?ae(s,i):Jd(s)?1:-1}return ae(t.length,e.length)}const lN=55296,cN=57343;function Jd(t){const e=t.charCodeAt(0);return e>=lN&&e<=cN}function Si(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=_n.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),s=_n.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?_n.extractNumericId(e).compare(_n.extractNumericId(n)):df(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class ye extends _n{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const uN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends _n{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return uN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T0}static keyField(){return new Je([T0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ye.fromString(e))}static fromName(e){return new K(ye.fromString(e).popFirst(5))}static empty(){return new K(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yE(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b0(t){if(!K.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I0(t){if(K.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function _t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cu(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fa(t,e){if(!vE(t))throw new B(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=-62135596800,A0=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*A0);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S0)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fa(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:ze("string",ve._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new ve(0,0))}static max(){return new Z(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=-1;function dN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new zr(s,K.empty(),e)}function hN(t){return new zr(t.readTime,t.key,ya)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(Z.min(),K.empty(),ya)}static max(){return new zr(Z.max(),K.empty(),ya)}}function fN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==pN)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(f=>{o[u]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function gN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function Pu(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function yN(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="";function vN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R0(e)),e=_N(t.get(n),e);return R0(e)}function _N(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _E:n+="";break;default:n+=i}}return n}function R0(t){return t+_E+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Ge(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xE("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const wN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=wN.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="server_timestamp",kE="__type__",TE="__previous_value__",bE="__local_write_time__";function Gp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kE])==null?void 0:r.stringValue)===EE}function ju(t){const e=t.mapValue.fields[TE];return Gp(e)?ju(e):e}function va(t){const e=$r(t.mapValue.fields[bE].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,r,s,i,o,l,c,u,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=p}}const $c="(default)";class Ai{constructor(e,n){this.projectId=e,this.database=n||$c}static empty(){return new Ai("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}function EN(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__type__",kN="__max__",Nl={mapValue:{}},SE="__vector__",Bc="value";function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gp(t)?4:bN(t)?9007199254740991:TN(t)?10:11:X(28295,{value:t})}function Rn(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return va(t).isEqual(va(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=$r(s.timestampValue),l=$r(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Br(s.bytesValue).isEqual(Br(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),l=Le(i.doubleValue);return o===l?zc(o)===zc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Si(t.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(C0(o)!==C0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Rn(o[c],l[c])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function _a(t,e){return(t.values||[]).find(n=>Rn(n,e))!==void 0}function Ri(t,e){if(t===e)return 0;const n=Hr(t),r=Hr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Le(i.integerValue||i.doubleValue),c=Le(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return P0(t.timestampValue,e.timestampValue);case 4:return P0(va(t),va(e));case 5:return df(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Br(i),c=Br(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const f=ae(l[u],c[u]);if(f!==0)return f}return ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(Le(i.latitude),Le(o.latitude));return l!==0?l:ae(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return j0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,_,k,I;const l=i.fields||{},c=o.fields||{},u=(g=l[Bc])==null?void 0:g.arrayValue,f=(_=c[Bc])==null?void 0:_.arrayValue,p=ae(((k=u==null?void 0:u.values)==null?void 0:k.length)||0,((I=f==null?void 0:f.values)==null?void 0:I.length)||0);return p!==0?p:j0(u,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Nl.mapValue&&o===Nl.mapValue)return 0;if(i===Nl.mapValue)return 1;if(o===Nl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=df(c[p],f[p]);if(g!==0)return g;const _=Ri(l[c[p]],u[f[p]]);if(_!==0)return _}return ae(c.length,f.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function P0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=$r(t),r=$r(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function j0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ri(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Ci(t){return hf(t)}function hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$r(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hf(n.fields[o])}`;return s+"}"}(t.mapValue):X(61005,{value:t})}function rc(t){switch(Hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ju(t);return e?16+rc(e):16;case 5:return 2*t.stringValue.length;case 6:return Br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+rc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Zr(r.fields,(i,o)=>{s+=i.length+rc(o)}),s}(t.mapValue);default:throw X(13486,{value:t})}}function D0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ff(t){return!!t&&"integerValue"in t}function Kp(t){return!!t&&"arrayValue"in t}function O0(t){return!!t&&"nullValue"in t}function L0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sc(t){return!!t&&"mapValue"in t}function TN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[IE])==null?void 0:r.stringValue)===SE}function Wo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wo(t.arrayValue.values[n]);return e}return{...t}}function bN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Wo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());sc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(Wo(this.value))}}function AE(t){const e=[];return Zr(t.fields,(n,r)=>{const s=new Je([n]);if(sc(r)){const i=AE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,Z.min(),Z.min(),Z.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,Z.min(),Z.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,Z.min(),Z.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function V0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function M0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function IN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{}class Ue extends RE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AN(e,n,r):n==="array-contains"?new NN(e,r):n==="in"?new PN(e,r):n==="not-in"?new jN(e,r):n==="array-contains-any"?new DN(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RN(e,r):new CN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ri(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends RE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fn(e,n)}matches(e){return CE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CE(t){return t.op==="and"}function NE(t){return SN(t)&&CE(t)}function SN(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function pf(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(NE(t))return t.filters.map(e=>pf(e)).join(",");{const e=t.filters.map(n=>pf(n)).join(",");return`${t.op}(${e})`}}function PE(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&Rn(r.value,s.value)}(t,e):t instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&PE(o,s.filters[l]),!0):!1}(t,e):void X(19439)}function jE(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(jE).join(" ,")+"}"}(t):"Filter"}class AN extends Ue{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class RN extends Ue{constructor(e,n){super(e,"in",n),this.keys=DE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CN extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=DE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class NN extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kp(n)&&_a(n.arrayValue,this.value)}}class PN extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_a(this.value.arrayValue,n)}}class jN extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_a(this.value.arrayValue,n)}}class DN extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function F0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ON(t,e,n,r,s,i,o)}function Qp(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.Te=n}return e.Te}function Yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M0(t.startAt,e.startAt)&&M0(t.endAt,e.endAt)}function mf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function LN(t,e,n,r,s,i,o,l){return new Ua(t,e,n,r,s,i,o,l)}function Du(t){return new Ua(t)}function U0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VN(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function OE(t){return t.collectionGroup!==null}function qo(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ge(Je.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wc(i,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new Wc(Je.keyField(),r))}return e.Ie}function Sn(t){const e=ee(t);return e.Ee||(e.Ee=MN(e,qo(t))),e.Ee}function MN(t,e){if(t.limitType==="F")return F0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wc(s.field,i)});const n=t.endAt?new Hc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hc(t.startAt.position,t.startAt.inclusive):null;return F0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gf(t,e){const n=t.filters.concat([e]);return new Ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yf(t,e,n){return new Ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ou(t,e){return Yp(Sn(t),Sn(e))&&t.limitType===e.limitType}function LE(t){return`${Qp(Sn(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jE(s)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ci(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Lu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of qo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=V0(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,qo(r),s)||r.endAt&&!function(o,l,c){const u=V0(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,qo(r),s))}(t,e)}function FN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VE(t){return(e,n)=>{let r=!1;for(const s of qo(t)){const i=UN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function UN(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Ri(c,u):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Pe(K.comparator);function tr(){return zN}const ME=new Pe(K.comparator);function No(...t){let e=ME;for(const n of t)e=e.insert(n.key,n);return e}function FE(t){let e=ME;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Go()}function UE(){return Go()}function Go(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const $N=new Pe(K.comparator),BN=new Ge(K.comparator);function le(...t){let e=BN;for(const n of t)e=e.add(n);return e}const HN=new Ge(ae);function WN(){return HN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function zE(t){return{integerValue:""+t}}function qN(t,e){return yN(e)?zE(e):Jp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(){this._=void 0}}function GN(t,e,n){return t instanceof wa?function(s,i){const o={fields:{[kE]:{stringValue:EE},[bE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gp(i)&&(i=ju(i)),i&&(o.fields[TE]=i),{mapValue:o}}(n,e):t instanceof xa?BE(t,e):t instanceof Ea?HE(t,e):function(s,i){const o=$E(s,i),l=z0(o)+z0(s.Ae);return ff(o)&&ff(s.Ae)?zE(l):Jp(s.serializer,l)}(t,e)}function KN(t,e,n){return t instanceof xa?BE(t,e):t instanceof Ea?HE(t,e):n}function $E(t,e){return t instanceof qc?function(r){return ff(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class wa extends Vu{}class xa extends Vu{constructor(e){super(),this.elements=e}}function BE(t,e){const n=WE(e);for(const r of t.elements)n.some(s=>Rn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Vu{constructor(e){super(),this.elements=e}}function HE(t,e){let n=WE(e);for(const r of t.elements)n=n.filter(s=>!Rn(s,r));return{arrayValue:{values:n}}}class qc extends Vu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function z0(t){return Le(t.integerValue||t.doubleValue)}function WE(t){return Kp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.field=e,this.transform=n}}function YN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof xa&&s instanceof xa||r instanceof Ea&&s instanceof Ea?Si(r.elements,s.elements,Rn):r instanceof qc&&s instanceof qc?Rn(r.Ae,s.Ae):r instanceof wa&&s instanceof wa}(t.transform,e.transform)}class JN{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mu{}function qE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xp(t.key,Yt.none()):new za(t.key,t.data,Yt.none());{const n=t.data,r=bt.empty();let s=new Ge(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new es(t.key,r,new Ft(s.toArray()),Yt.none())}}function XN(t,e,n){t instanceof za?function(s,i,o){const l=s.value.clone(),c=B0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof es?function(s,i,o){if(!ic(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=B0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(GE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ko(t,e,n,r){return t instanceof za?function(i,o,l,c){if(!ic(i.precondition,o))return l;const u=i.value.clone(),f=H0(i.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(i,o,l,c){if(!ic(i.precondition,o))return l;const u=H0(i.fieldTransforms,c,o),f=o.data;return f.setAll(GE(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return ic(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ZN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=$E(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function $0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Si(r,s,(i,o)=>YN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class za extends Mu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class es extends Mu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function B0(t,e,n){const r=new Map;de(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,KN(o,l,n[s]))}return r}function H0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,GN(i,o,e))}return r}class Xp extends Mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eP extends Mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=qE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Si(this.mutations,e.mutations,(n,r)=>$0(n,r))&&Si(this.baseMutations,e.baseMutations,(n,r)=>$0(n,r))}}class Zp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return $N}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,ce;function sP(t){switch(t){case M.OK:return X(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function KE(t){if(t===void 0)return er("GRPC error has no .code"),M.UNKNOWN;switch(t){case Me.OK:return M.OK;case Me.CANCELLED:return M.CANCELLED;case Me.UNKNOWN:return M.UNKNOWN;case Me.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Me.INTERNAL:return M.INTERNAL;case Me.UNAVAILABLE:return M.UNAVAILABLE;case Me.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Me.NOT_FOUND:return M.NOT_FOUND;case Me.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Me.ABORTED:return M.ABORTED;case Me.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Me.DATA_LOSS:return M.DATA_LOSS;default:return X(39323,{code:t})}}(ce=Me||(Me={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Dr([4294967295,4294967295],0);function W0(t){const e=iP().encode(t),n=new aE;return n.update(e),new Uint8Array(n.digest())}function q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([s,i],0)]}class em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Dr.fromNumber(r)));return s.compare(oP)===1&&(s=new Dr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=W0(e),[r,s]=q0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new em(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=W0(e),[r,s]=q0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fu(Z.min(),s,new Pe(ae),tr(),le())}}class $a{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class QE{constructor(e,n){this.targetId=e,this.Ce=n}}class YE{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class G0{constructor(){this.ve=0,this.Fe=K0(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X(38017,{changeType:i})}}),new $a(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=K0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class aP{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.He=Pl(),this.Je=Pl(),this.Ze=new Pe(ae)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mf(i))if(r===0){const o=new K(i.path);this.et(n,o,dt.newNoDocument(o,Z.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Br(r).toUint8Array()}catch(c){if(c instanceof xE)return Ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new em(o,s,i)}catch(c){return Ur(c instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&mf(l.target)){const c=new K(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,dt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=le();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Fu(e,n,this.Ze,this.je,r);return this.je=tr(),this.He=Pl(),this.Je=Pl(),this.Ze=new Pe(ae),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new G0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ge(ae),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ge(ae),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pl(){return new Pe(K.comparator)}function K0(){return new Pe(K.comparator)}const lP={asc:"ASCENDING",desc:"DESCENDING"},cP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uP={and:"AND",or:"OR"};class dP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vf(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hP(t,e){return Gc(t,e.toTimestamp())}function An(t){return de(!!t,49232),Z.fromTimestamp(function(n){const r=$r(n);return new ve(r.seconds,r.nanos)}(t))}function tm(t,e){return _f(t,e).canonicalString()}function _f(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XE(t){const e=ye.fromString(t);return de(r1(e),10190,{key:e.toString()}),e}function wf(t,e){return tm(t.databaseId,e.path)}function Xd(t,e){const n=XE(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(e1(n))}function ZE(t,e){return tm(t.databaseId,e)}function fP(t){const e=XE(t);return e.length===4?ye.emptyPath():e1(e)}function xf(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e1(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Q0(t,e,n){return{name:wf(t,e),fields:n.value.mapValue.fields}}function pP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(de(f===void 0||typeof f=="string",58123),Ze.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const f=u.code===void 0?M.UNKNOWN:KE(u.code);return new B(f,u.message||"")}(o);n=new YE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xd(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):Z.min(),l=new bt({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(s,i,o,l),u=r.targetIds||[],f=r.removedTargetIds||[];n=new oc(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xd(t,r.document),i=r.readTime?An(r.readTime):Z.min(),o=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new oc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xd(t,r.document),i=r.removedTargetIds||[];n=new oc([],i,s,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new rP(s,i),l=r.targetId;n=new QE(l,o)}}return n}function mP(t,e){let n;if(e instanceof za)n={update:Q0(t,e.key,e.value)};else if(e instanceof Xp)n={delete:wf(t,e.key)};else if(e instanceof es)n={update:Q0(t,e.key,e.data),updateMask:TP(e.fieldMask)};else{if(!(e instanceof eP))return X(16599,{dt:e.type});n={verify:wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X(27497)}(t,e.precondition)),n}function gP(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(Z.min())&&(o=An(i)),new JN(o,s.transformResults||[])}(n,e))):[]}function yP(t,e){return{documents:[ZE(t,e.path)]}}function vP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZE(t,s);const i=function(u){if(u.length!==0)return n1(fn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(g){return{field:Gs(g.field),direction:xP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=vf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function _P(t){let e=fP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=t1(p);return g instanceof fn&&NE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new Wc(Ks(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Pu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,_=p.values||[];return new Hc(_,g)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const g=!p.before,_=p.values||[];return new Hc(_,g)}(n.endAt)),LN(e,s,o,i,l,"F",c,u)}function wP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function t1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ks(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ks(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ks(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ks(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Ks(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>t1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function xP(t){return lP[t]}function EP(t){return cP[t]}function kP(t){return uP[t]}function Gs(t){return{fieldPath:t.canonicalString()}}function Ks(t){return Je.fromServerFormat(t.fieldPath)}function n1(t){return t instanceof Ue?function(n){if(n.op==="=="){if(L0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NAN"}};if(O0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NAN"}};if(O0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(n.field),op:EP(n.op),value:n.value}}}(t):t instanceof fn?function(n){const r=n.getFilters().map(s=>n1(s));return r.length===1?r[0]:{compositeFilter:{op:kP(n.op),filters:r}}}(t):X(54877,{filter:t})}function TP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function r1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function s1(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=Z.min(),o=Z.min(),l=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.yt=e}}function IP(t){const e=_P({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.Sn=new AP}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(zr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class AP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},i1=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(i1,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ni(0)}static ar(){return new Ni(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="LruGarbageCollector",RP=1048576;function X0([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class CP{constructor(e){this.Pr=e,this.buffer=new Ge(X0),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();X0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(J0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wi(n)?H(J0,"Ignoring IndexedDB error during garbage collection: ",n):await Hi(n)}await this.Ar(3e5)})}}class PP{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Nu.ce);const r=new CP(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Y0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y0):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Ws()<=oe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function jP(t,e){return new PP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ko(r.mutation,s,Ft.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=No();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=tr();const o=Go(),l=function(){return Go()}();return n.forEach((c,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof es)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ko(f.mutation,u,f.mutation.getFieldMask(),ve.now())):o.set(u.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>l.set(u,new OP(f,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Go();let s=new Pe((o,l)=>o-l),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Ft.empty();f=l.applyToLocalView(u,f),r.set(c,f);const p=(s.get(l.batchId)||le()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,f=c.value,p=UE();f.forEach(g=>{if(!i.has(g)){const _=qE(n.get(g),r.get(g));_!==null&&p.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return VN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(gs());let l=ya,c=i;return o.next(u=>F.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,le())).next(f=>({batchId:l,changes:FE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=No();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=No();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,c=>{const u=function(p,g){return new Ua(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=No();return o.forEach((c,u)=>{const f=i.get(c);f!==void 0&&Ko(f.mutation,u,Ft.empty(),ve.now()),Lu(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:IP(s.bundledQuery),readTime:An(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.overlays=new Pe(K.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=gs(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=gs(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const l=gs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nP(n,r));let i=this.Lr.get(n);i===void 0&&(i=le(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.kr=new Ge(Qe.Kr),this.qr=new Ge(Qe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Qe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new ye([])),r=new Qe(n,e),s=new Qe(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new ye([])),r=new Qe(n,e),s=new Qe(n,e+1);let i=le();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(Qe.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tP(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?qp:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ae);return n.forEach(s=>{const i=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Qe(new K(i),0);let l=new Ge(ae);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Qe(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.ti=e,this.docs=function(){return new Pe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=tr();const o=n.path,l=new K(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||fN(hN(f),r)<=0||(s.has(f.key)||Lu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $P(this)}getSize(e){return F.resolve(this.size)}}class $P extends DP{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.persistence=e,this.ri=new Os(n=>Qp(n),Yp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.ii=0,this.si=new nm,this.targetCount=0,this.oi=Ni._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ni(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n){this._i={},this.overlays={},this.ai=new Nu(0),this.ui=!1,this.ui=!0,this.ci=new FP,this.referenceDelegate=e(this),this.li=new BP(this),this.indexManager=new SP,this.remoteDocumentCache=function(s){return new zP(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new bP(n),this.Pi=new VP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new UP(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new HP(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class HP extends mN{constructor(e){super(),this.currentSequenceNumber=e}}class rm{constructor(e){this.persistence=e,this.Ri=new nm,this.Ai=null}static Vi(e){return new rm(e)}get di(){if(this.Ai)return this.Ai;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=K.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kc{constructor(e,n){this.persistence=e,this.fi=new Os(r=>vN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=jP(this,n)}static Vi(e,n){return new Kc(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rc(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return E2()?8:gN(ft())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new WP;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ws()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Ws()<=oe.DEBUG&&H("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ws()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):F.resolve())}gs(e,n){if(U0(n))return F.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yf(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,yf(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return U0(n)||s.isEqual(Z.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Ws()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.Ds(e,o,n,dN(s,ya)).next(l=>l))})}bs(e,n){let r=new Ge(VE(e));return n.forEach((s,i)=>{Lu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ws()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",qs(n)),this.fs.getDocumentsMatchingQuery(e,n,zr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="LocalStore",GP=3e8;class KP{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Pe(ae),this.Fs=new Os(i=>Qp(i),Yp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function QP(t,e,n,r){return new KP(t,e,n,r)}async function a1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=le();for(const u of s){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of i){l.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function YP(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,f){const p=u.batch,g=p.keys();let _=F.resolve();return g.forEach(k=>{_=_.next(()=>f.getEntry(c,k)).next(I=>{const A=u.docVersions.get(k);de(A!==null,48541),I.version.compareTo(A)<0&&(p.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),f.addEntry(I)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=le();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function l1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function JP(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.li.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,f.addedDocuments,p)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Ze.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),function(I,A,w){return I.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=GP?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,_,f)&&l.push(n.li.updateTargetData(i,_))});let c=tr(),u=le();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(XP(i,o,e.documentUpdates).next(f=>{c=f.Bs,u=f.Ls})),!r.isEqual(Z.min())){const f=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.vs=s,i))}function XP(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=tr();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(im,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function ZP(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function e4(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Ef(t,e,n){const r=ee(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Wi(o))throw o;H(im,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Z0(t,e,n){const r=ee(t);let s=Z.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const p=ee(c),g=p.Fs.get(f);return g!==void 0?F.resolve(p.vs.get(g)):p.li.getTargetData(u,f)}(r,o,Sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:le())).next(l=>(t4(r,FN(e),l),{documents:l,ks:i})))}function t4(t,e,n){let r=t.Ms.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class ev{constructor(){this.activeTargetIds=WN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n4{constructor(){this.vo=new ev,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ev,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="ConnectivityMonitor";class nv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(tv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(tv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=null;function kf(){return jl===null?jl=function(){return 268435456+Math.round(2147483648*Math.random())}():jl++,"0x"+jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="RestConnection",s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class i4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===$c?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=kf(),l=this.Qo(e,n.toUriEncodedString());H(Zd,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(l),f=Ps(u);return this.zo(e,l,c,r,f).then(p=>(H(Zd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ur(Zd,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=s4[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection",Eo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class vi extends i4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vi.c_){const e=dE();Eo(e,uE.STAT_EVENT,n=>{n.stat===uf.PROXY?H(lt,"STAT_EVENT: detected buffering proxy"):n.stat===uf.NOPROXY&&H(lt,"STAT_EVENT: detected no buffering proxy")}),vi.c_=!0}}zo(e,n,r,s,i){const o=kf();return new Promise((l,c)=>{const u=new lE;u.setWithCredentials(!0),u.listenOnce(cE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:const p=u.getResponseJson();H(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case nc.TIMEOUT:H(lt,`RPC '${e}' ${o} timed out`),c(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const g=u.getStatus();if(H(lt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const k=_==null?void 0:_.error;if(k&&k.status&&k.message){const I=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(y)>=0?y:M.UNKNOWN}(k.status);c(new B(I,k.message))}else c(new B(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new B(M.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);H(lt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)})}T_(e,n,r){const s=kf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");H(lt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);this.I_(f);let p=!1,g=!1;const _=new o4({Ho:k=>{g?H(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(p||(H(lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(lt,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Jo:()=>f.close()});return Eo(f,Co.EventType.OPEN,()=>{g||(H(lt,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),Eo(f,Co.EventType.CLOSE,()=>{g||(g=!0,H(lt,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(f))}),Eo(f,Co.EventType.ERROR,k=>{g||(g=!0,Ur(lt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),_.o_(new B(M.UNAVAILABLE,"The operation could not be completed")))}),Eo(f,Co.EventType.MESSAGE,k=>{var I;if(!g){const A=k.data[0];de(!!A,16349);const w=A,y=(w==null?void 0:w.error)||((I=w[0])==null?void 0:I.error);if(y){H(lt,`RPC '${e}' stream ${s} received error:`,y);const E=y.status;let j=function(T){const v=Me[T];if(v!==void 0)return KE(v)}(E),L=y.message;E==="NOT_FOUND"&&L.includes("database")&&L.includes("does not exist")&&L.includes(this.databaseId.database)&&Ur(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),j===void 0&&(j=M.INTERNAL,L="Unknown error status: "+E+" with message "+y.message),g=!0,_.o_(new B(j,L)),f.close()}else H(lt,`RPC '${e}' stream ${s} received:`,A),_.__(A)}}),vi.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return hE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){return new vi(t)}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return new dP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.c_=!1;class c1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="PersistentStream";class u1{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l4 extends u1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pP(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?An(o.readTime):Z.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=xf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=mf(c)?{documents:yP(i,c)}:{query:vP(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=JE(i,o.resumeToken);const u=vf(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=Gc(i,o.snapshotVersion.toTimestamp());const u=vf(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=wP(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=xf(this.serializer),n.removeTarget=e,this.K_(n)}}class c4 extends u1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=gP(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mP(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{}class d4 extends u4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,_f(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,_f(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function h4(t,e,n,r){return new d4(t,e,n,r)}class f4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="RemoteStore";class p4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ls(this)&&(H(Rs,"Restarting streams for network reachability change."),await async function(c){const u=ee(c);u.Ea.add(4),await Ba(u),u.Va.set("Unknown"),u.Ea.delete(4),await zu(u)}(this))})}),this.Va=new f4(r,s)}}async function zu(t){if(Ls(t))for(const e of t.Ra)await e(!0)}async function Ba(t){for(const e of t.Ra)await e(!1)}function d1(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cm(n)?lm(n):qi(n).O_()&&am(n,e))}function om(t,e){const n=ee(t),r=qi(n);n.Ia.delete(e),r.O_()&&h1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ls(n)&&n.Va.set("Unknown"))}function am(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qi(t).Z_(e)}function h1(t,e){t.da.$e(e),qi(t).X_(e)}function lm(t){t.da=new aP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qi(t).start(),t.Va.ua()}function cm(t){return Ls(t)&&!qi(t).x_()&&t.Ia.size>0}function Ls(t){return ee(t).Ea.size===0}function f1(t){t.da=void 0}async function m4(t){t.Va.set("Online")}async function g4(t){t.Ia.forEach((e,n)=>{am(t,e)})}async function y4(t,e){f1(t),cm(t)?(t.Va.ha(e),lm(t)):t.Va.set("Unknown")}async function v4(t,e,n){if(t.Va.set("Online"),e instanceof YE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(Rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qc(t,r)}else if(e instanceof oc?t.da.Xe(e):e instanceof QE?t.da.st(e):t.da.tt(e),!n.isEqual(Z.min()))try{const r=await l1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const f=i.Ia.get(c);if(!f)return;i.Ia.set(c,f.withResumeToken(Ze.EMPTY_BYTE_STRING,f.snapshotVersion)),h1(i,c);const p=new kr(f.target,c,u,f.sequenceNumber);am(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Rs,"Failed to raise snapshot:",r),await Qc(t,r)}}async function Qc(t,e,n){if(!Wi(e))throw e;t.Ea.add(1),await Ba(t),t.Va.set("Offline"),n||(n=()=>l1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Rs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zu(t)})}function p1(t,e){return e().catch(n=>Qc(t,n,e))}async function $u(t){const e=ee(t),n=Wr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qp;for(;_4(e);)try{const s=await ZP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,w4(e,s)}catch(s){await Qc(e,s)}m1(e)&&g1(e)}function _4(t){return Ls(t)&&t.Ta.length<10}function w4(t,e){t.Ta.push(e);const n=Wr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function m1(t){return Ls(t)&&!Wr(t).x_()&&t.Ta.length>0}function g1(t){Wr(t).start()}async function x4(t){Wr(t).ra()}async function E4(t){const e=Wr(t);for(const n of t.Ta)e.ea(n.mutations)}async function k4(t,e,n){const r=t.Ta.shift(),s=Zp.from(r,e,n);await p1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $u(t)}async function T4(t,e){e&&Wr(t).Y_&&await async function(r,s){if(function(o){return sP(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Wr(r).B_(),await p1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $u(r)}}(t,e),m1(t)&&g1(t)}async function sv(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),H(Rs,"RemoteStore received new credentials");const r=Ls(n);n.Ea.add(3),await Ba(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zu(n)}async function b4(t,e){const n=ee(t);e?(n.Ea.delete(2),await zu(n)):e||(n.Ea.add(2),await Ba(n),n.Va.set("Unknown"))}function qi(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new l4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:m4.bind(null,t),Yo:g4.bind(null,t),t_:y4.bind(null,t),J_:v4.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),cm(t)?lm(t):t.Va.set("Unknown")):(await t.ma.stop(),f1(t))})),t.ma}function Wr(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new c4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:x4.bind(null,t),t_:T4.bind(null,t),ta:E4.bind(null,t),na:k4.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await $u(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Rs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new um(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dm(t,e){if(er("AsyncQueue",`${e}: ${t}`),Wi(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{static emptySet(e){return new _i(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=No(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _i)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.ga=new Pe(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pi{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Pi(e,n,_i.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class S4{constructor(){this.queries=ov(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=ov(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function ov(){return new Os(t=>LE(t),Ou)}async function hm(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new I4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=dm(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&pm(n)}async function fm(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A4(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&pm(n)}function R4(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function pm(t){t.Ca.forEach(e=>{e.next()})}var Tf,av;(av=Tf||(Tf={})).Ma="default",av.Cache="cache";class mm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.key=e}}class v1{constructor(e){this.key=e}}class C4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=le(),this.mutatedKeys=le(),this.eu=VE(e),this.tu=new _i(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new iv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),_=Lu(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;g&&_?g.data.isEqual(_.data)?k!==I&&(r.track({type:3,doc:_}),A=!0):this.su(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||u)&&(l=!0)),A&&(_?(o=o.add(_),i=I?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(_,k){const I=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:A})}};return I(_)-I(k)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Pi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new v1(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new y1(r))}),n}cu(e){this.Za=e.ks,this.Ya=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gm="SyncEngine";class N4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class P4{constructor(e){this.key=e,this.hu=!1}}class j4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Os(l=>LE(l),Ou),this.Iu=new Map,this.Eu=new Set,this.Ru=new Pe(K.comparator),this.Au=new Map,this.Vu=new nm,this.du={},this.mu=new Map,this.fu=Ni.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function D4(t,e,n=!0){const r=T1(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _1(r,e,n,!0),s}async function O4(t,e){const n=T1(t);await _1(n,e,!0,!1)}async function _1(t,e,n,r){const s=await e4(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await L4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&d1(t.remoteStore,s),l}async function L4(t,e,n,r,s){t.pu=(p,g,_)=>async function(I,A,w,y){let E=A.view.ru(w);E.Ss&&(E=await Z0(I.localStore,A.query,!1).then(({documents:T})=>A.view.ru(T,E)));const j=y&&y.targetChanges.get(A.targetId),L=y&&y.targetMismatches.get(A.targetId)!=null,U=A.view.applyChanges(E,I.isPrimaryClient,j,L);return cv(I,A.targetId,U.au),U.snapshot}(t,p,g,_);const i=await Z0(t.localStore,e,!0),o=new C4(e,i.ks),l=o.ru(i.documents),c=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);cv(t,n,u.au);const f=new N4(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function V4(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ou(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ef(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&om(r.remoteStore,s.targetId),bf(r,s.targetId)}).catch(Hi)):(bf(r,s.targetId),await Ef(r.localStore,s.targetId,!0))}async function M4(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),om(n.remoteStore,r.targetId))}async function F4(t,e,n){const r=q4(t);try{const s=await function(o,l){const c=ee(o),u=ve.now(),f=l.reduce((_,k)=>_.add(k.key),le());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let k=tr(),I=le();return c.xs.getEntries(_,f).next(A=>{k=A,k.forEach((w,y)=>{y.isValidDocument()||(I=I.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,k)).next(A=>{p=A;const w=[];for(const y of l){const E=ZN(y,p.get(y.key).overlayedDocument);E!=null&&w.push(new es(y.key,E,AE(E.value.mapValue),Yt.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,w,l)}).next(A=>{g=A;const w=A.applyToLocalDocumentSet(p,I);return c.documentOverlayCache.saveOverlays(_,A.batchId,w)})}).then(()=>({batchId:g.batchId,changes:FE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new Pe(ae)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await Ha(r,s.changes),await $u(r.remoteStore)}catch(s){const i=dm(s,"Failed to persist write");n.reject(i)}}async function w1(t,e){const n=ee(t);try{const r=await JP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await Ha(n,r,e)}catch(r){await Hi(r)}}function lv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ee(o);c.onlineState=l;let u=!1;c.queries.forEach((f,p)=>{for(const g of p.ba)g.va(l)&&(u=!0)}),u&&pm(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function U4(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Pe(K.comparator);o=o.insert(i,dt.newNoDocument(i,Z.min()));const l=le().add(i),c=new Fu(Z.min(),new Map,new Pe(ae),o,l);await w1(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),ym(r)}else await Ef(r.localStore,e,!1).then(()=>bf(r,e,n)).catch(Hi)}async function z4(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await YP(n.localStore,e);E1(n,r,null),x1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ha(n,s)}catch(s){await Hi(s)}}async function $4(t,e,n){const r=ee(t);try{const s=await function(o,l){const c=ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(de(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);E1(r,e,n),x1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ha(r,s)}catch(s){await Hi(s)}}function x1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function E1(t,e,n){const r=ee(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function bf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||k1(t,r)})}function k1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(om(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ym(t))}function cv(t,e,n){for(const r of n)r instanceof y1?(t.Vu.addReference(r.key,e),B4(t,r)):r instanceof v1?(H(gm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||k1(t,r.key)):X(19791,{wu:r})}function B4(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(gm,"New document in limbo: "+n),t.Eu.add(r),ym(t))}function ym(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new P4(n)),t.Ru=t.Ru.insert(n,r),d1(t.remoteStore,new kr(Sn(Du(n.path)),r,"TargetPurposeLimboResolution",Nu.ce))}}async function Ha(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=sm.Es(c.targetId,u);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const f=ee(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(u,g=>F.forEach(g.Ts,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>F.forEach(g.Is,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Wi(p))throw p;H(im,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const _=f.vs.get(g),k=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(k);f.vs=f.vs.insert(g,I)}}}(r.localStore,i))}async function H4(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){H(gm,"User change. New user:",e.toKey());const r=await a1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ha(n,r.Ns)}}function W4(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let s=le();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function T1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U4.bind(null,e),e.Pu.J_=A4.bind(null,e.eventManager),e.Pu.yu=R4.bind(null,e.eventManager),e}function q4(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$4.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QP(this.persistence,new qP,e.initialUser,this.serializer)}Cu(e){return new o1(rm.Vi,this.serializer)}Du(e){return new n4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class G4 extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof Kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new o1(r=>Kc.Vi(r,n),this.serializer)}}class If{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H4.bind(null,this.syncEngine),await b4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S4}()}createDatastore(e){const n=Uu(e.databaseInfo.databaseId),r=a4(e.databaseInfo);return h4(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new p4(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>lv(this.syncEngine,n,0),function(){return nv.v()?new nv:new r4}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,f){const p=new j4(s,i,o,l,c,u);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);H(Rs,"RemoteStore shutting down."),i.Ea.add(5),await Ba(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}If.provider={build:()=>new If};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class K4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=Ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(qr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(qr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function th(t,e){t.asyncQueue.verifyOperationInProgress(),H(qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await a1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q4(t);H(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>sv(e.remoteStore,s)),t._onlineComponents=e}async function Q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(qr,"Using user provided OfflineComponentProvider");try{await th(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await th(t,new Yc)}}else H(qr,"Using default OfflineComponentProvider"),await th(t,new G4(void 0));return t._offlineComponents}async function b1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(qr,"Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(H(qr,"Using default OnlineComponentProvider"),await uv(t,new If))),t._onlineComponents}function Y4(t){return b1(t).then(e=>e.syncEngine)}async function Jc(t){const e=await b1(t),n=e.eventManager;return n.onListen=D4.bind(null,e.syncEngine),n.onUnlisten=V4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=O4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=M4.bind(null,e.syncEngine),n}function J4(t,e,n,r){const s=new vm(r),i=new mm(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>hm(await Jc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>fm(await Jc(t),i))}}function X4(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const f=new vm({next:g=>{f.Nu(),o.enqueueAndForget(()=>fm(i,p));const _=g.docs.has(l);!_&&g.fromCache?u.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?u.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new mm(Du(l.path),f,{includeMetadataChanges:!0,Ka:!0});return hm(i,p)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}function Z4(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const f=new vm({next:g=>{f.Nu(),o.enqueueAndForget(()=>fm(i,p)),g.fromCache&&c.source==="server"?u.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new mm(l,f,{includeMetadataChanges:!0,Ka:!0});return hm(i,p)}(await Jc(t),t.asyncQueue,e,n,r)),r.promise}function ej(t,e){const n=new Wn;return t.asyncQueue.enqueueAndForget(async()=>F4(await Y4(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="ComponentProvider",dv=new Map;function nj(t,e,n,r,s){return new xN(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,I1(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firestore.googleapis.com",hv=!0;class fv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S1,this.ssl=hv}else this.host=e.host,this.ssl=e.ssl??hv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=i1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RP)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mE;switch(r.type){case"firstParty":return new iN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dv.get(n);r&&(H(tj,"Removing Datastore"),dv.delete(n),r.terminate())}(this),Promise.resolve()}}function A1(t,e,n,r={}){var u;t=_t(t,Bu);const s=Ps(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Pp(`https://${l}`),jp("Firestore",!0)),i.host!==S1&&i.host!==l&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ts(c,o)&&(t._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=ct.MOCK_USER;else{f=xx(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ct(g)}t._authCredentials=new nN(new pE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Re{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Re(this.firestore,e,this._key)}toJSON(){return{type:Re._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fa(n,Re._jsonSchema))return new Re(e,r||null,new K(ye.fromString(n.referencePath)))}}Re._jsonSchemaVersion="firestore/documentReference/1.0",Re._jsonSchema={type:ze("string",Re._jsonSchemaVersion),referencePath:ze("string")};class qn extends ts{constructor(e,n,r){super(e,n,Du(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new K(e))}withConverter(e){return new qn(this.firestore,e,this._path)}}function xn(t,e,...n){if(t=$e(t),gE("collection","path",e),t instanceof Bu){const r=ye.fromString(e,...n);return I0(r),new qn(t,null,r)}{if(!(t instanceof Re||t instanceof qn))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return I0(r),new qn(t.firestore,null,r)}}function Ot(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Ru.newId()),gE("doc","path",e),t instanceof Bu){const r=ye.fromString(e,...n);return b0(r),new Re(t,null,new K(r))}{if(!(t instanceof Re||t instanceof qn))throw new B(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return b0(r),new Re(t.firestore,t instanceof qn?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="AsyncQueue";class mv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c1(this,"async_queue_retry"),this._c=()=>{const r=eh();r&&H(pv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wi(e))throw e;H(pv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",gv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=um.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&X(47125,{Pc:gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cn extends Bu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mv(e),this._firestoreClient=void 0,await e}}}function R1(t,e){const n=typeof t=="object"?t:Lp(),r=typeof t=="string"?t:$c,s=bu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vx("firestore");i&&A1(s,...i)}return s}function Wa(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rj(t),t._firestoreClient}function rj(t){var r,s,i,o;const e=t._freezeSettings(),n=nj(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new K4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(Ze.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fa(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:ze("string",Vt._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cn._jsonSchemaVersion}}static fromJSON(e){if(Fa(e,cn._jsonSchema))return new cn(e.latitude,e.longitude)}}cn._jsonSchemaVersion="firestore/geoPoint/1.0",cn._jsonSchema={type:ze("string",cn._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fa(e,Jt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jt(e.vectorValues);throw new B(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:ze("string",Jt._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=/^__.*__$/;class ij{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new za(e,this.data,n,this.fieldTransforms)}}class C1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{dataSource:t})}}class _m{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _m({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(N1(this.dataSource)&&sj.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class oj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uu(e)}createContext(e,n,r,s=!1){return new _m({dataSource:e,methodName:n,targetDoc:r,path:Je.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(t){const e=t._freezeSettings(),n=Uu(t._databaseId);return new oj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function P1(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);xm("Data must be an object, but it was:",o,r);const l=j1(r,o);let c,u;if(i.merge)c=new Ft(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=ji(e,p,n);if(!o.contains(g))throw new B(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);L1(f,g)||f.push(g)}c=new Ft(f),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new ij(new bt(l),c,u)}class qu extends qa{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}class wm extends qa{_toFieldTransform(e){return new QN(e.path,new wa)}isEqual(e){return e instanceof wm}}function aj(t,e,n,r){const s=t.createContext(1,e,n);xm("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();Zr(r,(c,u)=>{const f=O1(e,c,n);u=$e(u);const p=s.childContextForFieldPath(f);if(u instanceof qu)i.push(f);else{const g=Ga(u,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Ft(i);return new C1(o,l,s.fieldTransforms)}function lj(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[ji(e,r,n)],c=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(ji(e,i[g])),c.push(i[g+1]);const u=[],f=bt.empty();for(let g=l.length-1;g>=0;--g)if(!L1(u,l[g])){const _=l[g];let k=c[g];k=$e(k);const I=o.childContextForFieldPath(_);if(k instanceof qu)u.push(_);else{const A=Ga(k,I);A!=null&&(u.push(_),f.set(_,A))}}const p=new Ft(u);return new C1(f,p,o.fieldTransforms)}function cj(t,e,n,r=!1){return Ga(n,t.createContext(r?4:3,e))}function Ga(t,e){if(D1(t=$e(t)))return xm("Unsupported field value:",e,t),j1(t,e);if(t instanceof qa)return function(r,s){if(!N1(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Ga(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:Gc(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(s.serializer,i)}}if(r instanceof cn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:JE(s.serializer,r._byteString)};if(r instanceof Re){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Jt)return function(o,l){const c=o instanceof Jt?o.toArray():o;return{mapValue:{fields:{[IE]:{stringValue:SE},[Bc]:{arrayValue:{values:c.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return Jp(l.serializer,f)})}}}}}}(r,s);if(s1(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Cu(r)}`)}(t,e)}function j1(t,e){const n={};return wE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(t,(r,s)=>{const i=Ga(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function D1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof cn||t instanceof Vt||t instanceof Re||t instanceof qa||t instanceof Jt||s1(t))}function xm(t,e,n){if(!D1(n)||!vE(n)){const r=Cu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function ji(t,e,n){if((e=$e(e))instanceof Hu)return e._internalPath;if(typeof e=="string")return O1(t,e);throw Xc("Field path arguments must be of type string or ",t,!1,void 0,n)}const uj=new RegExp("[~\\*/\\[\\]]");function O1(t,e,n){if(e.search(uj)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hu(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new B(M.INVALID_ARGUMENT,l+t+c)}function L1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Bc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Le(o.doubleValue));return new Jt(n)}convertGeoPoint(e){return new cn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ju(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(va(e));default:return null}}convertTimestamp(e){const n=$r(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);de(r1(r),9688,{name:e});const s=new Ai(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||er(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends V1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function Sf(){return new wm("serverTimestamp")}const yv="@firebase/firestore",vv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(ji("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dj extends M1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class km{}class U1 extends km{}function ac(t,e,...n){let r=[];e instanceof km&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Gu).length,l=i.filter(c=>c instanceof Ka).length;if(o>1||o>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ka extends U1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ka(e,n,r)}_apply(e){const n=this._parse(e);return $1(e._query,n),new ts(e.firestore,e.converter,gf(e._query,n))}_parse(e){const n=Wu(e.firestore);return function(i,o,l,c,u,f,p){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){xv(p,f);const k=[];for(const I of p)k.push(wv(c,i,I));g={arrayValue:{values:k}}}else g=wv(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||xv(p,f),g=cj(l,o,p,f==="in"||f==="not-in");return Ue.create(u,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function z1(t,e,n){const r=e,s=ji("where",t);return Ka._create(s,r,n)}class Gu extends km{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)$1(o,c),o=gf(o,c)}(e._query,n),new ts(e.firestore,e.converter,gf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function wv(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OE(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!K.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D0(t,new K(r))}if(n instanceof Re)return D0(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cu(n)}.`)}function xv(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $1(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function B1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class li{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Or extends M1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ji("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Or._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:ze("string",Or._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class Qo extends Or{data(e={}){return super.data(e)}}class Lr{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new li(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qo(this._firestore,this._userDataWriter,r.key,r,new li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Qo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new li(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Qo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new li(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:hj(l.type),doc:c,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ru.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr._jsonSchemaVersion="firestore/querySnapshot/1.0",Lr._jsonSchema={type:ze("string",Lr._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){t=_t(t,Re);const e=_t(t.firestore,Cn),n=Wa(e);return X4(n,t._key).then(r=>W1(e,t,r))}function Tm(t){t=_t(t,ts);const e=_t(t.firestore,Cn),n=Wa(e),r=new Em(e);return F1(t._query),Z4(n,t._query).then(s=>new Lr(e,r,t,s))}function ka(t,e,n){t=_t(t,Re);const r=_t(t.firestore,Cn),s=B1(t.converter,e,n),i=Wu(r);return Qa(r,[P1(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yt.none())])}function jo(t,e,n,...r){t=_t(t,Re);const s=_t(t.firestore,Cn),i=Wu(s);let o;return o=typeof(e=$e(e))=="string"||e instanceof Hu?lj(i,"updateDoc",t._key,e,n,r):aj(i,"updateDoc",t._key,e),Qa(s,[o.toMutation(t._key,Yt.exists(!0))])}function Af(t){return Qa(_t(t.firestore,Cn),[new Xp(t._key,Yt.none())])}function Rf(t,e){const n=_t(t.firestore,Cn),r=Ot(t),s=B1(t.converter,e),i=Wu(t.firestore);return Qa(n,[P1(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function Di(t,...e){var u,f,p;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_v(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_v(e[r])){const g=e[r];e[r]=(u=g.next)==null?void 0:u.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let i,o,l;if(t instanceof Re)o=_t(t.firestore,Cn),l=Du(t._key.path),i={next:g=>{e[r]&&e[r](W1(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=_t(t,ts);o=_t(g.firestore,Cn),l=g._query;const _=new Em(o);i={next:k=>{e[r]&&e[r](new Lr(o,_,g,k))},error:e[r+1],complete:e[r+2]},F1(t._query)}const c=Wa(o);return J4(c,l,s,i)}function Qa(t,e){const n=Wa(t);return ej(n,e)}function W1(t,e,n){const r=n.docs.get(e._key),s=new Em(t);return new Or(t,s,e._key,r,new li(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){tN(js),bs(new Fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Cn(new rN(r.getProvider("auth-internal")),new oN(o,r.getProvider("app-check-internal")),EN(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tn(yv,vv,e),Tn(yv,vv,"esm2020")})();const fj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:V1,Bytes:Vt,CollectionReference:qn,DocumentReference:Re,DocumentSnapshot:Or,FieldPath:Hu,FieldValue:qa,Firestore:Cn,FirestoreError:B,GeoPoint:cn,Query:ts,QueryCompositeFilterConstraint:Gu,QueryConstraint:U1,QueryDocumentSnapshot:Qo,QueryFieldFilterConstraint:Ka,QuerySnapshot:Lr,SnapshotMetadata:li,Timestamp:ve,VectorValue:Jt,_AutoId:Ru,_ByteString:Ze,_DatabaseId:Ai,_DocumentKey:K,_EmptyAuthCredentialsProvider:mE,_FieldPath:Je,_cast:_t,_logWarn:Ur,_validateIsNotUsedTogether:yE,addDoc:Rf,collection:xn,connectFirestoreEmulator:A1,deleteDoc:Af,doc:Ot,ensureFirestoreConfigured:Wa,executeWrite:Qa,getDoc:H1,getDocs:Tm,getFirestore:R1,onSnapshot:Di,query:ac,serverTimestamp:Sf,setDoc:ka,updateDoc:jo,where:z1},Symbol.toStringTag,{value:"Module"}));var pj="firebase",mj="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(pj,mj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="firebasestorage.googleapis.com",gj="storageBucket",yj=2*60*1e3,vj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Pn{constructor(e,n,r=0){super(nh(e),`Firebase Storage: ${n} (${nh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nn||(Nn={}));function nh(t){return"storage/"+t}function _j(){const t="An unknown error occurred, please check the error payload for server response.";return new jn(Nn.UNKNOWN,t)}function wj(){return new jn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xj(){return new jn(Nn.CANCELED,"User canceled the upload/download.")}function Ej(t){return new jn(Nn.INVALID_URL,"Invalid URL '"+t+"'.")}function kj(t){return new jn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ev(t){return new jn(Nn.INVALID_ARGUMENT,t)}function G1(){return new jn(Nn.APP_DELETED,"The Firebase app was deleted.")}function Tj(t){return new jn(Nn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=on.makeFromUrl(e,n)}catch{return new on(e,"")}if(r.path==="")return r;throw kj(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),k={bucket:1,path:3},I=n===q1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",w=new RegExp(`^https?://${I}/${s}/${A}`,"i"),E=[{regex:l,indices:c,postModify:i},{regex:_,indices:k,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<E.length;j++){const L=E[j],U=L.regex.exec(e);if(U){const T=U[L.indices.bucket];let v=U[L.indices.path];v||(v=""),r=new on(T,v),L.postModify(r);break}}if(r==null)throw Ej(e);return r}}class bj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function f(...A){u||(u=!0,e.apply(null,A))}function p(A){s=setTimeout(()=>{s=null,t(_,c())},A)}function g(){i&&clearTimeout(i)}function _(A,...w){if(u){g();return}if(A){g(),f.call(null,A,...w);return}if(c()||o){g(),f.call(null,A,...w);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,p(E)}let k=!1;function I(A){k||(k=!0,g(),!u&&(s!==null?(A||(l=2),clearTimeout(s),p(0)):A||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,I(!0)},n),I}function Sj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return t!==void 0}function kv(t,e,n,r){if(r<e)throw Ev(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ev(`Invalid value for '${t}'. Expected ${n} or less.`)}function Rj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Zc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n,r,s,i,o,l,c,u,f,p,g=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,I)=>{this.resolve_=k,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Dl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Zc.NO_ERROR,c=i.getStatus();if(!l||Cj(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Zc.ABORT;r(!1,new Dl(!1,null,f));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Dl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Aj(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=_j();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?G1():xj();o(c)}else{const c=wj();o(c)}};this.canceled_?n(!1,new Dl(!1,null,!0)):this.backoffId_=Ij(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Pj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Dj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Oj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Lj(t,e,n,r,s,i,o=!0,l=!1){const c=Rj(t.urlParams),u=t.url+c,f=Object.assign({},t.headers);return Dj(f,e),Pj(f,n),jj(f,i),Oj(f,r),new Nj(u,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Mj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this._service=e,n instanceof on?this._location=n:this._location=on.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new eu(e,n)}get root(){const e=new on(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mj(this._location.path)}get storage(){return this._service}get parent(){const e=Vj(this._location.path);if(e===null)return null;const n=new on(this._location.bucket,e);return new eu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Tj(e)}}function Tv(t,e){const n=e==null?void 0:e[gj];return n==null?null:on.makeFromBucketSpec(n,t)}function Fj(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ps(e);s&&(Pp(`https://${t.host}/b`),jp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:xx(i,t.app.options.projectId))}class Uj{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=q1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yj,this._maxUploadRetryTime=vj,this._requests=new Set,s!=null?this._bucket=on.makeFromBucketSpec(s,this._host):this._bucket=Tv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=on.makeFromBucketSpec(this._url,e):this._bucket=Tv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new bj(G1());{const o=Lj(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const bv="@firebase/storage",Iv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="storage";function zj(t=Lp(),e){t=$e(t);const r=bu(t,K1).getImmediate({identifier:e}),s=vx("storage");return s&&$j(r,...s),r}function $j(t,e,n,r={}){Fj(t,e,n,r)}function Bj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Uj(n,r,s,e,js)}function Hj(){bs(new Fr(K1,Bj,"PUBLIC").setMultipleInstances(!0)),Tn(bv,Iv,""),Tn(bv,Iv,"esm2020")}Hj();const Wj={apiKey:"AIzaSyBTJYSHS3YXRbhjCOauXi5Y2fp2E7cQkRA",authDomain:"tracker-2bd55.firebaseapp.com",projectId:"tracker-2bd55",storageBucket:"tracker-2bd55.firebasestorage.app",messagingSenderId:"469875278412",appId:"1:469875278412:web:5665c6ac660211c56c6ae9"},bm=Tx(Wj),Ol=ZC(bm),Oe=R1(bm);zj(bm);const Q1=N.createContext();function qj({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(null),[i,o]=N.useState(!0);N.useEffect(()=>zR(Ol,async k=>{try{if(n(k),k){const I=await H1(Ot(Oe,"users",k.uid));I.exists()&&s(I.data())}else s(null)}catch(I){console.error("Auth Context error:",I)}finally{o(!1)}}),[]);const g={user:e,userData:r,signup:async(_,k,I,A="member")=>{const w=await VR(Ol,_,k),y={uid:w.user.uid,name:I,email:_,role:A,createdAt:new Date().toISOString()};return await ka(Ot(Oe,"users",w.user.uid),y),s(y),w},login:(_,k)=>MR(Ol,_,k),logout:()=>$R(Ol),fetchUsers:async()=>{const{collection:_,getDocs:k}=await s2(async()=>{const{collection:A,getDocs:w}=await Promise.resolve().then(()=>fj);return{collection:A,getDocs:w}},[]);return(await k(_(Oe,"users"))).docs.map(A=>({id:A.id,...A.data()}))},updateProfile:async _=>{if(!e)return;const k=Ot(Oe,"users",e.uid);await ka(k,_,{merge:!0}),s(I=>({...I,..._}))},loading:i};return i?d.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 transition-colors",children:d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):d.jsx(Q1.Provider,{value:g,children:t})}const Ct=()=>N.useContext(Q1),Y1=N.createContext(),se={CREATE_PROJECT:"create_project",UPDATE_PROJECT:"update_project",DELETE_PROJECT:"delete_project",ASSIGN_PROJECT:"assign_project",CHANGE_PROJECT_STATUS:"change_project_status",VIEW_ALL_PROJECTS:"view_all_projects",CREATE_TASK:"create_task",ASSIGN_TASK:"assign_task",UPDATE_TASK_STATUS:"update_task_status",DELETE_TASK:"delete_task",VIEW_REPORTS:"view_reports",MANAGE_USERS:"manage_users",VIEW_TEAM_WORKLOAD:"view_team_workload",ACCESS_SETTINGS:"access_settings",MANAGE_PERMISSIONS:"manage_permissions"},Sv={admin:Object.values(se),manager:[se.CREATE_PROJECT,se.UPDATE_PROJECT,se.ASSIGN_PROJECT,se.CHANGE_PROJECT_STATUS,se.VIEW_ALL_PROJECTS,se.CREATE_TASK,se.ASSIGN_TASK,se.UPDATE_TASK_STATUS,se.DELETE_TASK,se.VIEW_REPORTS,se.VIEW_TEAM_WORKLOAD],member:[se.UPDATE_TASK_STATUS]};function Gj({children:t}){const{userData:e}=Ct(),[n,r]=N.useState(Sv),[s,i]=N.useState(!0),o=(e==null?void 0:e.role)||"member";N.useEffect(()=>{const f=Di(Ot(Oe,"config","permissions"),p=>{p.exists()?r(p.data()):ka(p.ref,Sv).catch(console.error),i(!1)},p=>{console.error("Permission context error:",p),i(!1)});return()=>f()},[]);const u={hasPermission:f=>{var p;return o==="admin"?!0:(p=n[o])==null?void 0:p.includes(f)},role:o,rolePermissions:n,updatePermissions:async f=>{o==="admin"&&await ka(Ot(Oe,"config","permissions"),f)},loading:s};return s?d.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 transition-colors",children:d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):d.jsx(Y1.Provider,{value:u,children:t})}const Vs=()=>N.useContext(Y1),J1=N.createContext();function Kj({children:t}){const{user:e,userData:n}=Ct(),[r,s]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{if(!e||!n){s([]),o(!1);return}let w;return n.role==="admin"?w=ac(xn(Oe,"projects")):w=ac(xn(Oe,"projects"),z1("members","array-contains",e.uid)),Di(w,E=>{const j=E.docs.map(L=>({id:L.id,...L.data()}));s(j),o(!1)})},[e,n]);const A={projects:r,loading:i,createProject:async w=>await Rf(xn(Oe,"projects"),{...w,managerId:e.uid,members:[e.uid,...w.members||[]],createdAt:Sf(),status:"Planning"}),updateProject:async(w,y)=>{const E=Ot(Oe,"projects",w);await jo(E,y)},deleteProject:async w=>{await Af(Ot(Oe,"projects",w))},getTasks:(w,y)=>{const E=ac(xn(Oe,"projects",w,"tasks"));return Di(E,j=>{const L=j.docs.map(U=>({id:U.id,...U.data()}));y(L)})},createTask:async(w,y)=>await Rf(xn(Oe,"projects",w,"tasks"),{...y,createdAt:Sf()}),updateTask:async(w,y,E)=>{const j=Ot(Oe,"projects",w,"tasks",y);await jo(j,E)},updateTaskStatus:async(w,y,E)=>{const j=Ot(Oe,"projects",w,"tasks",y);await jo(j,{status:E})},updateProjectMembers:async(w,y)=>{const E=Ot(Oe,"projects",w);await jo(E,{members:y})},deleteTask:async(w,y)=>{const E=Ot(Oe,"projects",w,"tasks",y);await Af(E)}};return d.jsx(J1.Provider,{value:A,children:t})}const rr=()=>N.useContext(J1);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=t=>{const e=Yj(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...Jj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:X1("lucide",s),...!i&&!Xj(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,f])=>N.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(Zj,{ref:i,iconNode:e,className:X1(`lucide-${Qj(Av(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Av(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],tD=Q("activity",eD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Z1=Q("arrow-right",nD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ek=Q("arrow-up-right",rD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],tk=Q("bell",sD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ya=Q("calendar",iD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nk=Q("check",oD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ku=Q("chevron-right",aD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Im=Q("circle-alert",lD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tu=Q("circle-check",cD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],dD=Q("circle-user",uD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fD=Q("circle-x",hD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],rk=Q("clipboard-list",pD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Sm=Q("clock",mD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Rv=Q("database",gD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vD=Q("ellipsis-vertical",yD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],sk=Q("ellipsis",_D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],xD=Q("flag",wD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],kD=Q("folder-kanban",ED);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bD=Q("folder",TD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],SD=Q("funnel",ID);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],RD=Q("hard-drive",AD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ND=Q("layout-dashboard",CD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Oi=Q("loader-circle",PD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Am=Q("lock",jD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],OD=Q("log-out",DD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ta=Q("mail",LD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MD=Q("message-square",VD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],UD=Q("moon",FD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],rh=Q("palette",zD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],ik=Q("panels-top-left",$D);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],HD=Q("pen",BD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],qD=Q("phone",WD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nu=Q("plus",GD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],QD=Q("rocket",KD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],JD=Q("save",YD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ja=Q("search",XD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eO=Q("settings",ZD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ru=Q("shield-check",tO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rO=Q("shield",nO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rm=Q("square-check-big",sO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],oO=Q("sun",iO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lO=Q("target",aO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uO=Q("trash-2",cO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]],Cm=Q("trello",dO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fO=Q("trending-up",hO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ok=Q("triangle-alert",pO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ak=Q("user-plus",mO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nm=Q("user",gO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lk=Q("users",yO);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pm=Q("x",vO);function _O(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(!1),{login:c}=Ct(),u=Na(),f=async p=>{p.preventDefault();try{i(""),l(!0),await c(t,n),u("/")}catch{i("Failed to log in. Please check your credentials.")}finally{l(!1)}};return d.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center p-6 transition-colors",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-white shadow-xl shadow-primary/30 mx-auto mb-6",children:d.jsx(Cm,{size:32})}),d.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white transition-colors",children:"Welcome Back"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 transition-colors",children:"Log in to manage your projects effectively."})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-10 rounded-[2.5rem] shadow-xl border border-slate-100 dark:border-slate-800 transition-colors",children:[s&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-2xl mb-6 text-sm font-medium transition-colors",children:s}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"email",required:!0,value:t,onChange:p=>e(p.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"name@company.com"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Am,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"password",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:""})]})]}),d.jsxs("button",{disabled:o,type:"submit",className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 flex items-center justify-center gap-2 group disabled:opacity-50",children:[d.jsx("span",{children:o?"Logging in...":"Sign In"}),!o&&d.jsx(Z1,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),d.jsxs("p",{className:"text-center mt-8 text-slate-500 dark:text-slate-400 text-sm transition-colors",children:["Don't have an account? ",d.jsx(ku,{to:"/signup",className:"text-primary font-bold hover:underline",children:"Get started for free"})]})]})]})})}function wO(){const[t,e]=N.useState(""),[n,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState("member"),[c,u]=N.useState(""),[f,p]=N.useState(!1),{signup:g}=Ct(),_=Na(),k=async I=>{I.preventDefault();try{u(""),p(!0),await g(t,n,s,o),_("/")}catch(A){u("Failed to create an account. "+A.message)}finally{p(!1)}};return d.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center p-6 py-12 transition-colors",children:d.jsxs("div",{className:"max-w-md w-full",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center text-white shadow-xl shadow-primary/30 mx-auto mb-6",children:d.jsx(Cm,{size:32})}),d.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white transition-colors",children:"Create Account"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 transition-colors",children:"Start managing your team's potential today."})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-10 rounded-[2.5rem] shadow-xl border border-slate-100 dark:border-slate-800 transition-colors",children:[c&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-2xl mb-6 text-sm font-medium transition-colors",children:c}),d.jsxs("form",{onSubmit:k,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx(Nm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"text",required:!0,value:s,onChange:I=>i(I.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"Rahul Reddy"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"email",required:!0,value:t,onChange:I=>e(I.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:"name@company.com"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Am,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"password",required:!0,value:n,onChange:I=>r(I.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",placeholder:""})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Your Role"}),d.jsxs("div",{className:"relative",children:[d.jsx(ru,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsxs("select",{value:o,onChange:I=>l(I.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer",children:[d.jsx("option",{value:"member",children:"Team Member"}),d.jsx("option",{value:"manager",children:"Project Manager"}),d.jsx("option",{value:"admin",children:"Admin"})]})]})]}),d.jsxs("button",{disabled:f,type:"submit",className:"w-full bg-primary text-white py-4 rounded-2xl font-bold text-lg hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 flex items-center justify-center gap-2 group disabled:opacity-50",children:[d.jsx("span",{children:f?"Creating Account...":"Sign Up"}),!f&&d.jsx(Z1,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),d.jsxs("p",{className:"text-center mt-8 text-slate-500 dark:text-slate-400 text-sm transition-colors",children:["Already have an account? ",d.jsx(ku,{to:"/login",className:"text-primary font-bold hover:underline",children:"Log in"})]})]})]})})}function xO(){const{projects:t}=rr(),{user:e}=Ct(),[n,r]=N.useState({activeProjects:0,completedTasks:0,inProgressTasks:0,highPriorityTasks:0}),[s,i]=N.useState([]),[o,l]=N.useState(!0);N.useEffect(()=>{const u=async()=>{l(!0);try{let f=0,p=0,g=0;const _=[];for(const k of t){const A=(await Tm(xn(Oe,"projects",k.id,"tasks"))).docs.map(w=>({id:w.id,...w.data(),projectName:k.name}));f+=A.filter(w=>w.status==="done").length,p+=A.filter(w=>w.status==="in-progress").length,g+=A.filter(w=>w.priority==="High").length,_.push(...A)}r({activeProjects:t.filter(k=>k.status==="Active").length,completedTasks:f,inProgressTasks:p,highPriorityTasks:g}),i(_.slice(0,5))}catch(f){console.error("Error fetching dashboard metrics:",f)}finally{l(!1)}};t.length>0?u():l(!1)},[t]);const c=[{label:"Active Projects",value:n.activeProjects,icon:fO,color:"text-blue-600",bg:"bg-blue-50"},{label:"Completed Tasks",value:n.completedTasks,icon:tu,color:"text-green-600",bg:"bg-green-50"},{label:"In Progress",value:n.inProgressTasks,icon:Sm,color:"text-amber-600",bg:"bg-amber-50"},{label:"High Priority",value:n.highPriorityTasks,icon:Im,color:"text-red-600",bg:"bg-red-50"}];return o?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[d.jsx(Oi,{className:"animate-spin text-primary",size:40}),d.jsx("p",{className:"text-slate-500 font-medium",children:"Calculating metrics..."})]}):d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white transition-colors",children:"Dashboard Overview"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 transition-colors",children:"Welcome back! Here's what's happening today."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((u,f)=>d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("div",{className:`${u.bg} ${u.color} dark:bg-opacity-20 p-3 rounded-xl`,children:d.jsx(u.icon,{size:24})}),d.jsxs("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20 px-2 py-1 rounded-lg flex items-center gap-1",children:["+",Math.floor(Math.random()*20),"% ",d.jsx(ek,{size:12})]})]}),d.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white transition-colors",children:u.value}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mt-1 transition-colors",children:u.label})]},f))}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Recent Activity"}),d.jsx("div",{className:"space-y-6",children:s.length>0?s.map((u,f)=>d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:["Task ",d.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:u.title})," in project ",d.jsx("span",{className:"font-medium text-primary underline decoration-2 underline-offset-4 cursor-pointer",children:u.projectName})," is ",d.jsx("span",{className:"font-bold",children:u.status})]}),d.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"Updated recently"})]})]},u.id)):d.jsx("p",{className:"text-slate-500 text-sm italic",children:"No recent activity found."})})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm",children:[d.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-6",children:"Priority Tasks"}),d.jsxs("div",{className:"space-y-4",children:[s.filter(u=>u.priority==="High").slice(0,4).map((u,f)=>d.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-50 dark:border-slate-800 rounded-2xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-500 dark:text-red-400 font-bold",children:"!"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-bold text-slate-900 dark:text-white",children:u.title}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:u.projectName})]})]}),d.jsx("span",{className:`text-[10px] font-bold px-3 py-1 rounded-full uppercase ${u.status==="done"?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400"}`,children:u.status})]},u.id)),s.filter(u=>u.priority==="High").length===0&&d.jsx("p",{className:"text-slate-500 text-sm italic text-center py-4",children:"No high priority tasks."})]})]})]})]})}function EO({isOpen:t,onClose:e}){const{createProject:n}=rr(),[r,s]=N.useState(!1),[i,o]=N.useState({name:"",description:"",deadline:"",budget:"",priority:"Medium"});if(!t)return null;const l=async c=>{c.preventDefault(),s(!0);try{await n(i),e()}catch(u){console.error(u),alert("Failed to create project")}finally{s(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/40 dark:bg-slate-950/60 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative bg-white dark:bg-slate-900 w-full max-w-xl rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300",children:[d.jsxs("div",{className:"p-8 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-primary/10 dark:bg-primary/20 rounded-2xl flex items-center justify-center text-primary transition-colors",children:d.jsx(QD,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:"Create New Project"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 transition-colors",children:"Launch a new workspace for your team."})]})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors",children:d.jsx(Pm,{size:20,className:"text-slate-400 dark:text-slate-500"})})]}),d.jsxs("form",{onSubmit:l,className:"p-8 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Project Name"}),d.jsxs("div",{className:"relative",children:[d.jsx(ik,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{required:!0,type:"text",placeholder:"e.g. Website Redesign",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all",value:i.name,onChange:c=>o({...i,name:c.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Description"}),d.jsx("textarea",{required:!0,rows:"3",placeholder:"Briefly describe the project goals...",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl p-4 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none",value:i.description,onChange:c=>o({...i,description:c.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Deadline"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ya,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{required:!0,type:"date",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all [color-scheme:light] dark:[color-scheme:dark]",value:i.deadline,onChange:c=>o({...i,deadline:c.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Priority"}),d.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 px-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer",value:i.priority,onChange:c=>o({...i,priority:c.target.value}),children:[d.jsx("option",{value:"Low",children:"Low Priority"}),d.jsx("option",{value:"Medium",children:"Medium Priority"}),d.jsx("option",{value:"High",children:"High Priority"})]})]})]}),d.jsxs("div",{className:"pt-4 flex gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 rounded-2xl font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all outline-none",children:"Cancel"}),d.jsx("button",{disabled:r,type:"submit",className:"flex-[2] bg-primary text-white py-4 rounded-2xl font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 disabled:opacity-50",children:r?"Launching...":"Create Project"})]})]})]})]})}function kO(){const{hasPermission:t}=Vs(),{projects:e}=rr(),[n,r]=N.useState(!1),s=Na();return d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white transition-colors",children:"Projects"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 transition-colors",children:"Manage and track all your active projects."})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.map(i=>{var o;return d.jsxs("div",{onClick:()=>s(`/board/${i.id}`),className:"bg-white dark:bg-slate-900 p-6 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-xl hover:scale-[1.02] transition-all cursor-pointer group",children:[d.jsxs("div",{className:"flex justify-between items-start mb-6",children:[d.jsx("div",{className:"w-12 h-12 bg-slate-50 dark:bg-slate-800 rounded-2xl flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-white transition-colors",children:d.jsx(bD,{size:24})}),d.jsx("button",{onClick:l=>{l.stopPropagation()},className:"p-2 text-slate-400 dark:text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors",children:d.jsx(vD,{size:20})})]}),d.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2 truncate transition-colors",children:i.name}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm line-clamp-2 mb-6 h-10 transition-colors",children:i.description}),d.jsxs("div",{className:"flex items-center gap-4 py-4 border-y border-slate-50 dark:border-slate-800 mb-6 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 text-xs font-medium",children:[d.jsx(lk,{size:16}),d.jsxs("span",{children:[((o=i.members)==null?void 0:o.length)||1," members"]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 text-xs font-medium",children:[d.jsx(Ya,{size:16}),d.jsx("span",{children:i.deadline||"No deadline"})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:`text-[10px] font-extrabold px-3 py-1 rounded-lg uppercase tracking-wider transition-colors ${i.status==="Active"?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":i.status==="Planning"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400"}`,children:i.status||"Planning"}),d.jsxs("div",{className:"text-primary font-bold text-sm flex items-center gap-1 group-hover:translate-x-1 transition-transform",children:["View Board ",d.jsx(Ku,{size:16})]})]})]},i.id)}),t(se.CREATE_PROJECT)&&d.jsxs("button",{onClick:()=>r(!0),className:"border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-[2.5rem] p-6 flex flex-col items-center justify-center gap-4 text-slate-400 dark:text-slate-600 hover:border-primary hover:text-primary hover:bg-primary/5 dark:hover:bg-primary/5 transition-all outline-none min-h-[300px]",children:[d.jsx("div",{className:"w-16 h-16 rounded-3xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center shadow-inner group-hover:scale-110 transition-transform",children:d.jsx(nu,{size:32,className:"opacity-50"})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"font-bold text-lg",children:"Create New Project"}),d.jsx("p",{className:"text-xs max-w-[180px] mx-auto opacity-70",children:"Launch a new collab space for your team"})]})]})]}),d.jsx(EO,{isOpen:n,onClose:()=>r(!1)})]})}function TO({isOpen:t,onClose:e,projectId:n,currentMembers:r}){const{fetchUsers:s}=Ct(),{updateProjectMembers:i}=rr(),[o,l]=N.useState([]),[c,u]=N.useState(!0),[f,p]=N.useState(!1),[g,_]=N.useState(""),[k,I]=N.useState([]);N.useEffect(()=>{t&&(A(),I(r||[]))},[t,r]);const A=async()=>{try{const j=await s();l(j)}catch(j){console.error("Error loading users:",j)}finally{u(!1)}},w=j=>{I(L=>L.includes(j)?L.filter(U=>U!==j):[...L,j])},y=async()=>{p(!0);try{await i(n,k),e()}catch(j){console.error("Error updating members:",j)}finally{p(!1)}};if(!t)return null;const E=o.filter(j=>j.name.toLowerCase().includes(g.toLowerCase())||j.email.toLowerCase().includes(g.toLowerCase()));return d.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/40 dark:bg-slate-950/60 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative bg-white dark:bg-slate-900 w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[d.jsxs("div",{className:"p-8 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50 transition-colors",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:"Add Team Members"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 transition-colors",children:"Select people to join this project"})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-xl transition-colors text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 shadow-sm",children:d.jsx(Pm,{size:20})})]}),d.jsxs("div",{className:"p-8 space-y-6",children:[d.jsxs("div",{className:"relative group",children:[d.jsx(Ja,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-primary transition-colors",size:20}),d.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full pl-12 pr-4 py-4 bg-slate-100 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 transition-all outline-none text-slate-900 dark:text-white font-medium placeholder:text-slate-400 dark:placeholder:text-slate-500",value:g,onChange:j=>_(j.target.value)})]}),d.jsx("div",{className:"max-h-[350px] overflow-y-auto pr-2 custom-scrollbar",children:c?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-4",children:[d.jsx(Oi,{className:"animate-spin text-primary",size:32}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium transition-colors",children:"Fetching team members..."})]}):d.jsxs("div",{className:"grid gap-2",children:[E.map(j=>d.jsxs("div",{onClick:()=>w(j.uid),className:`flex items-center justify-between p-4 rounded-2xl cursor-pointer transition-all border-2 ${k.includes(j.uid)?"bg-primary/5 dark:bg-primary/10 border-primary shadow-sm":"bg-white dark:bg-slate-900 border-transparent hover:bg-slate-50 dark:hover:bg-slate-800/50"}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg transition-colors ${k.includes(j.uid)?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400"}`,children:j.name.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-900 dark:text-white transition-colors",children:j.name}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 transition-colors",children:j.email})]})]}),d.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${k.includes(j.uid)?"bg-primary border-primary text-white scale-110":"border-slate-200 dark:border-slate-700"}`,children:k.includes(j.uid)&&d.jsx(nk,{size:14})})]},j.uid)),E.length===0&&d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-slate-400 dark:text-slate-500 font-medium transition-colors",children:"No team members found"})})]})})]}),d.jsxs("div",{className:"p-8 border-t border-slate-50 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex gap-4 transition-colors",children:[d.jsx("button",{onClick:e,className:"flex-1 px-6 py-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 font-bold rounded-2xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-all shadow-sm",children:"Cancel"}),d.jsxs("button",{onClick:y,disabled:f,className:"flex-1 px-6 py-4 bg-primary text-white font-bold rounded-2xl shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:scale-100",children:[f?d.jsx(Oi,{className:"animate-spin",size:20}):d.jsx(ak,{size:20}),d.jsx("span",{children:"Update Team"})]})]})]})]})}function bO({isOpen:t,onClose:e,projectId:n,members:r,initialStatus:s,task:i}){const{createTask:o,updateTask:l}=rr(),{fetchUsers:c}=Ct(),{role:u}=Vs(),[f,p]=N.useState(!1),[g,_]=N.useState({}),[k,I]=N.useState({title:"",description:"",status:s||"todo",priority:"Medium",deadline:"",assignedTo:""});pT.useEffect(()=>{t&&(i?I({title:i.title||"",description:i.description||"",status:i.status||"todo",priority:i.priority||"Medium",deadline:i.deadline||"",assignedTo:i.assignedTo||""}):s&&I(y=>({...y,title:"",description:"",status:s,priority:"Medium",deadline:"",assignedTo:""})),A())},[t,s,i]);const A=async()=>{try{const y=await c(),E={};y.forEach(j=>{r!=null&&r.includes(j.uid)&&(E[j.uid]=j.name)}),_(E)}catch(y){console.error("Error loading team names:",y)}};if(!t)return null;const w=async y=>{y.preventDefault(),p(!0);try{i?await l(n,i.id,k):await o(n,{...k,comments:0,attachments:0,progress:0}),i||I({title:"",description:"",status:"todo",priority:"Medium",deadline:"",assignedTo:""}),e()}catch(E){console.error(E),alert(i?"Failed to update task":"Failed to create task")}finally{p(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900/40 dark:bg-slate-950/60 backdrop-blur-sm",onClick:e}),d.jsxs("div",{className:"relative bg-white dark:bg-slate-900 w-full max-w-xl rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300",children:[d.jsxs("div",{className:"p-8 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50 transition-colors text-slate-400 dark:text-slate-500",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-primary/10 dark:bg-primary/20 rounded-2xl flex items-center justify-center text-primary transition-colors",children:d.jsx(Rm,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:i?"Edit Task":"Add New Task"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 transition-colors",children:i?"Modify task details and status.":"Define a new task for this project."})]})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-xl transition-colors text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 shadow-sm",children:d.jsx(Pm,{size:20})})]}),d.jsxs("form",{onSubmit:w,className:"p-8 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Task Title"}),d.jsx("input",{required:!0,type:"text",placeholder:"e.g. Design Dashboard UI",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 px-6 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all font-medium",value:k.title,onChange:y=>I({...k,title:y.target.value})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Description"}),d.jsx("textarea",{rows:"3",placeholder:"What needs to be done?",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl p-6 text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none font-medium",value:k.description,onChange:y=>I({...k,description:y.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Priority"}),d.jsxs("div",{className:"relative",children:[d.jsx(xD,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer font-medium",value:k.priority,onChange:y=>I({...k,priority:y.target.value}),children:[d.jsx("option",{value:"Low",children:"Low"}),d.jsx("option",{value:"Medium",children:"Medium"}),d.jsx("option",{value:"High",children:"High"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Status"}),d.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 px-6 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer font-medium",value:k.status,onChange:y=>I({...k,status:y.target.value}),children:[d.jsx("option",{value:"todo",children:"To Do"}),d.jsx("option",{value:"in-progress",children:"In Progress"}),d.jsx("option",{value:"review",children:"Review"}),u!=="member"&&d.jsx("option",{value:"done",children:"Done"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Deadline"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ya,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"date",className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all font-medium [color-scheme:light] dark:[color-scheme:dark]",value:k.deadline,onChange:y=>I({...k,deadline:y.target.value})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1 transition-colors",children:"Assign To"}),d.jsxs("div",{className:"relative",children:[d.jsx(Nm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all appearance-none cursor-pointer font-medium",value:k.assignedTo,onChange:y=>I({...k,assignedTo:y.target.value}),children:[d.jsx("option",{value:"",children:"Unassigned"}),r==null?void 0:r.map(y=>d.jsx("option",{value:y,children:g[y]||"Loading..."},y))]})]})]})]}),d.jsxs("div",{className:"pt-4 flex gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 rounded-2xl font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 transition-all outline-none",children:"Cancel"}),d.jsx("button",{disabled:f,type:"submit",className:"flex-[2] bg-primary text-white py-4 rounded-2xl font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 disabled:opacity-50 flex items-center justify-center gap-2",children:f?d.jsx(Oi,{className:"animate-spin",size:20}):i?"Update Task":"Create Task"})]})]})]})]})}const IO=[{id:"todo",title:"To Do",color:"bg-slate-200"},{id:"in-progress",title:"In Progress",color:"bg-amber-400"},{id:"review",title:"Review",color:"bg-blue-400"},{id:"done",title:"Done",color:"bg-green-500"}];function SO(){var C;const{projectId:t}=lS(),{getTasks:e,updateTaskStatus:n,deleteTask:r,projects:s}=rr(),{hasPermission:i,role:o}=Vs(),{fetchUsers:l}=Ct(),[c,u]=N.useState([]),[f,p]=N.useState(null),[g,_]=N.useState(!1),[k,I]=N.useState(!1),[A,w]=N.useState("todo"),[y,E]=N.useState(null),[j,L]=N.useState({});N.useEffect(()=>{if(t){const R=s.find(S=>S.id===t);p(R);const P=e(t,S=>{u(S)});return U(),P}},[t,s,e]);const U=async()=>{try{const R=await l(),P={};R.forEach(S=>{P[S.uid]=S.name}),L(P)}catch(R){console.error("Error loading member names:",R)}},T=(R,P)=>{R.dataTransfer.setData("taskId",P)},v=R=>{R.preventDefault()},b=async(R,P)=>{const S=R.dataTransfer.getData("taskId");if(o==="member"&&P==="done"){alert("Members can only move tasks between To Do, In Progress, and Review.");return}await n(t,S,P)};return d.jsxs("div",{className:"h-full flex flex-col space-y-8 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-12 h-12 bg-primary/10 dark:bg-primary/20 rounded-2xl flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:d.jsx(ik,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white transition-colors",children:(f==null?void 0:f.name)||"Project Board"}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm transition-colors",children:["Workspace / ",(f==null?void 0:f.name)||"Kanban"]})]})]}),d.jsxs("div",{className:"flex -space-x-3",children:[(C=f==null?void 0:f.members)==null?void 0:C.map((R,P)=>{var S;return d.jsx("div",{title:j[R]||"Loading...",className:"w-10 h-10 rounded-full border-4 border-white dark:border-slate-950 bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-primary font-bold text-xs shadow-sm cursor-help transition-all hover:-translate-y-1 hover:z-10",children:((S=j[R])==null?void 0:S.charAt(0))||"?"},R)}),i(se.CREATE_PROJECT)&&d.jsx("button",{onClick:()=>_(!0),className:"w-10 h-10 rounded-full border-4 border-white dark:border-slate-950 bg-primary text-white flex items-center justify-center shadow-lg shadow-primary/20 hover:scale-110 hover:rotate-90 transition-all cursor-pointer z-10",children:d.jsx(nu,{size:18})})]})]}),d.jsx(TO,{isOpen:g,onClose:()=>_(!1),projectId:t,currentMembers:f==null?void 0:f.members}),d.jsx(bO,{isOpen:k,onClose:()=>{I(!1),E(null)},projectId:t,members:f==null?void 0:f.members,initialStatus:A,task:y}),d.jsx("div",{className:"flex-1 flex gap-6 overflow-x-auto pb-4 custom-scrollbar",children:IO.map(R=>d.jsxs("div",{className:"min-w-[320px] w-[320px] flex flex-col gap-4",onDragOver:v,onDrop:P=>b(P,R.id),children:[d.jsxs("div",{className:"flex items-center justify-between px-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:`w-2 h-6 rounded-full ${R.color}`}),d.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 transition-colors",children:R.title}),d.jsx("span",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs font-bold px-2 py-0.5 rounded-lg transition-colors",children:c.filter(P=>P.status===R.id).length})]}),d.jsx("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:d.jsx(sk,{size:20})})]}),d.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-[500px]",children:[c.filter(P=>P.status===R.id).map(P=>{var S;return d.jsxs("div",{draggable:!0,onDragStart:we=>T(we,P.id),className:"bg-white dark:bg-slate-900 p-5 rounded-3xl border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-md transition-all cursor-grab active:cursor-grabbing group",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-lg uppercase transition-colors ${P.priority==="High"?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400"}`,children:P.priority||"Medium"}),d.jsxs("div",{className:"flex items-center gap-2",children:[i(se.DELETE_TASK)&&d.jsx("button",{onClick:we=>{we.stopPropagation(),window.confirm("Delete this task?")&&r(t,P.id)},className:"p-1.5 text-slate-300 dark:text-slate-600 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/40 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:d.jsx(uO,{size:16})}),o!=="member"&&d.jsx("button",{onClick:()=>{E(P),I(!0)},className:"p-1.5 text-slate-300 dark:text-slate-600 hover:text-primary hover:bg-primary/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:d.jsx(HD,{size:16})})]})]}),d.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-4 line-clamp-2 transition-colors",children:P.title}),d.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 dark:border-slate-800 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center gap-1 text-slate-400 dark:text-slate-500 text-xs transition-colors",children:[d.jsx(MD,{size:14}),d.jsx("span",{children:P.comments||0})]}),P.assignedTo&&d.jsx("div",{title:`Assigned to ${j[P.assignedTo]||"..."}`,className:"w-6 h-6 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center text-[10px] font-bold text-primary transition-colors",children:((S=j[P.assignedTo])==null?void 0:S.charAt(0))||"U"})]}),P.deadline&&d.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg transition-colors",children:[d.jsx(Sm,{size:12}),d.jsx("span",{children:P.deadline})]})]})]},P.id)}),i(se.CREATE_TASK)&&d.jsxs("button",{onClick:()=>{w(R.id),E(null),I(!0)},className:"w-full py-4 border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-3xl text-slate-400 dark:text-slate-600 text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-800/50 hover:border-slate-200 dark:hover:border-slate-700 transition-all flex items-center justify-center gap-2 outline-none group",children:[d.jsx(nu,{size:18,className:"group-hover:scale-125 transition-transform"}),d.jsx("span",{children:"Add Task"})]})]})]},R.id))})]})}function AO(){const{fetchUsers:t}=Ct(),[e,n]=N.useState([]),[r,s]=N.useState(!0);return N.useEffect(()=>{(async()=>{try{const o=await t();n(o)}catch(o){console.error("Error loading team:",o)}finally{s(!1)}})()},[t]),r?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[d.jsx(Oi,{className:"animate-spin text-primary",size:40}),d.jsx("p",{className:"text-slate-500 font-medium",children:"Loading team members..."})]}):d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white transition-colors",children:"Team Members"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 transition-colors",children:"Manage your team and their roles effectively."})]}),d.jsxs("button",{className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-2xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-all outline-none",children:[d.jsx(ak,{size:20}),d.jsx("span",{children:"Invite Member"})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map((i,o)=>{var l;return d.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl border border-slate-100 dark:border-slate-800 p-6 text-center hover:shadow-xl transition-all group",children:[d.jsxs("div",{className:"relative inline-block mb-4",children:[d.jsx("div",{className:"w-24 h-24 rounded-3xl bg-slate-100 dark:bg-slate-800 mx-auto flex items-center justify-center text-3xl font-bold text-primary shadow-inner group-hover:bg-primary group-hover:text-white transition-colors uppercase",children:((l=i.name)==null?void 0:l.charAt(0))||"U"}),d.jsx("span",{className:"absolute bottom-0 right-0 w-6 h-6 border-4 border-white dark:border-slate-900 rounded-full bg-green-500"})]}),d.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white transition-colors",children:i.name}),d.jsx("p",{className:"text-sm font-medium text-primary bg-primary/5 dark:bg-primary/20 inline-block px-3 py-1 rounded-full mt-2 mb-6 capitalize transition-colors",children:i.role||"Member"}),d.jsxs("div",{className:"space-y-3 text-slate-500 dark:text-slate-400 text-sm border-t border-slate-50 dark:border-slate-800 pt-6 transition-colors",children:[d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx(Ta,{size:16}),d.jsx("span",{className:"truncate",children:i.email})]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx(qD,{size:16}),d.jsx("span",{children:"+91 98765 43210"})]})]}),d.jsxs("div",{className:"mt-8 flex gap-2",children:[d.jsx("button",{className:"flex-1 py-2 bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 font-bold rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors outline-none",children:"Profile"}),d.jsx("button",{className:"p-2 bg-slate-50 dark:bg-slate-800 text-slate-400 dark:text-slate-500 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 outline-none transition-colors",children:d.jsx(sk,{size:20})})]})]},i.uid||o)})})]})}const ck=t=>{if(!t||t.length===0)return 0;const e=t.filter(n=>n.status==="done").length;return Math.round(e/t.length*100)},RO=(t,e)=>{if(!t.deadline)return"On Track";const n=ck(e),r=new Date(t.deadline),s=new Date;return n<100&&r<s?"Overdue":n<50&&r-s<3*24*60*60*1e3?"At Risk":"On Track"};function CO(){const{projects:t}=rr(),{role:e}=Vs(),[n,r]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState("");N.useEffect(()=>{const f=async()=>{i(!0);const p=await Promise.all(t.map(async g=>{const k=(await Tm(xn(Oe,"projects",g.id,"tasks"))).docs.map(w=>w.data()),I=ck(k),A=RO(g,k);return{...g,progress:I,health:A,taskCount:k.length,completedTasks:k.filter(w=>w.status==="done").length}}));r(p),i(!1)};t.length>0?f():i(!1)},[t]);const c=n.filter(f=>f.name.toLowerCase().includes(o.toLowerCase())),u=[{label:"Avg. Progress",value:`${Math.round(n.reduce((f,p)=>f+p.progress,0)/(n.length||1))}%`,icon:lO,color:"text-primary"},{label:"On Track",value:n.filter(f=>f.health==="On Track").length,icon:tu,color:"text-green-600"},{label:"At Risk",value:n.filter(f=>f.health==="At Risk").length,icon:ok,color:"text-amber-600"},{label:"Overdue",value:n.filter(f=>f.health==="Overdue").length,icon:Sm,color:"text-red-600"}];return d.jsxs("div",{className:"space-y-8 pb-12 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white transition-colors",children:"Project Tracker"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 transition-colors",children:"Detailed performance and health metrics for all projects."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ja,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"text",placeholder:"Filter projects...",className:"pl-10 pr-4 py-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl focus:ring-2 focus:ring-primary/20 outline-none w-64 text-slate-900 dark:text-white transition-all",value:o,onChange:f=>l(f.target.value)})]}),d.jsx("button",{className:"p-2.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:d.jsx(SD,{size:20})}),e!=="member"&&d.jsx("button",{className:"bg-primary text-white px-6 py-2.5 rounded-xl font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-all",children:"Generate Report"})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((f,p)=>d.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm transition-colors",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`p-3 rounded-2xl bg-slate-50 dark:bg-slate-800 ${f.color}`,children:d.jsx(f.icon,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium transition-colors",children:f.label}),d.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white transition-colors",children:f.value})]})]})},p))}),d.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden transition-colors",children:[d.jsxs("div",{className:"p-8 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between transition-colors",children:[d.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:"Project Performance"}),d.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),d.jsx("span",{className:"text-slate-600 dark:text-slate-300 transition-colors",children:"On Track"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"}),d.jsx("span",{className:"text-slate-600 dark:text-slate-300 transition-colors",children:"At Risk"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),d.jsx("span",{className:"text-slate-600 dark:text-slate-300 transition-colors",children:"Overdue"})]})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-800/50 transition-colors",children:[d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Project Name"}),d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Health"}),d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Progress"}),d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tasks"}),d.jsx("th",{className:"px-8 py-5 text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-800 transition-colors",children:c.map(f=>d.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/50 transition-colors group",children:[d.jsx("td",{className:"px-8 py-6",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 bg-primary/10 dark:bg-primary/20 rounded-xl flex items-center justify-center text-primary font-bold transition-colors",children:f.name.charAt(0)}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-slate-900 dark:text-white group-hover:text-primary transition-colors",children:f.name}),d.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 transition-colors",children:["ID: ",f.id.slice(0,8)]})]})]})}),d.jsx("td",{className:"px-8 py-6",children:d.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold transition-colors ${f.status==="Active"?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":f.status==="Completed"?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400"}`,children:f.status})}),d.jsx("td",{className:"px-8 py-6",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${f.health==="On Track"?"bg-green-500":f.health==="At Risk"?"bg-amber-500":"bg-red-500"}`}),d.jsx("span",{className:`text-sm font-bold transition-colors ${f.health==="On Track"?"text-green-600 dark:text-green-400":f.health==="At Risk"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}`,children:f.health})]})}),d.jsx("td",{className:"px-8 py-6",children:d.jsxs("div",{className:"w-full max-w-[160px]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsxs("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 transition-colors",children:[f.progress,"%"]})}),d.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden transition-colors",children:d.jsx("div",{className:`h-full transition-all duration-1000 ${f.progress===100?"bg-green-500":"bg-primary"}`,style:{width:`${f.progress}%`}})})]})}),d.jsxs("td",{className:"px-8 py-6",children:[d.jsxs("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 transition-colors",children:[f.completedTasks," / ",f.taskCount]}),d.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium transition-colors",children:"tasks done"})]}),d.jsx("td",{className:"px-8 py-6 text-right",children:e!=="member"&&d.jsx("button",{className:"p-2 text-slate-400 dark:text-slate-500 hover:text-primary hover:bg-primary/5 dark:hover:bg-primary/10 rounded-xl transition-all",children:d.jsx(ek,{size:20})})})]},f.id))})]})})]})]})}function NO(){const{projects:t}=rr(),{user:e}=Ct(),[n,r]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(""),[c,u]=N.useState("all");N.useEffect(()=>{if(!e||t.length===0){i(!1);return}const _=t.map(k=>{const I=xn(Oe,"projects",k.id,"tasks");return Di(I,A=>{const w=A.docs.map(y=>({id:y.id,projectId:k.id,projectName:k.name,...y.data()})).filter(y=>y.assignedTo===e.uid);r(y=>[...y.filter(j=>j.projectId!==k.id),...w])})});return i(!1),()=>_.forEach(k=>k())},[e,t]);const f=n.filter(_=>{const k=_.title.toLowerCase().includes(o.toLowerCase())||_.projectName.toLowerCase().includes(o.toLowerCase()),I=c==="all"||_.status===c;return k&&I}),p=_=>{switch(_){case"todo":return"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400";case"in-progress":return"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-400";case"review":return"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400";case"done":return"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400";default:return"bg-slate-100 text-slate-600"}},g=_=>{switch(_){case"High":return"text-red-500";case"Medium":return"text-amber-500";case"Low":return"text-blue-500";default:return"text-slate-500"}};return d.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-24 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight transition-colors",children:"My Tasks"}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium transition-colors",children:["You have ",n.filter(_=>_.status!=="done").length," active tasks across ",t.length," projects."]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative group",children:[d.jsx(Ja,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",size:18}),d.jsx("input",{type:"text",placeholder:"Search tasks...",className:"pl-12 pr-6 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none w-64 text-slate-900 dark:text-white transition-all font-medium",value:o,onChange:_=>l(_.target.value)})]}),d.jsxs("select",{className:"px-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none text-slate-700 dark:text-slate-300 font-bold transition-all appearance-none cursor-pointer",value:c,onChange:_=>u(_.target.value),children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"todo",children:"To Do"}),d.jsx("option",{value:"in-progress",children:"In Progress"}),d.jsx("option",{value:"review",children:"Review"}),d.jsx("option",{value:"done",children:"Done"})]})]})]}),s?d.jsx("div",{className:"h-64 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):f.length===0?d.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-dashed border-slate-200 dark:border-slate-800 p-16 text-center transition-colors",children:[d.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-3xl flex items-center justify-center mx-auto mb-6 text-slate-300",children:d.jsx(Rm,{size:40})}),d.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:"No tasks found"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 font-medium transition-colors",children:o||c!=="all"?"Try adjusting your filters to find what you're looking for.":"You don't have any tasks assigned to you at the moment."})]}):d.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.map(_=>d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-xl hover:shadow-primary/5 hover:border-primary/20 transition-all group flex flex-col md:flex-row md:items-center gap-6",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("span",{className:`w-2 h-2 rounded-full ${p(_.status).split(" ")[0].replace("bg-","bg-")}`}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 dark:text-slate-500",children:_.projectName})]}),d.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white truncate group-hover:text-primary transition-colors",children:_.title}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-1 font-medium transition-colors",children:_.description})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[d.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Im,{size:14,className:g(_.priority)}),d.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 transition-colors",children:_.priority})]}),d.jsx("div",{className:"w-px h-4 bg-slate-200 dark:bg-slate-700"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ya,{size:14,className:"text-slate-400"}),d.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 transition-colors",children:_.deadline||"No date"})]})]}),d.jsx("div",{className:`px-4 py-2 rounded-xl text-xs font-bold capitalize ${p(_.status)} transition-colors`,children:_.status.replace("-"," ")}),d.jsx("button",{className:"p-2 text-slate-300 dark:text-slate-600 hover:text-primary dark:hover:text-primary transition-colors",children:d.jsx(Ku,{size:20})})]})]},_.id))})]})}function PO(){const{projects:t}=rr(),{user:e,fetchUsers:n}=Ct(),[r,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(""),[u,f]=N.useState("all"),[p,g]=N.useState({});N.useEffect(()=>{(async()=>{try{const w=await n(),y={};w.forEach(E=>{y[E.uid]=E.name}),g(y)}catch(w){console.error("Error loading member names:",w)}})()},[n]),N.useEffect(()=>{if(!e||t.length===0){o(!1);return}const A=t.map(w=>{const y=xn(Oe,"projects",w.id,"tasks");return Di(y,E=>{const j=E.docs.map(L=>({id:L.id,projectId:w.id,projectName:w.name,...L.data()}));s(L=>[...L.filter(T=>T.projectId!==w.id),...j])})});return o(!1),()=>A.forEach(w=>w())},[e,t]);const _=r.filter(A=>{const w=A.title.toLowerCase().includes(l.toLowerCase())||A.projectName.toLowerCase().includes(l.toLowerCase())||(p[A.assignedTo]||"").toLowerCase().includes(l.toLowerCase()),y=u==="all"||A.status===u;return w&&y}),k=A=>{switch(A){case"todo":return"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400";case"in-progress":return"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-400";case"review":return"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400";case"done":return"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400";default:return"bg-slate-100 text-slate-600"}},I=A=>{switch(A){case"High":return"text-red-500";case"Medium":return"text-amber-500";case"Low":return"text-blue-500";default:return"text-slate-500"}};return d.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-24 animate-in fade-in duration-700",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight transition-colors",children:"Team Tasks"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium transition-colors",children:"Viewing all tasks across your contributing projects."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative group",children:[d.jsx(Ja,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors",size:18}),d.jsx("input",{type:"text",placeholder:"Search tasks or members...",className:"pl-12 pr-6 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none w-64 text-slate-900 dark:text-white transition-all font-medium",value:l,onChange:A=>c(A.target.value)})]}),d.jsxs("select",{className:"px-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl focus:ring-2 focus:ring-primary/20 outline-none text-slate-700 dark:text-slate-300 font-bold transition-all appearance-none cursor-pointer",value:u,onChange:A=>f(A.target.value),children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"todo",children:"To Do"}),d.jsx("option",{value:"in-progress",children:"In Progress"}),d.jsx("option",{value:"review",children:"Review"}),d.jsx("option",{value:"done",children:"Done"})]})]})]}),i?d.jsx("div",{className:"h-64 flex items-center justify-center",children:d.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):_.length===0?d.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-dashed border-slate-200 dark:border-slate-800 p-16 text-center transition-colors",children:[d.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-3xl flex items-center justify-center mx-auto mb-6 text-slate-300",children:d.jsx(rk,{size:40})}),d.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white transition-colors",children:"No team tasks found"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 font-medium transition-colors",children:"Your contributing projects don't have any tasks matching your criteria."})]}):d.jsx("div",{className:"grid grid-cols-1 gap-4",children:_.map(A=>d.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-xl hover:shadow-primary/5 hover:border-primary/20 transition-all group flex flex-col md:flex-row md:items-center gap-6",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("span",{className:`w-2 h-2 rounded-full ${k(A.status).split(" ")[0].replace("bg-","bg-")}`}),d.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 dark:text-slate-500",children:A.projectName})]}),d.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white truncate group-hover:text-primary transition-colors",children:A.title}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx(Nm,{size:14,className:"text-slate-400"}),d.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium transition-colors",children:["Assigned to: ",d.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-bold",children:p[A.assignedTo]||"Unassigned"})]})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[d.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 transition-colors",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Im,{size:14,className:I(A.priority)}),d.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 transition-colors",children:A.priority})]}),d.jsx("div",{className:"w-px h-4 bg-slate-200 dark:bg-slate-700"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ya,{size:14,className:"text-slate-400"}),d.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 transition-colors",children:A.deadline||"No date"})]})]}),d.jsx("div",{className:`px-4 py-2 rounded-xl text-xs font-bold capitalize ${k(A.status)} transition-colors`,children:A.status.replace("-"," ")}),d.jsx("button",{className:"p-2 text-slate-300 dark:text-slate-600 hover:text-primary dark:hover:text-primary transition-colors",children:d.jsx(Ku,{size:20})})]})]},A.id))})]})}const uk=N.createContext();function jO({children:t}){const[e,n]=N.useState(()=>{const s=localStorage.getItem("theme");return s==="dark"||!s&&window.matchMedia("(prefers-color-scheme: dark)").matches});N.useEffect(()=>{e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]);const r=()=>n(s=>!s);return d.jsx(uk.Provider,{value:{darkMode:e,toggleDarkMode:r},children:t})}const dk=()=>N.useContext(uk);function DO(){var g;const{userData:t,updateProfile:e}=Ct(),{darkMode:n,toggleDarkMode:r}=dk(),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState({name:"",email:"",role:"",workspaceName:"Acme Corp Tracker"});N.useEffect(()=>{t&&u(_=>({..._,name:t.name||"",email:t.email||"",role:t.role||"member"}))},[t]);const f=async _=>{_.preventDefault(),i(!0),l(!1);try{await e({name:c.name}),l(!0),setTimeout(()=>l(!1),3e3)}catch(k){console.error("Error updating profile:",k),alert("Failed to update profile")}finally{i(!1)}},p=[{icon:rO,title:"Security",desc:"Secure your account with 2FA and password management."},{icon:tk,title:"Notifications",desc:"Manage your desktop and email notification preferences."},{icon:rh,title:"Appearance",desc:"Custom branding and layout options."},{icon:RD,title:"Data & Storage",desc:"View your workspace storage and cleanup options."}];return d.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 pb-24",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight transition-colors",children:"Settings"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium transition-colors",children:"Control your experience and account preferences."})]}),o&&d.jsxs("div",{className:"flex items-center gap-2 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 px-4 py-2 rounded-2xl font-bold animate-in fade-in slide-in-from-top-4 transition-colors",children:[d.jsx(nk,{size:18}),d.jsx("span",{children:"Changes Saved"})]})]}),d.jsxs("form",{onSubmit:f,className:"bg-white dark:bg-slate-900 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-2xl shadow-slate-200/50 dark:shadow-none overflow-hidden transition-all hover:shadow-primary/5",children:[d.jsx("div",{className:"p-10 border-b border-slate-50 dark:border-slate-800 bg-slate-50/30 dark:bg-slate-800/10 transition-colors",children:d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-28 h-28 rounded-[2rem] bg-gradient-to-br from-primary to-indigo-600 flex items-center justify-center text-4xl font-black text-white shadow-2xl shadow-primary/30 group-hover:scale-105 transition-transform duration-500",children:((g=t==null?void 0:t.name)==null?void 0:g.charAt(0).toUpperCase())||"U"}),d.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-50 dark:border-slate-700 flex items-center justify-center text-primary cursor-pointer hover:bg-primary hover:text-white transition-all",children:d.jsx(rh,{size:18})})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white transition-colors",children:(t==null?void 0:t.name)||"User Name"}),d.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-[10px] font-black uppercase tracking-widest rounded-lg",children:(t==null?void 0:t.role)||"Member"})]}),d.jsxs("p",{className:"text-slate-400 dark:text-slate-500 font-medium flex items-center gap-2 transition-colors",children:[d.jsx(Ta,{size:14}),(t==null?void 0:t.email)||"email@example.com"]})]})]})}),d.jsxs("div",{className:"p-10 space-y-10",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("label",{className:"text-xs font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1 transition-colors",children:"Full Name"}),d.jsxs("div",{className:"relative group",children:[d.jsx(dD,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500 group-focus-within:text-primary transition-colors",size:20}),d.jsx("input",{type:"text",className:"w-full pl-12 pr-6 py-4 bg-slate-50 dark:bg-slate-800/50 border-2 border-transparent focus:border-primary/20 focus:bg-white dark:focus:bg-slate-800 rounded-3xl outline-none transition-all font-bold text-slate-900 dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600 shadow-inner",value:c.name,onChange:_=>u({...c,name:_.target.value})})]})]}),d.jsxs("div",{className:"space-y-3 opacity-60",children:[d.jsx("label",{className:"text-xs font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1 transition-colors",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 dark:text-slate-600",size:20}),d.jsx("input",{readOnly:!0,type:"email",className:"w-full pl-12 pr-6 py-4 bg-slate-50 dark:bg-slate-800/50 border-2 border-transparent rounded-3xl outline-none transition-all font-bold text-slate-400 dark:text-slate-500 cursor-not-allowed",value:c.email})]})]})]}),d.jsxs("div",{className:"pt-8 border-t border-slate-50 dark:border-slate-800",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6 ml-1",children:[d.jsx("h4",{className:"text-xs font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Configuration Settings"}),d.jsx("span",{className:"text-[10px] font-bold bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-0.5 rounded-md",children:"New"})]}),d.jsxs("div",{className:"grid grid-cols-1 gap-6 bg-slate-50/50 dark:bg-slate-800/30 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800/50",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-bold text-slate-900 dark:text-white transition-colors",children:"Dark Mode"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 transition-colors",children:"Switch between light and dark themes."})]}),d.jsx("button",{type:"button",onClick:r,className:`relative w-14 h-8 rounded-full transition-all duration-500 outline-none ${n?"bg-primary":"bg-slate-200 dark:bg-slate-700"}`,children:d.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow-md transition-all duration-500 transform ${n?"left-7 rotate-[360deg]":"left-1"}`,children:n?d.jsx("div",{className:"w-full h-full flex items-center justify-center text-primary",children:d.jsx(Rv,{size:12,className:"fill-current"})}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:d.jsx(rh,{size:12})})})})]}),d.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800"}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-bold text-slate-900 dark:text-white transition-colors",children:"Workspace Name"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 transition-colors",children:"The branding for this project tracker instance."})]}),d.jsx("input",{type:"text",className:"bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-xl px-4 py-2 text-sm font-bold text-slate-700 dark:text-slate-300 outline-none focus:ring-2 focus:ring-primary/20 transition-all",value:c.workspaceName,onChange:_=>u({...c,workspaceName:_.target.value})})]})]})]}),d.jsxs("div",{className:"pt-8 border-t border-slate-50 dark:border-slate-800",children:[d.jsx("h4",{className:"text-xs font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-6 ml-1",children:"Other Sections"}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.map((_,k)=>d.jsxs("button",{type:"button",className:"w-full flex items-center justify-between p-6 rounded-[2rem] bg-white dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800/50 hover:border-primary/20 hover:shadow-xl hover:shadow-primary/5 transition-all group text-left outline-none",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/5 transition-all duration-300",children:d.jsx(_.icon,{size:24})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:_.title}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:_.desc})]})]}),d.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all text-primary",children:d.jsx(Ku,{size:20})})]},k))})]})]}),d.jsxs("div",{className:"px-10 py-8 bg-slate-50/50 dark:bg-slate-800/30 border-t border-slate-50 dark:border-slate-800 flex justify-end gap-4 transition-colors",children:[d.jsx("button",{type:"button",className:"px-8 py-4 rounded-2xl font-bold text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-800 hover:shadow-sm transition-all",children:"Reset Defaults"}),d.jsx("button",{disabled:s,type:"submit",className:"min-w-[180px] px-8 py-4 rounded-2xl font-black text-white bg-primary hover:bg-primary/90 transition-all shadow-xl shadow-primary/25 flex items-center justify-center gap-3 disabled:opacity-50 hover:scale-[1.02] active:scale-[0.98]",children:s?d.jsx(Oi,{className:"animate-spin",size:20}):d.jsxs(d.Fragment,{children:[d.jsx(Rv,{size:20}),"Save Changes"]})})]})]}),d.jsxs("div",{className:"rounded-[2.5rem] bg-red-50 dark:bg-red-900/10 p-8 border border-red-100 dark:border-red-900/30 flex items-center justify-between transition-colors",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-red-600 dark:text-red-400 font-black text-lg",children:"Danger Zone"}),d.jsx("p",{className:"text-red-500/70 dark:text-red-400/50 font-medium",children:"Once you delete your account, there is no going back. Please be certain."})]}),d.jsx("button",{className:"px-8 py-3 rounded-2xl bg-white dark:bg-slate-900 border-2 border-red-600 dark:border-red-500 text-red-600 dark:text-red-500 font-black hover:bg-red-600 dark:hover:bg-red-500 hover:text-white transition-all shadow-lg shadow-red-200 dark:shadow-none",children:"Delete Account"})]})]})}function OO(){const{rolePermissions:t,updatePermissions:e,hasPermission:n}=Vs(),[r,s]=N.useState(t),[i,o]=N.useState(!1),[l,c]=N.useState(null),u={"Project Management":[{id:se.CREATE_PROJECT,label:"Create Projects",desc:"Allow creating new project workspaces"},{id:se.UPDATE_PROJECT,label:"Update Projects",desc:"Edit project details and settings"},{id:se.DELETE_PROJECT,label:"Delete Projects",desc:"Permenantly remove projects"},{id:se.ASSIGN_PROJECT,label:"Assign Members",desc:"Add or remove members from projects"},{id:se.CHANGE_PROJECT_STATUS,label:"Change Status",desc:"Move projects between active/archived"},{id:se.VIEW_ALL_PROJECTS,label:"View All Projects",desc:"Bypass assignment to see all content"}],"Task Operations":[{id:se.CREATE_TASK,label:"Create Tasks",desc:"Add new tasks to any board"},{id:se.ASSIGN_TASK,label:"Assign Tasks",desc:"Change task ownership"},{id:se.UPDATE_TASK_STATUS,label:"Update Progress",desc:"Drag and drop tasks between columns"},{id:se.DELETE_TASK,label:"Delete Tasks",desc:"Remove tasks from boards"}],Administration:[{id:se.VIEW_REPORTS,label:"View Analytics",desc:"Access productivity and workload reports"},{id:se.MANAGE_USERS,label:"User Management",desc:"Invite or deactivate user accounts"},{id:se.VIEW_TEAM_WORKLOAD,label:"Team Workload",desc:"Monitor task distribution across team"},{id:se.ACCESS_SETTINGS,label:"Access Settings",desc:"View basic application settings"},{id:se.MANAGE_PERMISSIONS,label:"Manage RBAC",desc:"Edit role-based access controls"}]},f=[{id:"manager",label:"Manager",color:"text-indigo-600",bg:"bg-indigo-50 dark:bg-indigo-900/20"},{id:"member",label:"Team Member",color:"text-emerald-600",bg:"bg-emerald-50 dark:bg-emerald-900/20"}],p=(_,k)=>{s(I=>{const A=I[_]||[],w=A.includes(k)?A.filter(y=>y!==k):[...A,k];return{...I,[_]:w}})},g=async()=>{o(!0),c(null);try{await e(r),c("success"),setTimeout(()=>c(null),3e3)}catch(_){console.error("Failed to save permissions:",_),c("error")}finally{o(!1)}};return n(se.MANAGE_PERMISSIONS)?d.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 pb-20",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Privilege Management"}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium",children:"Configure Role-Based Access Control (RBAC) for your workspace."})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[l==="success"&&d.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold animate-in fade-in slide-in-from-right-4",children:[d.jsx(tu,{size:18}),d.jsx("span",{children:"Control List Updated"})]}),d.jsxs("button",{onClick:g,disabled:i,className:"flex items-center gap-2 bg-primary text-white px-8 py-3 rounded-2xl font-black shadow-xl shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:[i?d.jsx(ru,{className:"animate-pulse"}):d.jsx(JD,{size:20}),d.jsx("span",{children:"Save Permissions"})]})]})]}),d.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/30 rounded-3xl p-6 flex gap-4",children:[d.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 p-2 h-fit rounded-xl text-amber-600 dark:text-amber-400",children:d.jsx(ok,{size:20})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-bold text-amber-800 dark:text-amber-300",children:"Important Note"}),d.jsx("p",{className:"text-sm text-amber-700/70 dark:text-amber-400/60 leading-relaxed",children:"Administrators always have full access to all features regardless of these settings. Changes made here apply instantly to all active users in the selected roles."})]})]}),d.jsx("div",{className:"grid grid-cols-1 gap-12",children:Object.entries(u).map(([_,k])=>d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-8 w-1 bg-primary rounded-full"}),d.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white uppercase tracking-wider",children:_})]}),d.jsx("div",{className:"grid grid-cols-1 gap-4",children:k.map(I=>d.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-[2rem] p-8 flex items-center justify-between hover:border-primary/20 transition-all shadow-sm group",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/5 transition-all",children:d.jsx(ru,{size:24})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:I.label}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:I.desc})]})]}),d.jsx("div",{className:"flex items-center gap-8",children:f.map(A=>{var w,y;return d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("button",{onClick:()=>p(A.id,I.id),className:`
                                                        w-14 h-14 rounded-2xl flex items-center justify-center border-2 transition-all outline-none
                                                        ${(w=r[A.id])!=null&&w.includes(I.id)?`${A.bg} ${A.color} border-transparent scale-110 shadow-lg`:"border-slate-100 dark:border-slate-800 text-slate-300 dark:text-slate-700 hover:border-slate-200"}
                                                    `,children:(y=r[A.id])!=null&&y.includes(I.id)?d.jsx(tu,{size:24}):d.jsx(fD,{size:24,className:"opacity-40"})}),d.jsx("span",{className:`text-[10px] font-black uppercase tracking-tighter ${A.color}`,children:A.label})]},A.id)})})]},I.id))})]},_))})]}):d.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-4",children:[d.jsx(Am,{size:48,className:"text-slate-300"}),d.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Admin Access Required"}),d.jsx("p",{className:"text-slate-500",children:"You don't have permission to manage system privileges."})]})}function hk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function LO(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hk(t))&&(r&&(r+=" "),r+=e);return r}const VO=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},MO=(t,e)=>({classGroupId:t,validator:e}),fk=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),su="-",Cv=[],FO="arbitrary..",UO=t=>{const e=$O(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return zO(o);const l=o.split(su),c=l[0]===""&&l.length>1?1:0;return pk(l,c,e)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=r[o],u=n[o];return c?u?VO(u,c):c:u||Cv}return n[o]||Cv}}},pk=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],i=n.nextPart.get(s);if(i){const u=pk(t,e+1,i);if(u)return u}const o=n.validators;if(o===null)return;const l=e===0?t.join(su):t.slice(e).join(su),c=o.length;for(let u=0;u<c;u++){const f=o[u];if(f.validator(l))return f.classGroupId}},zO=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?FO+r:void 0})(),$O=t=>{const{theme:e,classGroups:n}=t;return BO(n,e)},BO=(t,e)=>{const n=fk();for(const r in t){const s=t[r];jm(s,n,r,e)}return n},jm=(t,e,n,r)=>{const s=t.length;for(let i=0;i<s;i++){const o=t[i];HO(o,e,n,r)}},HO=(t,e,n,r)=>{if(typeof t=="string"){WO(t,e,n);return}if(typeof t=="function"){qO(t,e,n,r);return}GO(t,e,n,r)},WO=(t,e,n)=>{const r=t===""?e:mk(e,t);r.classGroupId=n},qO=(t,e,n,r)=>{if(KO(t)){jm(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(MO(n,t))},GO=(t,e,n,r)=>{const s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[l,c]=s[o];jm(c,mk(e,l),n,r)}},mk=(t,e)=>{let n=t;const r=e.split(su),s=r.length;for(let i=0;i<s;i++){const o=r[i];let l=n.nextPart.get(o);l||(l=fk(),n.nextPart.set(o,l)),n=l}return n},KO=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,QO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(i,o)=>{n[i]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=r[i])!==void 0)return s(i,o),o},set(i,o){i in n?n[i]=o:s(i,o)}}},Cf="!",Nv=":",YO=[],Pv=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),JO=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,l=0,c=0,u;const f=s.length;for(let I=0;I<f;I++){const A=s[I];if(o===0&&l===0){if(A===Nv){i.push(s.slice(c,I)),c=I+1;continue}if(A==="/"){u=I;continue}}A==="["?o++:A==="]"?o--:A==="("?l++:A===")"&&l--}const p=i.length===0?s:s.slice(c);let g=p,_=!1;p.endsWith(Cf)?(g=p.slice(0,-1),_=!0):p.startsWith(Cf)&&(g=p.slice(1),_=!0);const k=u&&u>c?u-c:void 0;return Pv(i,_,g,k)};if(e){const s=e+Nv,i=r;r=o=>o.startsWith(s)?i(o.slice(s.length)):Pv(YO,!1,o,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},XO=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const o=n[i],l=o[0]==="[",c=e.has(o);l||c?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},ZO=t=>({cache:QO(t.cacheSize),parseClassName:JO(t),sortModifiers:XO(t),...UO(t)}),eL=/\s+/,tL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],l=t.trim().split(eL);let c="";for(let u=l.length-1;u>=0;u-=1){const f=l[u],{isExternal:p,modifiers:g,hasImportantModifier:_,baseClassName:k,maybePostfixModifierPosition:I}=n(f);if(p){c=f+(c.length>0?" "+c:c);continue}let A=!!I,w=r(A?k.substring(0,I):k);if(!w){if(!A){c=f+(c.length>0?" "+c:c);continue}if(w=r(k),!w){c=f+(c.length>0?" "+c:c);continue}A=!1}const y=g.length===0?"":g.length===1?g[0]:i(g).join(":"),E=_?y+Cf:y,j=E+w;if(o.indexOf(j)>-1)continue;o.push(j);const L=s(w,A);for(let U=0;U<L.length;++U){const T=L[U];o.push(E+T)}c=f+(c.length>0?" "+c:c)}return c},nL=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=gk(n))&&(s&&(s+=" "),s+=r);return s},gk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=gk(t[r]))&&(n&&(n+=" "),n+=e);return n},rL=(t,...e)=>{let n,r,s,i;const o=c=>{const u=e.reduce((f,p)=>p(f),t());return n=ZO(u),r=n.cache.get,s=n.cache.set,i=l,l(c)},l=c=>{const u=r(c);if(u)return u;const f=tL(c,n);return s(c,f),f};return i=o,(...c)=>i(nL(...c))},sL=[],He=t=>{const e=n=>n[t]||sL;return e.isThemeGetter=!0,e},yk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,iL=/^\d+\/\d+$/,oL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hs=t=>iL.test(t),re=t=>!!t&&!Number.isNaN(Number(t)),hr=t=>!!t&&Number.isInteger(Number(t)),sh=t=>t.endsWith("%")&&re(t.slice(0,-1)),Dn=t=>oL.test(t),dL=()=>!0,hL=t=>aL.test(t)&&!lL.test(t),_k=()=>!1,fL=t=>cL.test(t),pL=t=>uL.test(t),mL=t=>!q(t)&&!G(t),gL=t=>Gi(t,Ek,_k),q=t=>yk.test(t),cs=t=>Gi(t,kk,hL),ih=t=>Gi(t,xL,re),jv=t=>Gi(t,wk,_k),yL=t=>Gi(t,xk,pL),Ll=t=>Gi(t,Tk,fL),G=t=>vk.test(t),ko=t=>Ki(t,kk),vL=t=>Ki(t,EL),Dv=t=>Ki(t,wk),_L=t=>Ki(t,Ek),wL=t=>Ki(t,xk),Vl=t=>Ki(t,Tk,!0),Gi=(t,e,n)=>{const r=yk.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ki=(t,e,n=!1)=>{const r=vk.exec(t);return r?r[1]?e(r[1]):n:!1},wk=t=>t==="position"||t==="percentage",xk=t=>t==="image"||t==="url",Ek=t=>t==="length"||t==="size"||t==="bg-size",kk=t=>t==="length",xL=t=>t==="number",EL=t=>t==="family-name",Tk=t=>t==="shadow",kL=()=>{const t=He("color"),e=He("font"),n=He("text"),r=He("font-weight"),s=He("tracking"),i=He("leading"),o=He("breakpoint"),l=He("container"),c=He("spacing"),u=He("radius"),f=He("shadow"),p=He("inset-shadow"),g=He("text-shadow"),_=He("drop-shadow"),k=He("blur"),I=He("perspective"),A=He("aspect"),w=He("ease"),y=He("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...j(),G,q],U=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],v=()=>[G,q,c],b=()=>[Hs,"full","auto",...v()],C=()=>[hr,"none","subgrid",G,q],R=()=>["auto",{span:["full",hr,G,q]},hr,G,q],P=()=>[hr,"auto",G,q],S=()=>["auto","min","max","fr",G,q],we=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],st=()=>["start","end","center","stretch","center-safe","end-safe"],pt=()=>["auto",...v()],Nt=()=>[Hs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],V=()=>[t,G,q],Y=()=>[...j(),Dv,jv,{position:[G,q]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],fe=()=>["auto","cover","contain",_L,gL,{size:[G,q]}],xe=()=>[sh,ko,cs],Se=()=>["","none","full",u,G,q],ge=()=>["",re,ko,cs],Wt=()=>["solid","dashed","dotted","double"],Et=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[re,sh,Dv,jv],Ms=()=>["","none",k,G,q],ns=()=>["none",re,G,q],Fs=()=>["none",re,G,q],Qi=()=>[re,G,q],rs=()=>[Hs,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Dn],breakpoint:[Dn],color:[dL],container:[Dn],"drop-shadow":[Dn],ease:["in","out","in-out"],font:[mL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Dn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Dn],shadow:[Dn],spacing:["px",re],text:[Dn],"text-shadow":[Dn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hs,q,G,A]}],container:["container"],columns:[{columns:[re,q,G,l]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:b()}],"inset-x":[{"inset-x":b()}],"inset-y":[{"inset-y":b()}],start:[{start:b()}],end:[{end:b()}],top:[{top:b()}],right:[{right:b()}],bottom:[{bottom:b()}],left:[{left:b()}],visibility:["visible","invisible","collapse"],z:[{z:[hr,"auto",G,q]}],basis:[{basis:[Hs,"full","auto",l,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[re,Hs,"auto","initial","none",q]}],grow:[{grow:["",re,G,q]}],shrink:[{shrink:["",re,G,q]}],order:[{order:[hr,"first","last","none",G,q]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:[...we(),"normal"]}],"justify-items":[{"justify-items":[...st(),"normal"]}],"justify-self":[{"justify-self":["auto",...st()]}],"align-content":[{content:["normal",...we()]}],"align-items":[{items:[...st(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...st(),{baseline:["","last"]}]}],"place-content":[{"place-content":we()}],"place-items":[{"place-items":[...st(),"baseline"]}],"place-self":[{"place-self":["auto",...st()]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:pt()}],mx:[{mx:pt()}],my:[{my:pt()}],ms:[{ms:pt()}],me:[{me:pt()}],mt:[{mt:pt()}],mr:[{mr:pt()}],mb:[{mb:pt()}],ml:[{ml:pt()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:Nt()}],w:[{w:[l,"screen",...Nt()]}],"min-w":[{"min-w":[l,"screen","none",...Nt()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...Nt()]}],h:[{h:["screen","lh",...Nt()]}],"min-h":[{"min-h":["screen","lh","none",...Nt()]}],"max-h":[{"max-h":["screen","lh",...Nt()]}],"font-size":[{text:["base",n,ko,cs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,G,ih]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sh,q]}],"font-family":[{font:[vL,q,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,G,q]}],"line-clamp":[{"line-clamp":[re,"none",G,ih]}],leading:[{leading:[i,...v()]}],"list-image":[{"list-image":["none",G,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",G,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Wt(),"wavy"]}],"text-decoration-thickness":[{decoration:[re,"from-font","auto",G,cs]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[re,"auto",G,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",G,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",G,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:fe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hr,G,q],radial:["",G,q],conic:[hr,G,q]},wL,yL]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:xe()}],"gradient-via-pos":[{via:xe()}],"gradient-to-pos":[{to:xe()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Wt(),"hidden","none"]}],"divide-style":[{divide:[...Wt(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...Wt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[re,G,q]}],"outline-w":[{outline:["",re,ko,cs]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",f,Vl,Ll]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",p,Vl,Ll]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[re,cs]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",g,Vl,Ll]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[re,G,q]}],"mix-blend":[{"mix-blend":[...Et(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Et()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[re]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[G,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[re]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:fe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",G,q]}],filter:[{filter:["","none",G,q]}],blur:[{blur:Ms()}],brightness:[{brightness:[re,G,q]}],contrast:[{contrast:[re,G,q]}],"drop-shadow":[{"drop-shadow":["","none",_,Vl,Ll]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",re,G,q]}],"hue-rotate":[{"hue-rotate":[re,G,q]}],invert:[{invert:["",re,G,q]}],saturate:[{saturate:[re,G,q]}],sepia:[{sepia:["",re,G,q]}],"backdrop-filter":[{"backdrop-filter":["","none",G,q]}],"backdrop-blur":[{"backdrop-blur":Ms()}],"backdrop-brightness":[{"backdrop-brightness":[re,G,q]}],"backdrop-contrast":[{"backdrop-contrast":[re,G,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",re,G,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[re,G,q]}],"backdrop-invert":[{"backdrop-invert":["",re,G,q]}],"backdrop-opacity":[{"backdrop-opacity":[re,G,q]}],"backdrop-saturate":[{"backdrop-saturate":[re,G,q]}],"backdrop-sepia":[{"backdrop-sepia":["",re,G,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",G,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[re,"initial",G,q]}],ease:[{ease:["linear","initial",w,G,q]}],delay:[{delay:[re,G,q]}],animate:[{animate:["none",y,G,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[I,G,q]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:ns()}],"rotate-x":[{"rotate-x":ns()}],"rotate-y":[{"rotate-y":ns()}],"rotate-z":[{"rotate-z":ns()}],scale:[{scale:Fs()}],"scale-x":[{"scale-x":Fs()}],"scale-y":[{"scale-y":Fs()}],"scale-z":[{"scale-z":Fs()}],"scale-3d":["scale-3d"],skew:[{skew:Qi()}],"skew-x":[{"skew-x":Qi()}],"skew-y":[{"skew-y":Qi()}],transform:[{transform:[G,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:rs()}],"translate-x":[{"translate-x":rs()}],"translate-y":[{"translate-y":rs()}],"translate-z":[{"translate-z":rs()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",G,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",G,q]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[re,ko,cs,ih]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TL=rL(kL);function Ov(...t){return TL(LO(t))}const bL=[{icon:ND,label:"Dashboard",path:"/"},{icon:kD,label:"Projects",path:"/projects"},{icon:tD,label:"Tracker",path:"/tracker"},{icon:Rm,label:"My Tasks",path:"/tasks"},{icon:rk,label:"Team Tasks",path:"/team-tasks",permission:se.VIEW_TEAM_WORKLOAD},{icon:lk,label:"Team",path:"/team",permission:se.VIEW_TEAM_WORKLOAD},{icon:ru,label:"Admin Panel",path:"/admin/permissions",permission:se.MANAGE_PERMISSIONS},{icon:eO,label:"Settings",path:"/settings",permission:se.ACCESS_SETTINGS}];function IL(){var r;const{logout:t,userData:e}=Ct(),{hasPermission:n}=Vs();return d.jsxs("aside",{className:"w-64 bg-white dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800 flex flex-col h-screen overflow-hidden transition-colors",children:[d.jsxs("div",{className:"p-6 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary/20",children:d.jsx(Cm,{size:24})}),d.jsxs("div",{children:[d.jsx("h1",{className:"font-bold text-slate-900 dark:text-white leading-none transition-colors",children:"Project"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 transition-colors",children:"Tracker v1.0"})]})]}),d.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto custom-scrollbar",children:bL.map(s=>s.permission&&!n(s.permission)?null:d.jsxs(hx,{to:s.path,className:({isActive:i})=>Ov("flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group",i?"bg-primary text-white shadow-md shadow-primary/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white"),children:[d.jsx(s.icon,{size:20,className:Ov("transition-transform duration-200 group-hover:scale-110","text-current")}),d.jsx("span",{className:"font-medium",children:s.label})]},s.path))}),d.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800",children:[d.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-4 mb-4 transition-colors",children:d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:((r=e==null?void 0:e.name)==null?void 0:r.charAt(0))||"U"}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate transition-colors",children:(e==null?void 0:e.name)||"User"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize transition-colors",children:(e==null?void 0:e.role)||"Member"})]})]})}),d.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-3 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl transition-all duration-200",children:[d.jsx(OD,{size:20}),d.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}function SL(){const{hasPermission:t}=Vs(),{darkMode:e,toggleDarkMode:n}=dk();return d.jsxs("header",{className:"h-16 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 px-8 flex items-center justify-between sticky top-0 z-10 transition-colors",children:[d.jsx("div",{className:"flex items-center gap-4 flex-1",children:d.jsxs("div",{className:"relative max-w-md w-full",children:[d.jsx(Ja,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),d.jsx("input",{type:"text",placeholder:"Search tasks, projects...",className:"w-full bg-slate-100/50 dark:bg-slate-800/50 border-none rounded-xl py-2 pl-10 pr-4 text-sm text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-primary/20 transition-all outline-none"})]})}),d.jsxs("div",{className:"flex items-center gap-4",children:[t(se.CREATE_PROJECT)&&d.jsxs("button",{className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-xl text-sm font-semibold hover:bg-primary/90 transition-all shadow-md shadow-primary/20",children:[d.jsx(nu,{size:18}),d.jsx("span",{children:"New Project"})]}),d.jsx("button",{onClick:n,className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-all",children:e?d.jsx(oO,{size:20}):d.jsx(UD,{size:20})}),d.jsxs("button",{className:"relative p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-all",children:[d.jsx(tk,{size:20}),d.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 border-2 border-white dark:border-slate-900 rounded-full"})]})]})]})}function On({children:t}){const{user:e,loading:n}=Ct();return n?d.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 transition-colors",children:d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):e?d.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50 dark:bg-slate-950 transition-colors",children:[d.jsx(IL,{}),d.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[d.jsx(SL,{}),d.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-8 custom-scrollbar",children:t})]})]}):d.jsx(lx,{to:"/login"})}function AL(){return d.jsx(qj,{children:d.jsx(jO,{children:d.jsx(Kj,{children:d.jsx(Gj,{children:d.jsxs(kS,{children:[d.jsx(jt,{path:"/login",element:d.jsx(_O,{})}),d.jsx(jt,{path:"/signup",element:d.jsx(wO,{})}),d.jsx(jt,{path:"/",element:d.jsx(On,{children:d.jsx(xO,{})})}),d.jsx(jt,{path:"/projects",element:d.jsx(On,{children:d.jsx(kO,{})})}),d.jsx(jt,{path:"/board/:projectId",element:d.jsx(On,{children:d.jsx(SO,{})})}),d.jsx(jt,{path:"/team",element:d.jsx(On,{children:d.jsx(AO,{})})}),d.jsx(jt,{path:"/tracker",element:d.jsx(On,{children:d.jsx(CO,{})})}),d.jsx(jt,{path:"/tasks",element:d.jsx(On,{children:d.jsx(NO,{})})}),d.jsx(jt,{path:"/team-tasks",element:d.jsx(On,{children:d.jsx(PO,{})})}),d.jsx(jt,{path:"/settings",element:d.jsx(On,{children:d.jsx(DO,{})})}),d.jsx(jt,{path:"/admin/permissions",element:d.jsx(On,{children:d.jsx(OO,{})})}),d.jsx(jt,{path:"*",element:d.jsx(lx,{to:"/"})})]})})})})})}Kw(document.getElementById("root")).render(d.jsx(N.StrictMode,{children:d.jsx(GS,{children:d.jsx(AL,{})})}));
